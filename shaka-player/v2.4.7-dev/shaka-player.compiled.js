(function(){var innerGlobal=typeof window!="undefined"?window:global;var exportTo={};(function(window,global){var p,aa="function"==typeof Object.defineProperties?Object.defineProperty:function(c,d,e){c!=Array.prototype&&c!=Object.prototype&&(c[d]=e.value)},ba="undefined"!=typeof window&&window===this?this:"undefined"!=typeof global&&null!=global?global:this;function ca(){ca=function(){};ba.Symbol||(ba.Symbol=da)}var da=function(){var c=0;return function(d){return"jscomp_symbol_"+(d||"")+c++}}();
function ea(){ca();var c=ba.Symbol.iterator;c||(c=ba.Symbol.iterator=ba.Symbol("iterator"));"function"!=typeof Array.prototype[c]&&aa(Array.prototype,c,{configurable:!0,writable:!0,value:function(){return fa(this)}});ea=function(){}}function fa(c){var d=0;return ha(function(){return d<c.length?{done:!1,value:c[d++]}:{done:!0}})}function ha(c){ea();c={next:c};c[ba.Symbol.iterator]=function(){return this};return c}function q(c){ea();var d=c[Symbol.iterator];return d?d.call(c):fa(c)}
function ia(c,d){if(d){for(var e=ba,f=c.split("."),g=0;g<f.length-1;g++){var h=f[g];h in e||(e[h]={});e=e[h]}f=f[f.length-1];g=e[f];h=d(g);h!=g&&null!=h&&aa(e,f,{configurable:!0,writable:!0,value:h})}}
ia("Promise",function(c){function d(c){this.b=0;this.g=void 0;this.a=[];var d=this.c();try{c(d.resolve,d.reject)}catch(m){d.reject(m)}}function e(){this.a=null}function f(c){return c instanceof d?c:new d(function(d){d(c)})}if(c)return c;e.prototype.b=function(c){null==this.a&&(this.a=[],this.f());this.a.push(c)};e.prototype.f=function(){var c=this;this.c(function(){c.h()})};var g=ba.setTimeout;e.prototype.c=function(c){g(c,0)};e.prototype.h=function(){for(;this.a&&this.a.length;){var c=this.a;this.a=
[];for(var d=0;d<c.length;++d){var e=c[d];c[d]=null;try{e()}catch(n){this.g(n)}}}this.a=null};e.prototype.g=function(c){this.c(function(){throw c;})};d.prototype.c=function(){function c(c){return function(f){e||(e=!0,c.call(d,f))}}var d=this,e=!1;return{resolve:c(this.m),reject:c(this.f)}};d.prototype.m=function(c){if(c===this)this.f(new TypeError("A Promise cannot resolve to itself"));else if(c instanceof d)this.o(c);else{a:switch(typeof c){case "object":var e=null!=c;break a;case "function":e=!0;
break a;default:e=!1}e?this.l(c):this.h(c)}};d.prototype.l=function(c){var d=void 0;try{d=c.then}catch(m){this.f(m);return}"function"==typeof d?this.s(d,c):this.h(c)};d.prototype.f=function(c){this.i(2,c)};d.prototype.h=function(c){this.i(1,c)};d.prototype.i=function(c,d){if(0!=this.b)throw Error("Cannot settle("+c+", "+d+"): Promise already settled in state"+this.b);this.b=c;this.g=d;this.j()};d.prototype.j=function(){if(null!=this.a){for(var c=0;c<this.a.length;++c)h.b(this.a[c]);this.a=null}};
var h=new e;d.prototype.o=function(c){var d=this.c();c.sb(d.resolve,d.reject)};d.prototype.s=function(c,d){var e=this.c();try{c.call(d,e.resolve,e.reject)}catch(n){e.reject(n)}};d.prototype.then=function(c,e){function f(c,d){return"function"==typeof c?function(d){try{g(c(d))}catch(qa){h(qa)}}:d}var g,h,k=new d(function(c,d){g=c;h=d});this.sb(f(c,g),f(e,h));return k};d.prototype["catch"]=function(c){return this.then(void 0,c)};d.prototype.sb=function(c,d){function e(){switch(f.b){case 1:c(f.g);break;
case 2:d(f.g);break;default:throw Error("Unexpected state: "+f.b);}}var f=this;null==this.a?h.b(e):this.a.push(e)};d.resolve=f;d.reject=function(c){return new d(function(d,e){e(c)})};d.race=function(c){return new d(function(d,e){for(var g=q(c),h=g.next();!h.done;h=g.next())f(h.value).sb(d,e)})};d.all=function(c){var e=q(c),g=e.next();return g.done?f([]):new d(function(c,d){function h(d){return function(e){k[d]=e;l--;0==l&&c(k)}}var k=[],l=0;do k.push(void 0),l++,f(g.value).sb(h(k.length-1),d),g=e.next();
while(!g.done)})};return d});ia("Promise.prototype.finally",function(c){return c?c:function(c){return this.then(function(d){return Promise.resolve(c()).then(function(){return d})},function(d){return Promise.resolve(c()).then(function(){throw d;})})}});function ja(c){function d(d){return c.next(d)}function e(d){return c["throw"](d)}return new Promise(function(f,g){function h(c){c.done?f(c.value):Promise.resolve(c.value).then(d,e).then(h,g)}h(c.next())})}function r(c){return ja(c())}
function ka(){this.g=!1;this.c=null;this.K=void 0;this.u=1;this.b=this.f=0;this.i=this.a=null}function la(c){if(c.g)throw new TypeError("Generator is already running");c.g=!0}ka.prototype.h=function(c){this.K=c};function ma(c,d){c.a={rc:d,yc:!0};c.u=c.f||c.b}ka.prototype["return"]=function(c){this.a={"return":c};this.u=this.b};function w(c,d,e){c.u=e;return{value:d}}ka.prototype.O=function(c){this.u=c};function na(c,d,e){c.f=d;void 0!=e&&(c.b=e)}function oa(c){c.f=0;c.b=2}
function pa(c,d){c.u=d;c.f=0}function ra(c){c.f=0;var d=c.a.rc;c.a=null;return d}function sa(c){c.i=[c.a];c.f=0;c.b=0}function ta(c,d){var e=c.i.splice(0)[0];(e=c.a=c.a||e)?e.yc?c.u=c.f||c.b:void 0!=e.O&&c.b<e.O?(c.u=e.O,c.a=null):c.u=c.b:c.u=d}function ua(c){this.a=new ka;this.b=c}function va(c,d){la(c.a);var e=c.a.c;if(e)return wa(c,"return"in e?e["return"]:function(c){return{value:c,done:!0}},d,c.a["return"]);c.a["return"](d);return xa(c)}
function wa(c,d,e,f){try{var g=d.call(c.a.c,e);if(!(g instanceof Object))throw new TypeError("Iterator result "+g+" is not an object");if(!g.done)return c.a.g=!1,g;var h=g.value}catch(k){return c.a.c=null,ma(c.a,k),xa(c)}c.a.c=null;f.call(c.a,h);return xa(c)}
function xa(c){for(;c.a.u;)try{var d=c.b(c.a);if(d)return c.a.g=!1,{value:d.value,done:!1}}catch(e){c.a.K=void 0,ma(c.a,e)}c.a.g=!1;if(c.a.a){d=c.a.a;c.a.a=null;if(d.yc)throw d.rc;return{value:d["return"],done:!0}}return{value:void 0,done:!0}}
function ya(c){this.next=function(d){la(c.a);c.a.c?d=wa(c,c.a.c.next,d,c.a.h):(c.a.h(d),d=xa(c));return d};this["throw"]=function(d){la(c.a);c.a.c?d=wa(c,c.a.c["throw"],d,c.a.h):(ma(c.a,d),d=xa(c));return d};this["return"]=function(d){return va(c,d)};ea();this[Symbol.iterator]=function(){return this}}function x(c,d){ya.prototype=c.prototype;return new ya(new ua(d))}function za(c,d){return Object.prototype.hasOwnProperty.call(c,d)}
ia("WeakMap",function(c){function d(c){this.a=(h+=Math.random()+1).toString();if(c){ca();ea();c=q(c);for(var d;!(d=c.next()).done;)d=d.value,this.set(d[0],d[1])}}function e(c){za(c,g)||aa(c,g,{value:{}})}function f(c){var d=Object[c];d&&(Object[c]=function(c){e(c);return d(c)})}if(function(){if(!c||!Object.seal)return!1;try{var d=Object.seal({}),e=Object.seal({}),f=new c([[d,2],[e,3]]);if(2!=f.get(d)||3!=f.get(e))return!1;f["delete"](d);f.set(e,4);return!f.has(d)&&4==f.get(e)}catch(n){return!1}}())return c;
var g="$jscomp_hidden_"+Math.random();f("freeze");f("preventExtensions");f("seal");var h=0;d.prototype.set=function(c,d){e(c);if(!za(c,g))throw Error("WeakMap key fail: "+c);c[g][this.a]=d;return this};d.prototype.get=function(c){return za(c,g)?c[g][this.a]:void 0};d.prototype.has=function(c){return za(c,g)&&za(c[g],this.a)};d.prototype["delete"]=function(c){return za(c,g)&&za(c[g],this.a)?delete c[g][this.a]:!1};return d});
ia("Map",function(c){function d(){var c={};return c.qa=c.next=c.head=c}function e(c,d){var e=c.a;return ha(function(){if(e){for(;e.head!=c.a;)e=e.qa;for(;e.next!=e.head;)return e=e.next,{done:!1,value:d(e)};e=null}return{done:!0,value:void 0}})}function f(c,d){var e=d&&typeof d;"object"==e||"function"==e?h.has(d)?e=h.get(d):(e=""+ ++k,h.set(d,e)):e="p_"+d;var f=c.b[e];if(f&&za(c.b,e))for(var g=0;g<f.length;g++){var l=f[g];if(d!==d&&l.key!==l.key||d===l.key)return{id:e,list:f,index:g,R:l}}return{id:e,
list:f,index:-1,R:void 0}}function g(c){this.b={};this.a=d();this.size=0;if(c){c=q(c);for(var e;!(e=c.next()).done;)e=e.value,this.set(e[0],e[1])}}if(function(){if(!c||"function"!=typeof c||!c.prototype.entries||"function"!=typeof Object.seal)return!1;try{var d=Object.seal({x:4}),e=new c(q([[d,"s"]]));if("s"!=e.get(d)||1!=e.size||e.get({x:4})||e.set({x:4},"t")!=e||2!=e.size)return!1;var f=e.entries(),g=f.next();if(g.done||g.value[0]!=d||"s"!=g.value[1])return!1;g=f.next();return g.done||4!=g.value[0].x||
"t"!=g.value[1]||!f.next().done?!1:!0}catch(u){return!1}}())return c;ca();ea();var h=new WeakMap;g.prototype.set=function(c,d){var e=f(this,c);e.list||(e.list=this.b[e.id]=[]);e.R?e.R.value=d:(e.R={next:this.a,qa:this.a.qa,head:this.a,key:c,value:d},e.list.push(e.R),this.a.qa.next=e.R,this.a.qa=e.R,this.size++);return this};g.prototype["delete"]=function(c){c=f(this,c);return c.R&&c.list?(c.list.splice(c.index,1),c.list.length||delete this.b[c.id],c.R.qa.next=c.R.next,c.R.next.qa=c.R.qa,c.R.head=
null,this.size--,!0):!1};g.prototype.clear=function(){this.b={};this.a=this.a.qa=d();this.size=0};g.prototype.has=function(c){return!!f(this,c).R};g.prototype.get=function(c){return(c=f(this,c).R)&&c.value};g.prototype.entries=function(){return e(this,function(c){return[c.key,c.value]})};g.prototype.keys=function(){return e(this,function(c){return c.key})};g.prototype.values=function(){return e(this,function(c){return c.value})};g.prototype.forEach=function(c,d){for(var e=this.entries(),f;!(f=e.next()).done;)f=
f.value,c.call(d,f[1],f[0],this)};g.prototype[Symbol.iterator]=g.prototype.entries;var k=0;return g});ia("Array.from",function(c){return c?c:function(c,e,f){ea();e=null!=e?e:function(c){return c};var d=[],h=c[Symbol.iterator];if("function"==typeof h)for(c=h.call(c);!(h=c.next()).done;)d.push(e.call(f,h.value));else{h=c.length;for(var k=0;k<h;k++)d.push(e.call(f,c[k]))}return d}});
ia("Array.prototype.find",function(c){return c?c:function(c,e){a:{var d=this;d instanceof String&&(d=String(d));for(var g=d.length,h=0;h<g;h++){var k=d[h];if(c.call(e,k,h,d)){d=k;break a}}d=void 0}return d}});ia("Object.is",function(c){return c?c:function(c,e){return c===e?0!==c||1/c===1/e:c!==c&&e!==e}});
ia("Array.prototype.includes",function(c){return c?c:function(c,e){var d=this;d instanceof String&&(d=String(d));var g=d.length,h=e||0;for(0>h&&(h=Math.max(h+g,0));h<g;h++){var k=d[h];if(k===c||Object.is(k,c))return!0}return!1}});
ia("String.prototype.includes",function(c){return c?c:function(c,e){if(null==this)throw new TypeError("The 'this' value for String.prototype.includes must not be null or undefined");if(c instanceof RegExp)throw new TypeError("First argument to String.prototype.includes must not be a regular expression");return-1!==this.indexOf(c,e||0)}});
ia("Set",function(c){function d(c){this.a=new Map;if(c){c=q(c);for(var d;!(d=c.next()).done;)this.add(d.value)}this.size=this.a.size}if(function(){if(!c||"function"!=typeof c||!c.prototype.entries||"function"!=typeof Object.seal)return!1;try{var d=Object.seal({x:4}),f=new c(q([d]));if(!f.has(d)||1!=f.size||f.add(d)!=f||1!=f.size||f.add({x:4})!=f||2!=f.size)return!1;var g=f.entries(),h=g.next();if(h.done||h.value[0]!=d||h.value[1]!=d)return!1;h=g.next();return h.done||h.value[0]==d||4!=h.value[0].x||
h.value[1]!=h.value[0]?!1:g.next().done}catch(k){return!1}}())return c;ca();ea();d.prototype.add=function(c){this.a.set(c,c);this.size=this.a.size;return this};d.prototype["delete"]=function(c){c=this.a["delete"](c);this.size=this.a.size;return c};d.prototype.clear=function(){this.a.clear();this.size=0};d.prototype.has=function(c){return this.a.has(c)};d.prototype.entries=function(){return this.a.entries()};d.prototype.values=function(){return this.a.values()};d.prototype.keys=d.prototype.values;
d.prototype[Symbol.iterator]=d.prototype.values;d.prototype.forEach=function(c,d){var e=this;this.a.forEach(function(f){return c.call(d,f,f,e)})};return d});ia("Object.values",function(c){return c?c:function(c){var d=[],f;for(f in c)za(c,f)&&d.push(c[f]);return d}});var Aa=this;Aa.a=!0;function A(c,d){var e=c.split("."),f=Aa;e[0]in f||!f.execScript||f.execScript("var "+e[0]);for(var g;e.length&&(g=e.shift());)e.length||void 0===d?f[g]?f=f[g]:f=f[g]={}:f[g]=d}
function Ba(c,d){function e(){}e.prototype=d.prototype;c.jf=d.prototype;c.prototype=new e;c.prototype.constructor=c;c.gf=function(c,e,h){return d.prototype[e].apply(c,Array.prototype.slice.call(arguments,2))}};/*

 Copyright 2016 Google Inc.

 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at

     http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.
*/
function Ca(c){this.c=Math.exp(Math.log(.5)/c);this.b=this.a=0}function Da(c,d,e){var f=Math.pow(c.c,d);e=e*(1-f)+f*c.a;isNaN(e)||(c.a=e,c.b+=d)}function Ea(c){return c.a/(1-Math.pow(c.c,c.b))};function Fa(){this.b=new Ca(2);this.c=new Ca(5);this.a=0}Fa.prototype.getBandwidthEstimate=function(c){return 128E3>this.a?c:Math.min(Ea(this.b),Ea(this.c))};function Ga(){}function Ha(){}window.console&&window.console.log.bind&&(Ga=console.warn.bind(console));var Ia=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^/?#]*)@)?([^/#?]*?)(?::([0-9]+))?(?=[/#?]|$))?([^?#]+)?(?:\?([^#]*))?(?:#(.*))?$/;function Ja(c){var d;c instanceof Ja?(Ka(this,c.ka),this.Fa=c.Fa,this.na=c.na,La(this,c.Qa),this.aa=c.aa,Ma(this,Na(c.a)),this.za=c.za):c&&(d=String(c).match(Ia))?(Ka(this,d[1]||"",!0),this.Fa=Oa(d[2]||""),this.na=Oa(d[3]||"",!0),La(this,d[4]),this.aa=Oa(d[5]||"",!0),Ma(this,d[6]||"",!0),this.za=Oa(d[7]||"")):this.a=new Pa(null)}p=Ja.prototype;p.ka="";p.Fa="";p.na="";p.Qa=null;p.aa="";p.za="";
p.toString=function(){var c=[],d=this.ka;d&&c.push(Qa(d,Ra,!0),":");if(d=this.na){c.push("//");var e=this.Fa;e&&c.push(Qa(e,Ra,!0),"@");c.push(encodeURIComponent(d).replace(/%25([0-9a-fA-F]{2})/g,"%$1"));d=this.Qa;null!=d&&c.push(":",String(d))}if(d=this.aa)this.na&&"/"!=d.charAt(0)&&c.push("/"),c.push(Qa(d,"/"==d.charAt(0)?Sa:Ta,!0));(d=this.a.toString())&&c.push("?",d);(d=this.za)&&c.push("#",Qa(d,Ua));return c.join("")};
p.resolve=function(c){var d=new Ja(this);"data"===d.ka&&(d=new Ja);var e=!!c.ka;e?Ka(d,c.ka):e=!!c.Fa;e?d.Fa=c.Fa:e=!!c.na;e?d.na=c.na:e=null!=c.Qa;var f=c.aa;if(e)La(d,c.Qa);else if(e=!!c.aa){if("/"!=f.charAt(0))if(this.na&&!this.aa)f="/"+f;else{var g=d.aa.lastIndexOf("/");-1!=g&&(f=d.aa.substr(0,g+1)+f)}if(".."==f||"."==f)f="";else if(-1!=f.indexOf("./")||-1!=f.indexOf("/.")){g=0==f.lastIndexOf("/",0);f=f.split("/");for(var h=[],k=0;k<f.length;){var l=f[k++];"."==l?g&&k==f.length&&h.push(""):".."==
l?((1<h.length||1==h.length&&""!=h[0])&&h.pop(),g&&k==f.length&&h.push("")):(h.push(l),g=!0)}f=h.join("/")}}e?d.aa=f:e=""!==c.a.toString();e?Ma(d,Na(c.a)):e=!!c.za;e&&(d.za=c.za);return d};function Ka(c,d,e){c.ka=e?Oa(d,!0):d;c.ka&&(c.ka=c.ka.replace(/:$/,""))}function La(c,d){if(d){d=Number(d);if(isNaN(d)||0>d)throw Error("Bad port number "+d);c.Qa=d}else c.Qa=null}function Ma(c,d,e){d instanceof Pa?c.a=d:(e||(d=Qa(d,Va)),c.a=new Pa(d))}
function Oa(c,d){return c?d?decodeURI(c):decodeURIComponent(c):""}function Qa(c,d,e){return"string"==typeof c?(c=encodeURI(c).replace(d,Wa),e&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function Wa(c){c=c.charCodeAt(0);return"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var Ra=/[#\/\?@]/g,Ta=/[#\?:]/g,Sa=/[#\?]/g,Va=/[#\?@]/g,Ua=/#/g;function Pa(c){this.b=c||null}Pa.prototype.a=null;Pa.prototype.c=null;
Pa.prototype.add=function(c,d){if(!this.a&&(this.a={},this.c=0,this.b))for(var e=this.b.split("&"),f=0;f<e.length;f++){var g=e[f].indexOf("="),h=null;if(0<=g){var k=e[f].substring(0,g);h=e[f].substring(g+1)}else k=e[f];k=decodeURIComponent(k.replace(/\+/g," "));h=h||"";this.add(k,decodeURIComponent(h.replace(/\+/g," ")))}this.b=null;(e=this.a.hasOwnProperty(c)&&this.a[c])||(this.a[c]=e=[]);e.push(d);this.c++;return this};
Pa.prototype.toString=function(){if(this.b)return this.b;if(!this.a)return"";var c=[],d;for(d in this.a)for(var e=encodeURIComponent(d),f=this.a[d],g=0;g<f.length;g++){var h=e;""!==f[g]&&(h+="="+encodeURIComponent(f[g]));c.push(h)}return this.b=c.join("&")};function Na(c){var d=new Pa;d.b=c.b;if(c.a){var e={},f;for(f in c.a)e[f]=c.a[f].concat();d.a=e;d.c=c.c}return d};function B(){var c,d,e=new Promise(function(e,g){c=e;d=g});e.resolve=c;e.reject=d;return e}B.prototype.resolve=function(){};B.prototype.reject=function(){};function Xa(c,d){var e=Ya();this.i=null==c.maxAttempts?e.maxAttempts:c.maxAttempts;this.f=null==c.baseDelay?e.baseDelay:c.baseDelay;this.h=null==c.fuzzFactor?e.fuzzFactor:c.fuzzFactor;this.g=null==c.backoffFactor?e.backoffFactor:c.backoffFactor;this.a=0;this.b=this.f;if(this.c=d||!1)this.a=1}function Za(c){if(c.a>=c.i)if(c.c)c.a=1,c.b=c.f;else return Promise.reject();var d=new B;c.a?(window.setTimeout(d.resolve,c.b*(1+(2*Math.random()-1)*c.h)),c.b*=c.g):d.resolve();c.a++;return d}
function Ya(){return{maxAttempts:2,baseDelay:1E3,backoffFactor:2,fuzzFactor:.5,timeout:0}};function C(c,d,e,f){this.severity=c;this.category=d;this.code=e;this.data=Array.prototype.slice.call(arguments,3);this.handled=!1}A("shaka.util.Error",C);C.prototype.toString=function(){return"shaka.util.Error "+JSON.stringify(this,null,"  ")};C.Severity={RECOVERABLE:1,CRITICAL:2};C.Category={NETWORK:1,TEXT:2,MEDIA:3,MANIFEST:4,STREAMING:5,DRM:6,PLAYER:7,CAST:8,STORAGE:9};
C.Code={UNSUPPORTED_SCHEME:1E3,BAD_HTTP_STATUS:1001,HTTP_ERROR:1002,TIMEOUT:1003,MALFORMED_DATA_URI:1004,UNKNOWN_DATA_URI_ENCODING:1005,REQUEST_FILTER_ERROR:1006,RESPONSE_FILTER_ERROR:1007,MALFORMED_TEST_URI:1008,UNEXPECTED_TEST_REQUEST:1009,INVALID_TEXT_HEADER:2E3,INVALID_TEXT_CUE:2001,UNABLE_TO_DETECT_ENCODING:2003,BAD_ENCODING:2004,INVALID_XML:2005,INVALID_MP4_TTML:2007,INVALID_MP4_VTT:2008,UNABLE_TO_EXTRACT_CUE_START_TIME:2009,BUFFER_READ_OUT_OF_BOUNDS:3E3,JS_INTEGER_OVERFLOW:3001,EBML_OVERFLOW:3002,
EBML_BAD_FLOATING_POINT_SIZE:3003,MP4_SIDX_WRONG_BOX_TYPE:3004,MP4_SIDX_INVALID_TIMESCALE:3005,MP4_SIDX_TYPE_NOT_SUPPORTED:3006,WEBM_CUES_ELEMENT_MISSING:3007,WEBM_EBML_HEADER_ELEMENT_MISSING:3008,WEBM_SEGMENT_ELEMENT_MISSING:3009,WEBM_INFO_ELEMENT_MISSING:3010,WEBM_DURATION_ELEMENT_MISSING:3011,WEBM_CUE_TRACK_POSITIONS_ELEMENT_MISSING:3012,WEBM_CUE_TIME_ELEMENT_MISSING:3013,MEDIA_SOURCE_OPERATION_FAILED:3014,MEDIA_SOURCE_OPERATION_THREW:3015,VIDEO_ERROR:3016,QUOTA_EXCEEDED_ERROR:3017,TRANSMUXING_FAILED:3018,
UNABLE_TO_GUESS_MANIFEST_TYPE:4E3,DASH_INVALID_XML:4001,DASH_NO_SEGMENT_INFO:4002,DASH_EMPTY_ADAPTATION_SET:4003,DASH_EMPTY_PERIOD:4004,DASH_WEBM_MISSING_INIT:4005,DASH_UNSUPPORTED_CONTAINER:4006,DASH_PSSH_BAD_ENCODING:4007,DASH_NO_COMMON_KEY_SYSTEM:4008,DASH_MULTIPLE_KEY_IDS_NOT_SUPPORTED:4009,DASH_CONFLICTING_KEY_IDS:4010,UNPLAYABLE_PERIOD:4011,RESTRICTIONS_CANNOT_BE_MET:4012,NO_PERIODS:4014,HLS_PLAYLIST_HEADER_MISSING:4015,INVALID_HLS_TAG:4016,HLS_INVALID_PLAYLIST_HIERARCHY:4017,DASH_DUPLICATE_REPRESENTATION_ID:4018,
HLS_MULTIPLE_MEDIA_INIT_SECTIONS_FOUND:4020,HLS_COULD_NOT_GUESS_MIME_TYPE:4021,HLS_MASTER_PLAYLIST_NOT_PROVIDED:4022,HLS_REQUIRED_ATTRIBUTE_MISSING:4023,HLS_REQUIRED_TAG_MISSING:4024,HLS_COULD_NOT_GUESS_CODECS:4025,HLS_KEYFORMATS_NOT_SUPPORTED:4026,DASH_UNSUPPORTED_XLINK_ACTUATE:4027,DASH_XLINK_DEPTH_LIMIT:4028,HLS_COULD_NOT_PARSE_SEGMENT_START_TIME:4030,CONTENT_UNSUPPORTED_BY_BROWSER:4032,CANNOT_ADD_EXTERNAL_TEXT_TO_LIVE_STREAM:4033,INVALID_STREAMS_CHOSEN:5005,NO_RECOGNIZED_KEY_SYSTEMS:6E3,REQUESTED_KEY_SYSTEM_CONFIG_UNAVAILABLE:6001,
FAILED_TO_CREATE_CDM:6002,FAILED_TO_ATTACH_TO_VIDEO:6003,INVALID_SERVER_CERTIFICATE:6004,FAILED_TO_CREATE_SESSION:6005,FAILED_TO_GENERATE_LICENSE_REQUEST:6006,LICENSE_REQUEST_FAILED:6007,LICENSE_RESPONSE_REJECTED:6008,ENCRYPTED_CONTENT_WITHOUT_DRM_INFO:6010,NO_LICENSE_SERVER_GIVEN:6012,OFFLINE_SESSION_REMOVED:6013,EXPIRED:6014,LOAD_INTERRUPTED:7E3,OPERATION_ABORTED:7001,NO_VIDEO_ELEMENT:7002,CAST_API_UNAVAILABLE:8E3,NO_CAST_RECEIVERS:8001,ALREADY_CASTING:8002,UNEXPECTED_CAST_ERROR:8003,CAST_CANCELED_BY_USER:8004,
CAST_CONNECTION_TIMED_OUT:8005,CAST_RECEIVER_APP_UNAVAILABLE:8006,STORAGE_NOT_SUPPORTED:9E3,INDEXED_DB_ERROR:9001,DEPRECATED_OPERATION_ABORTED:9002,REQUESTED_ITEM_NOT_FOUND:9003,MALFORMED_OFFLINE_URI:9004,CANNOT_STORE_LIVE_OFFLINE:9005,STORE_ALREADY_IN_PROGRESS:9006,NO_INIT_DATA_FOR_OFFLINE:9007,LOCAL_PLAYER_INSTANCE_REQUIRED:9008,NEW_KEY_OPERATION_NOT_SUPPORTED:9011,KEY_NOT_FOUND:9012,MISSING_STORAGE_CELL:9013};function D(c,d){this.promise=c;this.b=d;this.a=!1}A("shaka.util.AbortableOperation",D);function $a(c){return new D(Promise.reject(c),function(){return Promise.resolve()})}D.failed=$a;function ab(){var c=Promise.reject(new C(2,7,7001));c["catch"](function(){});return new D(c,function(){return Promise.resolve()})}D.aborted=ab;function bb(c){return new D(Promise.resolve(c),function(){return Promise.resolve()})}D.completed=bb;
function cb(c){return new D(c,function(){return c["catch"](function(){})})}D.notAbortable=cb;D.prototype.abort=function(){this.a=!0;return this.b()};D.prototype.abort=D.prototype.abort;function db(c){return new D(Promise.all(c.map(function(c){return c.promise})),function(){return Promise.all(c.map(function(c){return c.abort()}))})}D.all=db;D.prototype["finally"]=function(c){this.promise.then(function(){return c(!0)},function(){return c(!1)});return this};D.prototype["finally"]=D.prototype["finally"];
D.prototype.Y=function(c,d){function e(){g.reject(new C(2,7,7001));return f.abort()}var f=this,g=new B;this.promise.then(function(d){f.a?g.reject(new C(2,7,7001)):c?e=eb(c,d,g):g.resolve(d)},function(c){d?e=eb(d,c,g):g.reject(c)});return new D(g,function(){return e()})};D.prototype.chain=D.prototype.Y;
function eb(c,d,e){try{var f=c(d);if(f&&f.promise&&f.abort)return e.resolve(f.promise),function(){return f.abort()};e.resolve(f);return function(){return Promise.resolve(f).then(function(){})["catch"](function(){})}}catch(g){return e.reject(g),function(){return Promise.resolve()}}};function fb(c,d){return"number"===typeof c&&"number"===typeof d&&isNaN(c)&&isNaN(d)?!0:c===d}function gb(c,d){d||(d=fb);for(var e=[],f=q(c),g=f.next();!g.done;g=f.next())g=g.value,-1==hb(e,g,d)&&e.push(g);return e}function hb(c,d,e){for(var f=0;f<c.length;++f)if(e(c[f],d))return f;return-1}function ib(c,d){var e=c.indexOf(d);-1<e&&c.splice(e,1)}function jb(c,d){var e=0;c.forEach(function(c){e+=d(c)?1:0});return e};function kb(c,d,e,f,g){var h=g in f,k=!0,l;for(l in d){var m=g+"."+l,n=h?f[g]:e[l];h||l in c?void 0===d[l]?void 0===n||h?delete c[l]:c[l]=lb(n):n.constructor==Object&&d[l]&&d[l].constructor==Object?(c[l]||(c[l]=lb(n)),m=kb(c[l],d[l],n,f,m),k=k&&m):typeof d[l]!=typeof n||null==d[l]||d[l].constructor!=n.constructor?k=!1:c[l]=d[l]:k=!1}return k}
function lb(c){function d(c){switch(typeof c){case "undefined":case "boolean":case "number":case "string":case "symbol":case "function":return c;default:if(!c||c.buffer&&c.buffer.constructor==ArrayBuffer)return c;if(0<=e.indexOf(c))return null;var f=c.constructor==Array;if(c.constructor!=Object&&!f)return null;e.push(c);var h=f?[]:{},k;for(k in c)h[k]=d(c[k]);f&&(h.length=c.length);return h}}var e=[];return d(c)};function mb(c,d){function e(){return Promise.all(c.map(function(c){return c.destroy()}))}return Promise.resolve(d()).then(function(c){return e().then(function(){return c})},function(c){return e().then(function(){throw c;})})};function nb(){this.a=[]}function ob(c,d){c.a.push(d["finally"](function(){ib(c.a,d)}))}nb.prototype.destroy=function(){var c=[];this.a.forEach(function(d){d.promise["catch"](function(){});c.push(d.abort())});this.a=[];return Promise.all(c)};function E(c){this.c=!1;this.g=new nb;this.a=[];this.b=[];this.f=c||null}A("shaka.net.NetworkingEngine",E);E.RequestType={MANIFEST:0,SEGMENT:1,LICENSE:2,APP:3};E.PluginPriority={FALLBACK:1,PREFERRED:2,APPLICATION:3};var pb={};function qb(c,d,e){e=e||3;var f=pb[c];if(!f||e>=f.priority)pb[c]={priority:e,ne:d}}E.registerScheme=qb;E.unregisterScheme=function(c){delete pb[c]};E.prototype.qe=function(c){this.a.push(c)};E.prototype.registerRequestFilter=E.prototype.qe;
E.prototype.Ve=function(c){ib(this.a,c)};E.prototype.unregisterRequestFilter=E.prototype.Ve;E.prototype.jd=function(){this.a=[]};E.prototype.clearAllRequestFilters=E.prototype.jd;E.prototype.re=function(c){this.b.push(c)};E.prototype.registerResponseFilter=E.prototype.re;E.prototype.We=function(c){ib(this.b,c)};E.prototype.unregisterResponseFilter=E.prototype.We;E.prototype.kd=function(){this.b=[]};E.prototype.clearAllResponseFilters=E.prototype.kd;
function rb(c,d){return{uris:c,method:"GET",body:null,headers:{},allowCrossSiteCredentials:!1,retryParameters:d}}E.prototype.destroy=function(){this.c=!0;this.a=[];this.b=[];return this.g.destroy()};E.prototype.destroy=E.prototype.destroy;
function sb(c){c.then=function(d,e){Ga("The network request interface has changed!  Please update your application to the new interface, which allows operations to be aborted.  Support for the old API will be removed in v2.5.");return c.promise.then(d,e)};c["catch"]=function(d){Ga("The network request interface has changed!  Please update your application to the new interface, which allows operations to be aborted.  Support for the old API will be removed in v2.5.");return c.promise["catch"](d)};
return c}
E.prototype.request=function(c,d){var e=this;if(this.c)return sb(ab());d.method=d.method||"GET";d.headers=d.headers||{};d.retryParameters=d.retryParameters?lb(d.retryParameters):Ya();d.uris=lb(d.uris);var f=tb(this,c,d),g=f.Y(function(){return ub(e,c,d,new Xa(d.retryParameters,!1),0,null)}),h=g.Y(function(d){return vb(e,c,d)}),k=Date.now(),l=0;f.promise.then(function(){l=Date.now()-k},function(){});var m=0;g.promise.then(function(){m=Date.now()},function(){});f=h.Y(function(d){var f=Date.now()-m;
d.timeMs+=l;d.timeMs+=f;e.f&&!d.fromCache&&1==c&&e.f(d.timeMs,d.data.byteLength);return d},function(c){c&&(c.severity=2);throw c;});ob(this.g,f);return sb(f)};E.prototype.request=E.prototype.request;function tb(c,d,e){var f=bb(void 0);c.a.forEach(function(c){f=f.Y(function(){return c(d,e)})});return f.Y(void 0,function(c){if(c&&7001==c.code)throw c;throw new C(2,1,1006,c);})}
function ub(c,d,e,f,g,h){var k=new Ja(e.uris[g]),l=k.ka;l||(l=location.protocol,l=l.slice(0,-1),Ka(k,l),e.uris[g]=k.toString());var m=(l=pb[l])?l.ne:null;if(!m)return $a(new C(2,1,1E3,k));var n;return cb(Za(f)).Y(function(){if(c.c)return ab();n=Date.now();var f=m(e.uris[g],e,d);void 0==f.promise&&(Ga("The scheme plugin interface has changed!  Please update your scheme plugins to the new interface to add support for abort().  Support for the old plugin interface will be removed in v2.5."),f=cb(f));
return f}).Y(function(c){void 0==c.timeMs&&(c.timeMs=Date.now()-n);return c},function(k){if(k&&7001==k.code)throw k;if(c.c)return ab();if(k&&1==k.severity)return g=(g+1)%e.uris.length,ub(c,d,e,f,g,k);throw k||h;})}function vb(c,d,e){var f=bb(void 0);c.b.forEach(function(c){f=f.Y(function(){return c(d,e)})});return f.Y(function(){return e},function(c){if(c&&7001==c.code)throw c;var d=2;c instanceof C&&(d=c.severity);throw new C(d,1,1007,c);})};function wb(){this.a={}}wb.prototype.push=function(c,d){this.a.hasOwnProperty(c)?this.a[c].push(d):this.a[c]=[d]};wb.prototype.get=function(c){return(c=this.a[c])?c.slice():null};wb.prototype.remove=function(c,d){var e=this.a[c];if(e)for(var f=0;f<e.length;++f)e[f]==d&&(e.splice(f,1),--f)};function xb(){this.a=new wb}xb.prototype.destroy=function(){yb(this);this.a=null;return Promise.resolve()};function F(c,d,e,f){c.a&&(d=new zb(d,e,f),c.a.push(e,d))}function Ab(c,d,e,f){F(c,d,e,function(c){this.ra(d,e);f(c)}.bind(c))}xb.prototype.ra=function(c,d){if(this.a)for(var e=this.a.get(d)||[],f=0;f<e.length;++f){var g=e[f];g.target==c&&(g.ra(),this.a.remove(d,g))}};function yb(c){if(c.a){var d=c.a,e=[],f;for(f in d.a)e.push.apply(e,d.a[f]);for(d=0;d<e.length;++d)e[d].ra();c.a.a={}}}
function zb(c,d,e){this.target=c;this.type=d;this.a=e;this.target.addEventListener(d,e,!1)}zb.prototype.ra=function(){this.target.removeEventListener(this.type,this.a,!1);this.a=this.target=null};function G(c,d){var e=d||{},f;for(f in e)this[f]=e[f];this.defaultPrevented=this.cancelable=this.bubbles=!1;this.timeStamp=window.performance&&window.performance.now?window.performance.now():Date.now();this.type=c;this.isTrusted=!1;this.target=this.currentTarget=null;this.a=!1}G.prototype.preventDefault=function(){this.cancelable&&(this.defaultPrevented=!0)};G.prototype.stopImmediatePropagation=function(){this.a=!0};G.prototype.stopPropagation=function(){};function Bb(c,d){return c.reduce(function(c,d,g){return d["catch"](c.bind(null,g))}.bind(null,d),Promise.reject())}function Cb(c,d){return c.concat(d)}function Db(){}function Eb(c){return null!=c}function Fb(c,d,e){return e.indexOf(c)==d};function H(c,d){if(0==d.length)return c;var e=d.map(function(c){return new Ja(c)});return c.map(function(c){return new Ja(c)}).map(function(c){return e.map(c.resolve.bind(c))}).reduce(Cb,[]).map(function(c){return c.toString()})}function Gb(c,d){return{keySystem:c,licenseServerUri:"",distinctiveIdentifierRequired:!1,persistentStateRequired:!1,audioRobustness:"",videoRobustness:"",serverCertificate:null,initData:d||[],keyIds:[]}}var Hb=1/15;var I={empty:function(c){return!c||0==Object.keys(c).length},values:function(c){return Object.keys(c).map(function(d){return c[d]})},map:function(c,d){return Object.keys(c).reduce(function(e,f){e[f]=d(c[f],f);return e},{})},every:function(c,d){return Object.keys(c).every(function(e){return d(e,c[e])})},forEach:function(c,d){Object.keys(c).forEach(function(e){d(e,c[e])})},ef:function(c){var d=new Map;Object.keys(c).forEach(function(e){d.set(e,c[e])});return d},ff:function(c){var d={};c.forEach(function(c,
f){d[f]=c});return d}};function Ib(c,d){var e=c;d&&(e+='; codecs="'+d+'"');return e}function Jb(c){var d=[c.mimeType];Kb.forEach(function(e,f){var g=c[f];g&&d.push(e+'="'+g+'"')});return d.join(";")}var Kb=(new Map).set("codecs","codecs").set("frameRate","framerate").set("bandwidth","bitrate").set("width","width").set("height","height").set("channelsCount","channels");function Lb(c){if(!c)return"";c=new Uint8Array(c);239==c[0]&&187==c[1]&&191==c[2]&&(c=c.subarray(3));c=escape(Mb(c));try{return decodeURIComponent(c)}catch(d){throw new C(2,2,2004);}}A("shaka.util.StringUtils.fromUTF8",Lb);
function Nb(c,d,e){if(!c)return"";if(!e&&0!=c.byteLength%2)throw new C(2,2,2004);if(c instanceof ArrayBuffer)var f=c;else e=new Uint8Array(c.byteLength),e.set(new Uint8Array(c)),f=e.buffer;c=Math.floor(c.byteLength/2);e=new Uint16Array(c);f=new DataView(f);for(var g=0;g<c;g++)e[g]=f.getUint16(2*g,d);return Mb(e)}A("shaka.util.StringUtils.fromUTF16",Nb);
function Ob(c){var d=new Uint8Array(c);if(239==d[0]&&187==d[1]&&191==d[2])return Lb(d);if(254==d[0]&&255==d[1])return Nb(d.subarray(2),!1);if(255==d[0]&&254==d[1])return Nb(d.subarray(2),!0);var e=function(c,d){return c.byteLength<=d||32<=c[d]&&126>=c[d]}.bind(null,d);if(0==d[0]&&0==d[2])return Nb(c,!1);if(0==d[1]&&0==d[3])return Nb(c,!0);if(e(0)&&e(1)&&e(2)&&e(3))return Lb(c);throw new C(2,2,2003);}A("shaka.util.StringUtils.fromBytesAutoDetect",Ob);
function Pb(c){c=encodeURIComponent(c);c=unescape(c);for(var d=new Uint8Array(c.length),e=0;e<c.length;++e)d[e]=c.charCodeAt(e);return d.buffer}A("shaka.util.StringUtils.toUTF8",Pb);function Mb(c){for(var d="",e=0;e<c.length;e+=16E3)d+=String.fromCharCode.apply(null,c.subarray(e,e+16E3));return d};function Qb(c){this.a=null;this.b=function(){this.a=null;c()}.bind(this)}Qb.prototype.cancel=function(){null!=this.a&&(clearTimeout(this.a),this.a=null)};function Sb(c){var d=Tb;c.cancel();c.a=setTimeout(c.b,1E3*d)}function Ub(c,d){c.cancel();var e=function(){this.b();this.a=setTimeout(e,1E3*d)}.bind(c);c.a=setTimeout(e,1E3*d)};function Vb(c,d){var e=void 0==d?!0:d,f=window.btoa(Mb(c)).replace(/\+/g,"-").replace(/\//g,"_");return e?f:f.replace(/=*$/,"")}A("shaka.util.Uint8ArrayUtils.toBase64",Vb);function Wb(c){c=window.atob(c.replace(/-/g,"+").replace(/_/g,"/"));for(var d=new Uint8Array(c.length),e=0;e<c.length;++e)d[e]=c.charCodeAt(e);return d}A("shaka.util.Uint8ArrayUtils.fromBase64",Wb);function Xb(c){for(var d=new Uint8Array(c.length/2),e=0;e<c.length;e+=2)d[e/2]=window.parseInt(c.substr(e,2),16);return d}
A("shaka.util.Uint8ArrayUtils.fromHex",Xb);function Yb(c){for(var d="",e=0;e<c.length;++e){var f=c[e].toString(16);1==f.length&&(f="0"+f);d+=f}return d}A("shaka.util.Uint8ArrayUtils.toHex",Yb);function Zb(c,d){if(!c&&!d)return!0;if(!c||!d||c.length!=d.length)return!1;for(var e=0;e<c.length;++e)if(c[e]!=d[e])return!1;return!0}A("shaka.util.Uint8ArrayUtils.equal",Zb);
function $b(c){for(var d=0,e=0;e<arguments.length;++e)d+=arguments[e].length;d=new Uint8Array(d);for(var f=e=0;f<arguments.length;++f)d.set(arguments[f],e),e+=arguments[f].length;return d}A("shaka.util.Uint8ArrayUtils.concat",$b);function ac(c){this.s=c;this.l=this.j=this.w=null;this.H=!1;this.b=null;this.h=new xb;this.a=[];this.o=[];this.i=new B;this.f=null;this.g=function(d){this.i.reject(d);c.onError(d)}.bind(this);this.N={};this.m={};this.W=new Qb(this.pe.bind(this));this.c=!1;this.ga=new B;this.ia=!1;this.A=[];this.ha=!1;this.L=new Qb(this.oe.bind(this));Ub(this.L,1);this.i["catch"](function(){})}p=ac.prototype;
p.destroy=function(){var c=this;return r(function e(){return x(e,function(e){switch(e.u){case 1:if(c.c)return w(e,c.ga,0);c.c=!0;return w(e,bc(c),4);case 4:c.ga.resolve(),e.O(0)}})})};
function bc(c){return r(function e(){var f;return x(e,function(e){switch(e.u){case 1:return w(e,c.h.destroy(),2);case 2:return c.h=null,c.i.reject(),c.L.cancel(),c.L=null,c.W.cancel(),c.W=null,f=c.a,c.a=[],w(e,Promise.all(f.map(function(c){return Promise.resolve().then(function(){return r(function l(){return x(l,function(e){switch(e.u){case 1:return na(e,2),w(e,cc(c.la),4);case 4:pa(e,0);break;case 2:ra(e),e.u=0}})})})})),3);case 3:if(!c.l){e.O(4);break}na(e,5);return w(e,c.l.setMediaKeys(null),7);
case 7:pa(e,6);break;case 5:ra(e);case 6:c.l=null;case 4:c.b=null,c.w=null,c.j=null,c.o=[],c.f=null,c.g=null,c.s=null,e.u=0}})})}p.configure=function(c){this.f=c};p.init=function(c,d){var e={},f=[],g=c.periods.some(function(c){return c.variants.some(function(c){return c.drmInfos.length})});this.ia=d;this.o=c.offlineSessionIds;dc(this,c,d||0<c.offlineSessionIds.length,e,f);return f.length?ec(this,e,f,g):(this.H=!0,Promise.resolve())};
p.rb=function(c){var d=this;if(!this.j)return Ab(this.h,c,"encrypted",function(){this.g(new C(2,6,6010))}.bind(this)),Promise.resolve();this.l=c;Ab(this.h,this.l,"play",this.Ud.bind(this));c=this.l.setMediaKeys(this.j);c=c["catch"](function(c){return Promise.reject(new C(2,6,6003,c.message))});var e=null;this.b.serverCertificate&&this.b.serverCertificate.length&&(e=this.j.setServerCertificate(this.b.serverCertificate).then(function(){})["catch"](function(c){return Promise.reject(new C(2,6,6004,c.message))}));
return Promise.all([c,e]).then(function(){if(d.c)return Promise.reject();fc(d);d.b.initData.length||d.o.length||F(d.h,d.l,"encrypted",function(c){return gc(d,c.initDataType,new Uint8Array(c.initData))})})["catch"](function(c){if(!d.c)return Promise.reject(c)})};function hc(c,d){return Promise.all(d.map(function(c){return ic(this,c).then(function(c){if(c){for(var d=new B,e=0;e<this.a.length;e++)if(this.a[e].la==c){this.a[e].sa=d;break}return Promise.all([c.remove(),d])}}.bind(this))}.bind(c)))}
function fc(c){var d=c.b?c.b.initData:[];d.forEach(function(c){jc(this,c.initDataType,c.initData)}.bind(c));c.o.forEach(function(c){ic(this,c)}.bind(c));d.length||c.o.length||c.i.resolve();return c.i}function gc(c,d,e){for(var f=q(c.a),g=f.next();!g.done;g=f.next())if(Zb(e,g.value.initData))return;jc(c,d,e)}p.keySystem=function(){return this.b?this.b.keySystem:""};function kc(c){return c.a.map(function(c){return c.la.sessionId})}
p.vb=function(){var c=this.a.map(function(c){c=c.la.expiration;return isNaN(c)?Infinity:c});return Math.min.apply(Math,c)};
function dc(c,d,e,f,g){var h=lc(c),k=mc(c,d);d.periods.forEach(function(c){c.variants.forEach(function(c){h&&(c.drmInfos=[h]);k&&(c.drmInfos=k);c.drmInfos.forEach(function(d){nc(this,d);window.cast&&window.cast.__platform__&&"com.microsoft.playready"==d.keySystem&&(d.keySystem="com.chromecast.playready");var h=f[d.keySystem];h||(h={audioCapabilities:[],videoCapabilities:[],distinctiveIdentifier:"optional",persistentState:e?"required":"optional",sessionTypes:[e?"persistent-license":"temporary"],label:d.keySystem,
drmInfos:[]},f[d.keySystem]=h,g.push(d.keySystem));h.drmInfos.push(d);d.distinctiveIdentifierRequired&&(h.distinctiveIdentifier="required");d.persistentStateRequired&&(h.persistentState="required");var k=[];c.video&&k.push(c.video);c.audio&&k.push(c.audio);k.forEach(function(c){("video"==c.type?h.videoCapabilities:h.audioCapabilities).push({robustness:("video"==c.type?d.videoRobustness:d.audioRobustness)||"",contentType:Ib(c.mimeType,c.codecs)})}.bind(this))}.bind(this))}.bind(this))}.bind(c))}
function ec(c,d,e,f){if(1==e.length&&""==e[0])return Promise.reject(new C(2,6,6E3));var g=new B,h=g;[!0,!1].forEach(function(c){e.forEach(function(e){var f=d[e];f.drmInfos.some(function(c){return!!c.licenseServerUri})==c&&(0==f.audioCapabilities.length&&delete f.audioCapabilities,0==f.videoCapabilities.length&&delete f.videoCapabilities,h=h["catch"](function(){if(!this.c)return navigator.requestMediaKeySystemAccess(e,[f])}.bind(this)))}.bind(this))}.bind(c));h=h["catch"](function(){return Promise.reject(new C(2,
6,6001))});h=h.then(function(c){if(this.c)return Promise.reject();var e=0<=navigator.userAgent.indexOf("Edge/"),f=c.getConfiguration();this.w=(f.audioCapabilities||[]).concat(f.videoCapabilities||[]).map(function(c){return c.contentType});e&&(this.w=null);e=d[c.keySystem];oc(this,c.keySystem,e,e.drmInfos);return this.b.licenseServerUri?c.createMediaKeys():Promise.reject(new C(2,6,6012))}.bind(c)).then(function(c){if(this.c)return Promise.reject();this.j=c;this.H=!0}.bind(c))["catch"](function(c){if(!this.c)return this.w=
this.b=null,c instanceof C?Promise.reject(c):Promise.reject(new C(2,6,6002,c.message))}.bind(c));f||(h=h["catch"](function(){}));g.reject();return h}
function nc(c,d){var e=d.keySystem;if(e){if(!d.licenseServerUri){var f=c.f.servers[e];f&&(d.licenseServerUri=f)}d.keyIds||(d.keyIds=[]);if(e=c.f.advanced[e])d.distinctiveIdentifierRequired||(d.distinctiveIdentifierRequired=e.distinctiveIdentifierRequired),d.persistentStateRequired||(d.persistentStateRequired=e.persistentStateRequired),d.videoRobustness||(d.videoRobustness=e.videoRobustness),d.audioRobustness||(d.audioRobustness=e.audioRobustness),d.serverCertificate||(d.serverCertificate=e.serverCertificate)}}
function lc(c){if(I.empty(c.f.clearKeys))return null;var d=[],e=[],f;for(f in c.f.clearKeys){var g=c.f.clearKeys[f],h=Xb(f);g=Xb(g);h={kty:"oct",kid:Vb(h,!1),k:Vb(g,!1)};d.push(h);e.push(h.kid)}c=JSON.stringify({keys:d});e=JSON.stringify({kids:e});e=[{initData:new Uint8Array(Pb(e)),initDataType:"keyids"}];return{keySystem:"org.w3.clearkey",licenseServerUri:"data:application/json;base64,"+window.btoa(c),distinctiveIdentifierRequired:!1,persistentStateRequired:!1,audioRobustness:"",videoRobustness:"",
serverCertificate:null,initData:e,keyIds:[]}}function mc(c,d){var e=c.f,f=Object.keys(e.servers);return!f.length||d.periods.some(function(c){return c.variants.some(function(c){return c.drmInfos.length})})?null:f.map(function(c){return{keySystem:c,licenseServerUri:e.servers[c],distinctiveIdentifierRequired:!1,persistentStateRequired:!1,audioRobustness:"",videoRobustness:"",serverCertificate:null,initData:[],keyIds:[]}})}
function oc(c,d,e,f){var g=[],h=[],k=[],l=[];pc(f,g,h,k,l);c.b={keySystem:d,licenseServerUri:g[0],distinctiveIdentifierRequired:"required"==e.distinctiveIdentifier,persistentStateRequired:"required"==e.persistentState,audioRobustness:e.audioCapabilities?e.audioCapabilities[0].robustness:"",videoRobustness:e.videoCapabilities?e.videoCapabilities[0].robustness:"",serverCertificate:h[0],initData:k,keyIds:l}}
function pc(c,d,e,f,g){function h(c,d){return c.keyId&&c.keyId==d.keyId?!0:c.initDataType==d.initDataType&&Zb(c.initData,d.initData)}c.forEach(function(c){-1==d.indexOf(c.licenseServerUri)&&d.push(c.licenseServerUri);c.serverCertificate&&-1==hb(e,c.serverCertificate,Zb)&&e.push(c.serverCertificate);c.initData&&c.initData.forEach(function(c){-1==hb(f,c,h)&&f.push(c)});if(c.keyIds)for(var k=0;k<c.keyIds.length;++k)-1==g.indexOf(c.keyIds[k])&&g.push(c.keyIds[k])})}
function ic(c,d){try{var e=c.j.createSession("persistent-license")}catch(h){var f=new C(2,6,6005,h.message);c.g(f);return Promise.reject(f)}F(c.h,e,"message",c.Ic.bind(c));F(c.h,e,"keystatuseschange",c.Ec.bind(c));var g={initData:null,la:e,loaded:!1,Ub:Infinity,sa:null};c.a.push(g);return e.load(d).then(function(c){if(this.c)return Promise.reject();if(c)return g.loaded=!0,this.a.every(function(c){return c.loaded})&&this.i.resolve(),e;this.a.splice(this.a.indexOf(g),1);this.g(new C(2,6,6013))}.bind(c),
function(c){this.c||(this.a.splice(this.a.indexOf(g),1),this.g(new C(2,6,6005,c.message)))}.bind(c))}
function jc(c,d,e){try{var f=c.ia?c.j.createSession("persistent-license"):c.j.createSession()}catch(g){c.g(new C(2,6,6005,g.message));return}F(c.h,f,"message",c.Ic.bind(c));F(c.h,f,"keystatuseschange",c.Ec.bind(c));c.a.push({initData:e,la:f,loaded:!1,Ub:Infinity,sa:null});f.generateRequest(d,e.buffer)["catch"](function(d){if(!c.c){for(var e=0;e<c.a.length;++e)if(c.a[e].la==f){c.a.splice(e,1);break}if(d.errorCode&&d.errorCode.systemCode){var g=d.errorCode.systemCode;0>g&&(g+=Math.pow(2,32));g="0x"+
g.toString(16)}c.g(new C(2,6,6006,d.message,d,g))}})}p.Ic=function(c){this.f.delayLicenseRequestUntilPlayed&&this.l.paused&&!this.ha?this.A.push(c):qc(this,c)};
function qc(c,d){for(var e=d.target,f,g=0;g<c.a.length;g++)if(c.a[g].la==e){f=c.a[g];break}g=rb([c.b.licenseServerUri],c.f.retryParameters);g.body=d.message;g.method="POST";"com.microsoft.playready"!=c.b.keySystem&&"com.chromecast.playready"!=c.b.keySystem||rc(g);c.s.$a.request(2,g).promise.then(function(c){return this.c?Promise.reject():e.update(c.data).then(function(){this.s.onEvent(new G("drmsessionupdate"));f&&(f.sa&&f.sa.resolve(),setTimeout(function(){f.loaded=!0;this.a.every(function(c){return c.loaded})&&
this.i.resolve()}.bind(this),1E3*sc))}.bind(this))}.bind(c),function(c){this.c||(c=new C(2,6,6007,c),this.g(c),f&&f.sa&&f.sa.reject(c))}.bind(c))["catch"](function(c){this.c||(c=new C(2,6,6008,c.message),this.g(c),f&&f.sa&&f.sa.reject(c))}.bind(c))}
function rc(c){var d=Nb(c.body,!0,!0);if(-1==d.indexOf("PlayReadyKeyMessage"))c.headers["Content-Type"]="text/xml; charset=utf-8";else{d=(new DOMParser).parseFromString(d,"application/xml");for(var e=d.getElementsByTagName("HttpHeader"),f=0;f<e.length;++f)c.headers[e[f].querySelector("name").textContent]=e[f].querySelector("value").textContent;c.body=Wb(d.querySelector("Challenge").textContent).buffer}}
p.Ec=function(c){c=c.target;var d;for(d=0;d<this.a.length&&this.a[d].la!=c;++d);var e=d<this.a.length,f=!1;c.keyStatuses.forEach(function(c,e){if("string"==typeof e){var g=e;e=c;c=g}if("com.microsoft.playready"==this.b.keySystem&&16==e.byteLength&&!/Tizen/.exec(navigator.userAgent)){g=new DataView(e);var h=g.getUint32(0,!0),k=g.getUint16(4,!0),t=g.getUint16(6,!0);g.setUint32(0,h,!1);g.setUint16(4,k,!1);g.setUint16(6,t,!1)}"com.microsoft.playready"==this.b.keySystem&&"status-pending"==c&&(c="usable");
"status-pending"!=c&&(this.a[d].loaded=!0);"expired"==c&&(f=!0);g=Yb(new Uint8Array(e));this.N[g]=c}.bind(this));var g=c.expiration-Date.now();(0>g||f&&1E3>g)&&e&&!this.a[d].sa&&(this.a.splice(d,1),c.close()["catch"](function(){}));this.a.every(function(c){return c.loaded})&&(this.i.resolve(),Sb(this.W))};p.pe=function(){function c(c,d){return"expired"==d}this.m={};for(var d in this.N)this.m[d]=this.N[d];!I.empty(this.m)&&I.every(this.m,c)&&this.g(new C(2,6,6014));this.s.Vb(this.m)};
function tc(){var c=[],d=[{contentType:'video/mp4; codecs="avc1.42E01E"'},{contentType:'video/webm; codecs="vp8"'}],e=[{videoCapabilities:d,persistentState:"required",sessionTypes:["persistent-license"]},{videoCapabilities:d}],f={};"org.w3.clearkey com.widevine.alpha com.microsoft.playready com.apple.fps.2_0 com.apple.fps.1_0 com.apple.fps com.adobe.primetime".split(" ").forEach(function(d){var g=navigator.requestMediaKeySystemAccess(d,e).then(function(c){var e=c.getConfiguration().sessionTypes;e=
e?0<=e.indexOf("persistent-license"):!1;0<=navigator.userAgent.indexOf("Tizen 3")&&(e=!1);f[d]={persistentState:e};return c.createMediaKeys()})["catch"](function(){f[d]=null});c.push(g)});return Promise.all(c).then(function(){return f})}p.Ud=function(){for(var c=0;c<this.A.length;c++)qc(this,this.A[c]);this.ha=!0;this.A=[]};function uc(c,d){var e=c.keySystem();return 0==d.drmInfos.length||d.drmInfos.some(function(c){return c.keySystem==e})}
function vc(c,d){if(!c.length)return d;if(!d.length)return c;for(var e=[],f=0;f<c.length;f++)for(var g=0;g<d.length;g++)if(c[f].keySystem==d[g].keySystem){var h=c[f];g=d[g];var k=[];k=k.concat(h.initData||[]);k=k.concat(g.initData||[]);var l=[];l=l.concat(h.keyIds);l=l.concat(g.keyIds);e.push({keySystem:h.keySystem,licenseServerUri:h.licenseServerUri||g.licenseServerUri,distinctiveIdentifierRequired:h.distinctiveIdentifierRequired||g.distinctiveIdentifierRequired,persistentStateRequired:h.persistentStateRequired||
g.persistentStateRequired,videoRobustness:h.videoRobustness||g.videoRobustness,audioRobustness:h.audioRobustness||g.audioRobustness,serverCertificate:h.serverCertificate||g.serverCertificate,initData:k,keyIds:l});break}return e}p.oe=function(){this.a.forEach(function(c){var d=c.Ub,e=c.la.expiration;isNaN(e)&&(e=Infinity);e!=d&&(this.s.onExpirationUpdated(c.la.sessionId,e),c.Ub=e)}.bind(this))};
function cc(c){return r(function e(){var f,g;return x(e,function(e){switch(e.u){case 1:return f=c.close().then(function(){return!0}),g=new Promise(function(c){setTimeout(function(){c(!1)},1E3*wc)}),w(e,Promise.race([f,g]),2);case 2:e.u=0}})})}var wc=1,sc=5,Tb=.5;function xc(c){return!c||1==c.length&&1E-6>c.end(0)-c.start(0)?null:c.length?c.end(c.length-1):null}function yc(c,d,e){e=void 0===e?0:e;return!c||!c.length||1==c.length&&1E-6>c.end(0)-c.start(0)||d>c.end(c.length-1)?!1:d+e>=c.start(0)}function zc(c,d){if(!c||!c.length||1==c.length&&1E-6>c.end(0)-c.start(0))return 0;for(var e=0,f=c.length-1;0<=f&&c.end(f)>d;--f)e+=c.end(f)-Math.max(c.start(f),d);return e}
function Ac(c){if(!c)return[];for(var d=[],e=0;e<c.length;e++)d.push({start:c.start(e),end:c.end(e)});return d};function Bc(c,d,e){this.startTime=c;this.endTime=d;this.payload=e;this.region=new Cc;this.position=null;this.positionAlign=Ec;this.size=100;this.textAlign=Fc;this.writingDirection=Gc;this.lineInterpretation=Hc;this.line=null;this.lineHeight="";this.lineAlign=Ic;this.displayAlign=Jc;this.fontSize=this.backgroundColor=this.color="";this.fontWeight=Kc;this.fontStyle=Lc;this.fontFamily="";this.textDecoration=[];this.wrapLine=!0;this.id=""}A("shaka.text.Cue",Bc);var Ec="auto";
Bc.positionAlign={LEFT:"line-left",RIGHT:"line-right",CENTER:"center",AUTO:Ec};var Fc="center",Mc={LEFT:"left",RIGHT:"right",CENTER:Fc,START:"start",END:"end"};Bc.textAlign=Mc;var Jc="before",Nc={BEFORE:Jc,CENTER:"center",AFTER:"after"};Bc.displayAlign=Nc;var Gc=0;Bc.writingDirection={HORIZONTAL_LEFT_TO_RIGHT:Gc,HORIZONTAL_RIGHT_TO_LEFT:1,VERTICAL_LEFT_TO_RIGHT:2,VERTICAL_RIGHT_TO_LEFT:3};var Hc=0;Bc.lineInterpretation={LINE_NUMBER:Hc,PERCENTAGE:1};var Ic="center",Oc={CENTER:Ic,START:"start",END:"end"};
Bc.lineAlign=Oc;var Kc=400;Bc.fontWeight={NORMAL:Kc,BOLD:700};var Lc="normal",Pc={NORMAL:Lc,ITALIC:"italic",OBLIQUE:"oblique"};Bc.fontStyle=Pc;Bc.textDecoration={UNDERLINE:"underline",LINE_THROUGH:"lineThrough",OVERLINE:"overline"};function Cc(){this.id="";this.regionAnchorY=this.regionAnchorX=this.viewportAnchorY=this.viewportAnchorX=0;this.height=this.width=100;this.viewportAnchorUnits=this.widthUnits=this.heightUnits=Qc;this.scroll=Rc}A("shaka.text.CueRegion",Cc);var Qc=1;
Cc.units={PX:0,PERCENTAGE:Qc,LINES:2};var Rc="";Cc.scrollMode={NONE:Rc,UP:"up"};function Sc(){this.a=new muxjs.mp4.Transmuxer({keepOriginalTimestamps:!0});this.b=null;this.g=[];this.c=[];this.f=!1;this.a.on("data",this.i.bind(this));this.a.on("done",this.h.bind(this))}Sc.prototype.destroy=function(){this.a.dispose();this.a=null;return Promise.resolve()};function Tc(c,d){return window.muxjs&&"mp2t"==c.split(";")[0].split("/")[1]?d?MediaSource.isTypeSupported(Uc(d,c)):MediaSource.isTypeSupported(Uc("audio",c))||MediaSource.isTypeSupported(Uc("video",c)):!1}
function Uc(c,d){var e=d.replace("mp2t","mp4");"audio"==c&&(e=e.replace("video","audio"));var f=/avc1\.(66|77|100)\.(\d+)/.exec(e);if(f){var g="avc1.",h=f[1],k=Number(f[2]);g=("66"==h?g+"4200":"77"==h?g+"4d00":g+"6400")+(k>>4).toString(16);g+=(k&15).toString(16);e=e.replace(f[0],g)}return e}function Vc(c,d){c.f=!0;c.b=new B;c.g=[];c.c=[];var e=new Uint8Array(d);c.a.push(e);c.a.flush();c.f&&c.b.reject(new C(2,3,3018));return c.b}
Sc.prototype.i=function(c){for(var d=0;d<c.captions.length;d++){var e=c.captions[d];this.c.push(new Bc(e.startTime,e.endTime,e.text))}d=new Uint8Array(c.data.byteLength+c.initSegment.byteLength);d.set(c.initSegment,0);d.set(c.data,c.initSegment.byteLength);this.g.push(d)};Sc.prototype.h=function(){var c={data:$b.apply(null,this.g),cues:this.c};this.b.resolve(c);this.f=!1};function Wc(c){this.f=null;this.c=c;this.h=this.i=0;this.g=Infinity;this.b=this.a=null}var J={};A("shaka.text.TextEngine.registerParser",function(c,d){J[c]=d});A("shaka.text.TextEngine.unregisterParser",function(c){delete J[c]});Wc.prototype.destroy=function(){this.c=this.f=null;return Promise.resolve()};Wc.prototype.Fe=function(c){this.c=c};Wc.prototype.setDisplayer=Wc.prototype.Fe;
Wc.prototype.Lb=function(c){var d={periodStart:0,segmentStart:null,segmentEnd:0};try{return this.f.parseMedia(new Uint8Array(c),d)[0].startTime}catch(e){throw new C(2,2,2009,e);}};
function Xc(c,d,e,f){return Promise.resolve().then(function(){if(this.f&&this.c)if(null==e||null==f)this.f.parseInit(new Uint8Array(d));else{var c={periodStart:this.i,segmentStart:e,segmentEnd:f};c=this.f.parseMedia(new Uint8Array(d),c).filter(function(c){return c.startTime>=this.h&&c.startTime<this.g}.bind(this));this.c.append(c);null==this.a&&(this.a=Math.max(e,this.h));this.b=Math.min(f,this.g)}}.bind(c))}
Wc.prototype.remove=function(c,d){return Promise.resolve().then(function(){!this.c||!this.c.remove(c,d)||null==this.a||d<=this.a||c>=this.b||(c<=this.a&&d>=this.b?this.a=this.b=null:c<=this.a&&d<this.b?this.a=d:c>this.a&&d>=this.b&&(this.b=c))}.bind(this))};Wc.prototype.lc=function(c){this.c.append(c)};Wc.prototype.appendCues=Wc.prototype.lc;function Yc(c){this.f=c;this.o=null;this.b={};this.a=null;this.c={};this.h=new xb;this.m=!1;this.i={};this.l=!1;c=this.j=new B;var d=new MediaSource;Ab(this.h,d,"sourceopen",c.resolve);this.f.src=window.URL.createObjectURL(d);this.g=d}
function Zc(){var c={};'video/mp4; codecs="avc1.42E01E",video/mp4; codecs="avc3.42E01E",video/mp4; codecs="hev1.1.6.L93.90",video/mp4; codecs="hvc1.1.6.L93.90",video/mp4; codecs="hev1.2.4.L153.B0"; eotf="smpte2084",video/mp4; codecs="hvc1.2.4.L153.B0"; eotf="smpte2084",video/mp4; codecs="vp9",video/mp4; codecs="vp09.00.10.08",audio/mp4; codecs="mp4a.40.2",audio/mp4; codecs="ac-3",audio/mp4; codecs="ec-3",audio/mp4; codecs="opus",audio/mp4; codecs="flac",video/webm; codecs="vp8",video/webm; codecs="vp9",video/webm; codecs="vp09.00.10.08",audio/webm; codecs="vorbis",audio/webm; codecs="opus",video/mp2t; codecs="avc1.42E01E",video/mp2t; codecs="avc3.42E01E",video/mp2t; codecs="hvc1.1.6.L93.90",video/mp2t; codecs="mp4a.40.2",video/mp2t; codecs="ac-3",video/mp2t; codecs="ec-3",text/vtt,application/mp4; codecs="wvtt",application/ttml+xml,application/mp4; codecs="stpp"'.split(",").forEach(function(d){c[d]=!!J[d]||
MediaSource.isTypeSupported(d)||Tc(d);var e=d.split(";")[0];c[e]=c[e]||c[d]});return c}p=Yc.prototype;
p.destroy=function(){this.m=!0;var c=[],d;for(d in this.c){var e=this.c[d],f=e[0];this.c[d]=e.slice(0,1);f&&c.push(f.p["catch"](Db));for(f=1;f<e.length;++f)e[f].p["catch"](Db),e[f].p.reject()}this.a&&c.push(this.a.destroy());for(var g in this.i)c.push(this.i[g].destroy());return Promise.all(c).then(function(){var c=this.h?this.h.destroy():null;this.f&&(this.f.removeAttribute("src"),this.f.load());this.o=this.a=this.g=this.f=this.h=null;this.b={};this.i={};this.c={};return c}.bind(this))};
p.init=function(c,d){var e=this;return this.j.then(function(){for(var f in c){var g=c[f];g=Ib(g.mimeType,g.codecs);"text"==f?$c(e,g):(!d&&MediaSource.isTypeSupported(g)||!Tc(g,f)||(e.i[f]=new Sc,g=Uc(f,g)),g=e.g.addSourceBuffer(g),F(e.h,g,"error",e.Re.bind(e,f)),F(e.h,g,"updateend",e.Oa.bind(e,f)),e.b[f]=g,e.c[f]=[])}})};function $c(c,d){c.a||(c.a=new Wc(c.o));c.a.f=new J[d]}
function ad(c,d){if("text"==d)var e=c.a.a;else e=bd(c,d),e=!e||1==e.length&&1E-6>e.end(0)-e.start(0)?null:1==e.length&&0>e.start(0)?0:e.length?e.start(0):null;return e}function cd(c,d){return"text"==d?c.a.b:xc(bd(c,d))}function dd(c,d,e){if("text"==d)return c=c.a,null==c.b||c.b<e?0:c.b-Math.max(e,c.a);c=bd(c,d);return zc(c,e)}p.Hb=function(){var c=this.a&&null!=this.a.a?[{start:this.a.a,end:this.a.b}]:[];return{total:Ac(this.f.buffered),audio:Ac(bd(this,"audio")),video:Ac(bd(this,"video")),text:c}};
function bd(c,d){try{return c.b[d].buffered}catch(e){return null}}function ed(c,d,e,f,g){return"text"==d?Xc(c.a,e,f,g):c.i[d]?Vc(c.i[d],e).then(function(c){this.a||$c(this,"text/vtt");this.l&&this.a.lc(c.cues);return fd(this,d,this.Vc.bind(this,d,c.data.buffer))}.bind(c)):fd(c,d,c.Vc.bind(c,d,e))}p.remove=function(c,d,e){return"text"==c?this.a.remove(d,e):fd(this,c,this.Wc.bind(this,c,d,e))};
function gd(c,d){return"text"==d?c.a?c.a.remove(0,Infinity):Promise.resolve():fd(c,d,c.Wc.bind(c,d,0,c.g.duration))}p.flush=function(c){return"text"==c?Promise.resolve():fd(this,c,this.nd.bind(this,c))};function hd(c,d,e,f,g){return"text"==d?(c.a.i=e,c=c.a,c.h=f,c.g=g,Promise.resolve()):Promise.all([fd(c,d,c.cd.bind(c,d)),fd(c,d,c.He.bind(c,d,e)),fd(c,d,c.Ee.bind(c,d,f,g))])}p.endOfStream=function(c){return id(this,function(){c?this.g.endOfStream(c):this.g.endOfStream()}.bind(this))};
p.ma=function(c){return id(this,function(){this.g.duration=c}.bind(this))};p.U=function(){return this.g.duration};p.Vc=function(c,d){this.b[c].appendBuffer(d)};p.Wc=function(c,d,e){e<=d?this.Oa(c):this.b[c].remove(d,e)};p.cd=function(c){var d=this.b[c].appendWindowStart,e=this.b[c].appendWindowEnd;this.b[c].abort();this.b[c].appendWindowStart=d;this.b[c].appendWindowEnd=e;this.Oa(c)};p.nd=function(c){this.f.currentTime-=.001;this.Oa(c)};
p.He=function(c,d){0>d&&(d+=.001);this.b[c].timestampOffset=d;this.Oa(c)};p.Ee=function(c,d,e){this.b[c].appendWindowStart=0;this.b[c].appendWindowEnd=e;this.b[c].appendWindowStart=d;this.Oa(c)};p.Re=function(c){this.c[c][0].p.reject(new C(2,3,3014,this.f.error?this.f.error.code:0))};p.Oa=function(c){var d=this.c[c][0];d&&(d.p.resolve(),jd(this,c))};
function fd(c,d,e){if(c.m)return Promise.reject();e={start:e,p:new B};c.c[d].push(e);if(1==c.c[d].length)try{e.start()}catch(f){"QuotaExceededError"==f.name?e.p.reject(new C(2,3,3017,d)):e.p.reject(new C(2,3,3015,f)),jd(c,d)}return e.p}
function id(c,d){if(c.m)return Promise.reject();var e=[],f;for(f in c.b){var g=new B,h={start:function(c){c.resolve()}.bind(null,g),p:g};c.c[f].push(h);e.push(g);1==c.c[f].length&&h.start()}return Promise.all(e).then(function(){try{d()}catch(m){var c=Promise.reject(new C(2,3,3015,m))}for(var e in this.b)jd(this,e);return c}.bind(c),function(){return Promise.reject()}.bind(c))}function jd(c,d){c.c[d].shift();var e=c.c[d][0];if(e)try{e.start()}catch(f){e.p.reject(new C(2,3,3015,f)),jd(c,d)}};function kd(c,d,e){return e==d||c>=ld&&e==d.split("-")[0]||c>=md&&e.split("-")[0]==d.split("-")[0]?!0:!1}var ld=1,md=2;function nd(c){c=c.toLowerCase().split("-");var d=od[c[0]];d&&(c[0]=d);return c.join("-")}
var od={aar:"aa",abk:"ab",afr:"af",aka:"ak",alb:"sq",amh:"am",ara:"ar",arg:"an",arm:"hy",asm:"as",ava:"av",ave:"ae",aym:"ay",aze:"az",bak:"ba",bam:"bm",baq:"eu",bel:"be",ben:"bn",bih:"bh",bis:"bi",bod:"bo",bos:"bs",bre:"br",bul:"bg",bur:"my",cat:"ca",ces:"cs",cha:"ch",che:"ce",chi:"zh",chu:"cu",chv:"cv",cor:"kw",cos:"co",cre:"cr",cym:"cy",cze:"cs",dan:"da",deu:"de",div:"dv",dut:"nl",dzo:"dz",ell:"el",eng:"en",epo:"eo",est:"et",eus:"eu",ewe:"ee",fao:"fo",fas:"fa",fij:"fj",fin:"fi",fra:"fr",fre:"fr",
fry:"fy",ful:"ff",geo:"ka",ger:"de",gla:"gd",gle:"ga",glg:"gl",glv:"gv",gre:"el",grn:"gn",guj:"gu",hat:"ht",hau:"ha",heb:"he",her:"hz",hin:"hi",hmo:"ho",hrv:"hr",hun:"hu",hye:"hy",ibo:"ig",ice:"is",ido:"io",iii:"ii",iku:"iu",ile:"ie",ina:"ia",ind:"id",ipk:"ik",isl:"is",ita:"it",jav:"jv",jpn:"ja",kal:"kl",kan:"kn",kas:"ks",kat:"ka",kau:"kr",kaz:"kk",khm:"km",kik:"ki",kin:"rw",kir:"ky",kom:"kv",kon:"kg",kor:"ko",kua:"kj",kur:"ku",lao:"lo",lat:"la",lav:"lv",lim:"li",lin:"ln",lit:"lt",ltz:"lb",lub:"lu",
lug:"lg",mac:"mk",mah:"mh",mal:"ml",mao:"mi",mar:"mr",may:"ms",mkd:"mk",mlg:"mg",mlt:"mt",mon:"mn",mri:"mi",msa:"ms",mya:"my",nau:"na",nav:"nv",nbl:"nr",nde:"nd",ndo:"ng",nep:"ne",nld:"nl",nno:"nn",nob:"nb",nor:"no",nya:"ny",oci:"oc",oji:"oj",ori:"or",orm:"om",oss:"os",pan:"pa",per:"fa",pli:"pi",pol:"pl",por:"pt",pus:"ps",que:"qu",roh:"rm",ron:"ro",rum:"ro",run:"rn",rus:"ru",sag:"sg",san:"sa",sin:"si",slk:"sk",slo:"sk",slv:"sl",sme:"se",smo:"sm",sna:"sn",snd:"sd",som:"so",sot:"st",spa:"es",sqi:"sq",
srd:"sc",srp:"sr",ssw:"ss",sun:"su",swa:"sw",swe:"sv",tah:"ty",tam:"ta",tat:"tt",tel:"te",tgk:"tg",tgl:"tl",tha:"th",tib:"bo",tir:"ti",ton:"to",tsn:"tn",tso:"ts",tuk:"tk",tur:"tr",twi:"tw",uig:"ug",ukr:"uk",urd:"ur",uzb:"uz",ven:"ve",vie:"vi",vol:"vo",wel:"cy",wln:"wa",wol:"wo",xho:"xh",yid:"yi",yor:"yo",zha:"za",zho:"zh",zul:"zu"};function pd(c,d,e){var f=c.video;return f&&(f.width<d.minWidth||f.width>d.maxWidth||f.width>e.width||f.height<d.minHeight||f.height>d.maxHeight||f.height>e.height||f.width*f.height<d.minPixels||f.width*f.height>d.maxPixels)||c.bandwidth<d.minBandwidth||c.bandwidth>d.maxBandwidth?!1:!0}function qd(c,d,e){var f=!1;c.variants.forEach(function(c){var g=c.allowedByApplication;c.allowedByApplication=pd(c,d,e);g!=c.allowedByApplication&&(f=!0)});return f}
function rd(c,d,e,f){f.variants=f.variants.filter(function(f){return c&&c.H&&!uc(c,f)?!1:sd(f.audio,c,d)&&sd(f.video,c,e)});f.textStreams=f.textStreams.filter(function(c){return!!J[Ib(c.mimeType,c.codecs)]})}
function sd(c,d,e){if(!c)return!0;var f=null;d&&d.H&&(f=d.w);d=Ib(c.mimeType,c.codecs);var g=Ib(c.mimeType,c.codecs),h=Jb(c);return!(J[g]||MediaSource.isTypeSupported(h)||Tc(g,c.type))||f&&c.encrypted&&0>f.indexOf(d)||e&&(c.mimeType!=e.mimeType||c.codecs.split(".")[0]!=e.codecs.split(".")[0])?!1:!0}
function td(c){var d=c.audio,e=c.video,f=d?d.codecs:null,g=e?e.codecs:null,h=[];g&&h.push(g);f&&h.push(f);var k=[];e&&k.push(e.mimeType);d&&k.push(d.mimeType);k=k[0]||null;var l=[];d&&l.push(d.kind);e&&l.push(e.kind);l=l[0]||null;var m=[];d&&m.push.apply(m,d.roles);e&&m.push.apply(m,e.roles);m=gb(m);c={id:c.id,active:!1,type:"variant",bandwidth:c.bandwidth,language:c.language,label:null,kind:l,width:null,height:null,frameRate:null,mimeType:k,codecs:h.join(", "),audioCodec:f,videoCodec:g,primary:c.primary,
roles:m,videoId:null,audioId:null,channelsCount:null,audioBandwidth:null,videoBandwidth:null};e&&(c.videoId=e.id,c.width=e.width||null,c.height=e.height||null,c.frameRate=e.frameRate||null,c.videoBandwidth=e.bandwidth||null);d&&(c.audioId=d.id,c.channelsCount=d.channelsCount,c.audioBandwidth=d.bandwidth||null,c.label=d.label);return c}
function ud(c){return{id:c.id,active:!1,type:"text",bandwidth:0,language:c.language,label:c.label,kind:c.kind||null,width:null,height:null,frameRate:null,mimeType:c.mimeType,codecs:c.codecs||null,audioCodec:null,videoCodec:null,primary:c.primary,roles:c.roles,videoId:null,audioId:null,channelsCount:null,audioBandwidth:null,videoBandwidth:null}}function vd(c){var d=[],e=wd(c.variants);c=c.textStreams;e.forEach(function(c){d.push(td(c))});c.forEach(function(c){d.push(ud(c))});return d}
function xd(c,d,e){return wd(c.variants).map(function(c){var f=td(c);c.video&&c.audio?f.active=e==c.video.id&&d==c.audio.id:c.video?f.active=e==c.video.id:c.audio&&(f.active=d==c.audio.id);return f})}function yd(c,d){return c.textStreams.map(function(c){var e=ud(c);e.active=d==c.id;return e})}function zd(c,d){for(var e=0;e<c.variants.length;e++)if(c.variants[e].id==d.id)return c.variants[e];return null}function Ad(c){return c.allowedByApplication&&c.allowedByKeySystem}
function wd(c){return c.filter(function(c){return Ad(c)})}function Bd(c,d,e,f,g){c=Cd(c,d,e,g);return Dd(c,f)}
function Cd(c,d,e,f){var g=wd(c),h=g;c=g.filter(function(c){return c.primary});c.length&&(h=c);var k=h.length?h[0].language:"";h=h.filter(function(c){return c.language==k});if(d){var l=nd(d);[md,ld,0].forEach(function(c){var d=!1;g.forEach(function(e){l=nd(l);var g=nd(e.language);kd(c,l,g)&&(d?h.push(e):(h=[e],d=!0),f&&(f.audio=!0))})})}if(e&&(d=Ed(h,e),d.length))return d;d=h.map(function(c){return(c.audio?c.audio.roles:[]).concat(c.video?c.video.roles:[])}).reduce(Cb,[]);return d.length?Ed(h,d[0]):
h}function Dd(c,d){var e=c.filter(function(c){return c.audio&&c.audio.channelsCount}).reduce(function(c,d){var e=d.audio.channelsCount;c[e]?c[e].push(d):c[e]=[d];return c},{}),f=Object.keys(e);if(0==f.length)return c;var g=f.filter(function(c){return c<=d});return g.length?e[Math.max.apply(null,g)]:e[Math.min.apply(null,f)]}
function Fd(c,d,e,f){var g=c,h=c.filter(function(c){return c.primary});h.length&&(g=h);var k=g.length?g[0].language:"";g=g.filter(function(c){return c.language==k});if(d){var l=nd(d);[md,ld,0].forEach(function(d){var e=!1;c.forEach(function(c){var h=nd(c.language);kd(d,l,h)&&(e?g.push(c):(g=[c],e=!0),f&&(f.text=!0))})})}if(e){if(d=Gd(g,e),d.length)return d}else if(d=g.filter(function(c){return 0==c.roles.length}),d.length)return d;d=g.map(function(c){return c.roles}).reduce(Cb,[]);return d.length?
Gd(g,d[0]):g}function Ed(c,d){return c.filter(function(c){return c.audio&&0<=c.audio.roles.indexOf(d)||c.video&&0<=c.video.roles.indexOf(d)})}function Gd(c,d){return c.filter(function(c){return 0<=c.roles.indexOf(d)})}function Hd(c,d,e){for(var f=0;f<e.length;f++)if(e[f].audio==c&&e[f].video==d)return e[f];return null}function Id(c,d,e){function f(c,d){return null==c?null==d:d.id==c}for(var g=0;g<e.length;g++)if(f(c,e[g].audio)&&f(d,e[g].video))return e[g];return null}
function Jd(c,d){for(var e=c.periods.length-1;0<e;--e)if(d+Hb>=c.periods[e].startTime)return e;return 0}function Kd(c,d){for(var e=0;e<c.periods.length;++e){var f=c.periods[e];if("text"==d.type)for(var g=0;g<f.textStreams.length;++g){if(f.textStreams[g]==d)return e}else for(g=0;g<f.variants.length;++g){var h=f.variants[g];if(h.audio==d||h.video==d||h.video&&h.video.trickModeVideo==d)return e}}return-1};function K(){this.h=null;this.f=!1;this.b=new Fa;this.c=[];this.i=!1;this.a=this.g=null}A("shaka.abr.SimpleAbrManager",K);K.prototype.stop=function(){this.h=null;this.f=!1;this.c=[];this.g=null};K.prototype.stop=K.prototype.stop;K.prototype.init=function(c){this.h=c};K.prototype.init=K.prototype.init;
K.prototype.chooseVariant=function(){var c=Ld(this.a.restrictions,this.c),d=this.b.getBandwidthEstimate(this.a.defaultBandwidthEstimate);this.c.length&&!c.length&&(c=Ld(null,this.c),c=[c[0]]);for(var e=c[0]||null,f=0;f<c.length;++f){var g=c[f],h=(c[f+1]||{bandwidth:Infinity}).bandwidth/this.a.bandwidthUpgradeTarget;d>=g.bandwidth/this.a.bandwidthDowngradeTarget&&d<=h&&(e=g)}this.g=Date.now();return e};K.prototype.chooseVariant=K.prototype.chooseVariant;K.prototype.enable=function(){this.f=!0};
K.prototype.enable=K.prototype.enable;K.prototype.disable=function(){this.f=!1};K.prototype.disable=K.prototype.disable;K.prototype.segmentDownloaded=function(c,d){var e=this.b;if(!(16E3>d)){var f=8E3*d/c,g=c/1E3;e.a+=d;Da(e.b,g,f);Da(e.c,g,f)}if(null!=this.g&&this.f)a:{if(!this.i){if(!(128E3<=this.b.a))break a;this.i=!0}else if(Date.now()-this.g<1E3*this.a.switchInterval)break a;e=this.chooseVariant();this.b.getBandwidthEstimate(this.a.defaultBandwidthEstimate);this.h(e)}};
K.prototype.segmentDownloaded=K.prototype.segmentDownloaded;K.prototype.getBandwidthEstimate=function(){return this.b.getBandwidthEstimate(this.a.defaultBandwidthEstimate)};K.prototype.getBandwidthEstimate=K.prototype.getBandwidthEstimate;K.prototype.setVariants=function(c){this.c=c};K.prototype.setVariants=K.prototype.setVariants;K.prototype.configure=function(c){this.a=c};K.prototype.configure=K.prototype.configure;
function Ld(c,d){c&&(d=d.filter(function(d){return pd(d,c,{width:Infinity,height:Infinity})}));return d.sort(function(c,d){return c.bandwidth-d.bandwidth})};var Md="ended play playing pause pausing ratechange seeked seeking timeupdate volumechange".split(" "),Nd="buffered currentTime duration ended loop muted paused playbackRate seeking videoHeight videoWidth volume".split(" "),Od=["loop","playbackRate"],Pd=["pause","play"],Qd="adaptation buffering emsg error loading streaming texttrackvisibility timelineregionadded timelineregionenter timelineregionexit trackschanged unloading".split(" "),Rd={getAudioLanguages:2,getAudioLanguagesAndRoles:2,getBufferedInfo:2,
getConfiguration:2,getExpiration:2,getManifestUri:2,getPlaybackRate:2,getTextLanguages:2,getTextLanguagesAndRoles:2,getTextTracks:2,getStats:5,usingEmbeddedTextTrack:2,getVariantTracks:2,isAudioOnly:10,isBuffering:1,isInProgress:1,isLive:10,isTextTrackVisible:1,keySystem:10,seekRange:1},Vd={getPlayheadTimeAsDate:1,getPresentationStartTimeAsDate:20},Wd=[["getConfiguration","configure"]],Xd=[["isTextTrackVisible","setTextTrackVisibility"]],Yd="addTextTrack cancelTrickPlay configure resetConfiguration retryStreaming selectAudioLanguage selectEmbeddedTextTrack selectTextLanguage selectTextTrack selectVariantTrack setTextTrackVisibility trickPlay".split(" "),
Zd=["attach","detach","load","unload"];
function $d(c){return JSON.stringify(c,function(c,e){if("function"!=typeof e){if(e instanceof Event||e instanceof G){var d={},g;for(g in e){var h=e[g];h&&"object"==typeof h?"detail"==g&&(d[g]=h):g in Event||(d[g]=h)}return d}if(e instanceof TimeRanges)for(d={__type__:"TimeRanges",length:e.length,start:[],end:[]},g=0;g<e.length;++g)d.start.push(e.start(g)),d.end.push(e.end(g));else d=e instanceof Uint8Array?{__type__:"Uint8Array",entries:Array.from(e)}:"number"==typeof e?isNaN(e)?"NaN":isFinite(e)?
e:0>e?"-Infinity":"Infinity":e;return d}})}function ae(c){return JSON.parse(c,function(c,e){return"NaN"==e?NaN:"-Infinity"==e?-Infinity:"Infinity"==e?Infinity:e&&"object"==typeof e&&"TimeRanges"==e.__type__?be(e):e&&"object"==typeof e&&"Uint8Array"==e.__type__?new Uint8Array(e.entries):e})}function be(c){return{length:c.length,start:function(d){return c.start[d]},end:function(d){return c.end[d]}}};function ce(c,d,e,f,g,h){this.L=c;this.g=d;this.N=e;this.j=!1;this.A=f;this.H=g;this.s=h;this.b=this.h=!1;this.w="";this.i=null;this.l=this.Cc.bind(this);this.m=this.Qd.bind(this);this.a={video:{},player:{}};this.o=0;this.c={};this.f=null}var de=!1,ee=null;p=ce.prototype;p.destroy=function(){fe(this);ee&&ge(this);this.H=this.A=this.g=null;this.b=this.h=!1;this.m=this.l=this.f=this.c=this.a=this.i=null;return Promise.resolve()};p.$=function(){return this.b};p.Zb=function(){return this.w};
p.init=function(){if(window.chrome&&chrome.cast&&chrome.cast.isAvailable){delete window.__onGCastApiAvailable;this.h=!0;this.g();var c=new chrome.cast.SessionRequest(this.L);c=new chrome.cast.ApiConfig(c,this.Dc.bind(this),this.Xd.bind(this),"origin_scoped");chrome.cast.initialize(c,function(){},function(){});de&&setTimeout(this.g.bind(this),20);(c=ee)&&c.status!=chrome.cast.SessionStatus.STOPPED?this.Dc(c):ee=null}else window.__onGCastApiAvailable=function(c){c&&this.init()}.bind(this)};
p.bc=function(c){this.i=c;this.b&&he({type:"appData",appData:this.i})};p.cast=function(c){if(!this.h)return Promise.reject(new C(1,8,8E3));if(!de)return Promise.reject(new C(1,8,8001));if(this.b)return Promise.reject(new C(1,8,8002));this.f=new B;chrome.cast.requestSession(this.Wb.bind(this,c),this.Bc.bind(this));return this.f};p.ub=function(){this.b&&(fe(this),ee&&(ge(this),ee.stop(function(){},function(){}),ee=null))};
p.get=function(c,d){if("video"==c){if(0<=Pd.indexOf(d))return this.Mc.bind(this,c,d)}else if("player"==c){if(Vd[d]&&!this.get("player","isLive")())return function(){};if(0<=Yd.indexOf(d))return this.Mc.bind(this,c,d);if(0<=Zd.indexOf(d))return this.te.bind(this,c,d);if(Rd[d])return this.Jc.bind(this,c,d)}return this.Jc(c,d)};p.set=function(c,d,e){this.a[c][d]=e;he({type:"set",targetName:c,property:d,value:e})};
p.Wb=function(c,d){ee=d;d.addUpdateListener(this.l);d.addMessageListener("urn:x-cast:com.google.shaka.v2",this.m);this.Cc();he({type:"init",initState:c,appData:this.i});this.f.resolve()};p.Bc=function(c){var d=8003;switch(c.code){case "cancel":d=8004;break;case "timeout":d=8005;break;case "receiver_unavailable":d=8006}this.f.reject(new C(2,8,d,c))};p.Jc=function(c,d){return this.a[c][d]};p.Mc=function(c,d){he({type:"call",targetName:c,methodName:d,args:Array.prototype.slice.call(arguments,2)})};
p.te=function(c,d){var e=Array.prototype.slice.call(arguments,2),f=new B,g=this.o.toString();this.o++;this.c[g]=f;he({type:"asyncCall",targetName:c,methodName:d,args:e,id:g});return f};p.Dc=function(c){var d=this.s();this.f=new B;this.j=!0;this.Wb(d,c)};p.Xd=function(c){de="available"==c;this.g()};function ge(c){var d=ee;d.removeUpdateListener(c.l);d.removeMessageListener("urn:x-cast:com.google.shaka.v2",c.m)}
p.Cc=function(){var c=ee?"connected"==ee.status:!1;if(this.b&&!c){this.H();for(var d in this.a)this.a[d]={};fe(this)}this.w=(this.b=c)?ee.receiver.friendlyName:"";this.g()};function fe(c){for(var d in c.c){var e=c.c[d];delete c.c[d];e.reject(new C(1,7,7E3))}}
p.Qd=function(c,d){var e=ae(d);switch(e.type){case "event":var f=e.event;this.A(e.targetName,new G(f.type,f));break;case "update":f=e.update;for(var g in f){e=this.a[g]||{};for(var h in f[g])e[h]=f[g][h]}this.j&&(this.N(),this.j=!1);break;case "asyncComplete":if(g=e.id,e=e.error,h=this.c[g],delete this.c[g],h)if(e){g=new C(e.severity,e.category,e.code);for(f in e)g[f]=e[f];h.reject(g)}else h.resolve()}};function he(c){c=$d(c);ee.sendMessage("urn:x-cast:com.google.shaka.v2",c,function(){},Ha)};function L(){this.Cb=new wb;this.jb=this}L.prototype.addEventListener=function(c,d){this.Cb.push(c,d)};L.prototype.removeEventListener=function(c,d){this.Cb.remove(c,d)};L.prototype.dispatchEvent=function(c){for(var d=this.Cb.get(c.type)||[],e=0;e<d.length;++e){c.target=this.jb;c.currentTarget=this.jb;var f=d[e];try{f.handleEvent?f.handleEvent(c):f.call(this,c)}catch(g){}if(c.a)break}return c.defaultPrevented};function M(c,d,e){L.call(this);this.c=c;this.b=d;this.i=this.g=this.f=this.j=this.h=null;this.a=new ce(e,this.Me.bind(this),this.Ne.bind(this),this.Oe.bind(this),this.Pe.bind(this),this.tc.bind(this));ie(this)}Ba(M,L);A("shaka.cast.CastProxy",M);M.prototype.destroy=function(c){c&&this.a&&this.a.ub();c=[this.i?this.i.destroy():null,this.b?this.b.destroy():null,this.a?this.a.destroy():null];this.a=this.i=this.j=this.h=this.b=this.c=null;return Promise.all(c)};M.prototype.destroy=M.prototype.destroy;
M.prototype.Cd=function(){return this.h};M.prototype.getVideo=M.prototype.Cd;M.prototype.ud=function(){return this.j};M.prototype.getPlayer=M.prototype.ud;M.prototype.fd=function(){return this.a?this.a.h&&de:!1};M.prototype.canCast=M.prototype.fd;M.prototype.$=function(){return this.a?this.a.$():!1};M.prototype.isCasting=M.prototype.$;M.prototype.Zb=function(){return this.a?this.a.Zb():""};M.prototype.receiverName=M.prototype.Zb;M.prototype.cast=function(){var c=this.tc();return this.a.cast(c).then(function(){if(this.b)return this.b.hb()}.bind(this))};
M.prototype.cast=M.prototype.cast;M.prototype.bc=function(c){this.a.bc(c)};M.prototype.setAppData=M.prototype.bc;M.prototype.Te=function(){var c=this.a;if(c.b){var d=c.s();chrome.cast.requestSession(c.Wb.bind(c,d),c.Bc.bind(c))}};M.prototype.suggestDisconnect=M.prototype.Te;M.prototype.ub=function(){this.a.ub()};M.prototype.forceDisconnect=M.prototype.ub;
function ie(c){c.a.init();c.i=new xb;Md.forEach(function(c){F(this.i,this.c,c,this.af.bind(this))}.bind(c));Qd.forEach(function(c){F(this.i,this.b,c,this.me.bind(this))}.bind(c));c.h={};for(var d in c.c)Object.defineProperty(c.h,d,{configurable:!1,enumerable:!0,get:c.$e.bind(c,d),set:c.bf.bind(c,d)});c.j={};for(var e in c.b)Object.defineProperty(c.j,e,{configurable:!1,enumerable:!0,get:c.le.bind(c,e)});c.f=new L;c.f.jb=c.h;c.g=new L;c.g.jb=c.j}p=M.prototype;
p.tc=function(){var c={video:{},player:{},playerAfterLoad:{},manifest:this.b.Jb(),startTime:null};this.c.pause();Od.forEach(function(d){c.video[d]=this.c[d]}.bind(this));this.c.ended||(c.startTime=this.c.currentTime);Wd.forEach(function(d){var e=d[1];d=this.b[d[0]]();c.player[e]=d}.bind(this));Xd.forEach(function(d){var e=d[1];d=this.b[d[0]]();c.playerAfterLoad[e]=d}.bind(this));return c};p.Me=function(){this.dispatchEvent(new G("caststatuschanged"))};
p.Ne=function(){this.f.dispatchEvent(new G(this.h.paused?"pause":"play"))};
p.Pe=function(){var c=this;Wd.forEach(function(c){var d=c[1];c=this.a.get("player",c[0])();this.b[d](c)}.bind(this));var d=this.a.get("player","getManifestUri")(),e=this.a.get("video","ended"),f=Promise.resolve(),g=this.c.autoplay,h=null;e||(h=this.a.get("video","currentTime"));d&&(this.c.autoplay=!1,f=this.b.load(d,h));var k={};Od.forEach(function(c){k[c]=this.a.get("video",c)}.bind(this));f.then(function(){c.c&&(Od.forEach(function(c){this.c[c]=k[c]}.bind(c)),Xd.forEach(function(c){var d=c[1];c=
this.a.get("player",c[0])();this.b[d](c)}.bind(c)),c.c.autoplay=g,d&&c.c.play())},function(d){c.b.dispatchEvent(new G("error",{detail:d}))})};p.$e=function(c){if("addEventListener"==c)return this.f.addEventListener.bind(this.f);if("removeEventListener"==c)return this.f.removeEventListener.bind(this.f);if(this.a.$()&&0==Object.keys(this.a.a.video).length){var d=this.c[c];if("function"!=typeof d)return d}return this.a.$()?this.a.get("video",c):(c=this.c[c],"function"==typeof c&&(c=c.bind(this.c)),c)};
p.bf=function(c,d){this.a.$()?this.a.set("video",c,d):this.c[c]=d};p.af=function(c){this.a.$()||this.f.dispatchEvent(new G(c.type,c))};
p.le=function(c){if("addEventListener"==c)return this.g.addEventListener.bind(this.g);if("removeEventListener"==c)return this.g.removeEventListener.bind(this.g);if("getMediaElement"==c)return function(){return this.h}.bind(this);if("getNetworkingEngine"==c)return this.b.uc.bind(this.b);if(this.a.$()){if("getManifest"==c||"drmInfo"==c)return function(){Ga(c+"() does not work while casting!");return null};if("attach"==c||"detach"==c)return function(){Ga(c+"() does not work while casting!");return Promise.resolve()}}return this.a.$()&&
0==Object.keys(this.a.a.video).length&&Rd[c]||!this.a.$()?this.b[c].bind(this.b):this.a.get("player",c)};p.me=function(c){this.a.$()||this.g.dispatchEvent(c)};p.Oe=function(c,d){this.a.$()&&("video"==c?this.f.dispatchEvent(d):"player"==c&&this.g.dispatchEvent(d))};function je(c,d,e,f){L.call(this);this.a=c;this.b=d;this.c=new xb;this.s={video:c,player:d};this.w=e||function(){};this.A=f||function(c){return c};this.o=!1;this.h=!0;this.g=0;this.m=!1;this.j=!0;this.l=this.i=this.f=null;ke(this)}Ba(je,L);A("shaka.cast.CastReceiver",je);je.prototype.isConnected=function(){return this.o};je.prototype.isConnected=je.prototype.isConnected;je.prototype.Fd=function(){return this.h};je.prototype.isIdle=je.prototype.Fd;
je.prototype.destroy=function(){var c=[this.c?this.c.destroy():null,this.b?this.b.destroy():null];null!=this.l&&window.clearTimeout(this.l);this.w=this.s=this.c=this.b=this.a=null;this.o=!1;this.h=!0;this.l=this.i=this.f=null;return Promise.all(c).then(function(){cast.receiver.CastReceiverManager.getInstance().stop()})};je.prototype.destroy=je.prototype.destroy;
function ke(c){var d=cast.receiver.CastReceiverManager.getInstance();d.onSenderConnected=c.Hc.bind(c);d.onSenderDisconnected=c.Hc.bind(c);d.onSystemVolumeChanged=c.md.bind(c);c.i=d.getCastMessageBus("urn:x-cast:com.google.cast.media");c.i.onMessage=c.Ld.bind(c);c.f=d.getCastMessageBus("urn:x-cast:com.google.shaka.v2");c.f.onMessage=c.$d.bind(c);d.start();Md.forEach(function(c){F(this.c,this.a,c,this.Kc.bind(this,"video"))}.bind(c));Qd.forEach(function(c){F(this.c,this.b,c,this.Kc.bind(this,"player"))}.bind(c));
cast.__platform__&&cast.__platform__.canDisplayType('video/mp4; codecs="avc1.640028"; width=3840; height=2160')?c.b.cc(3840,2160):c.b.cc(1920,1080);F(c.c,c.a,"loadeddata",function(){this.m=!0}.bind(c));F(c.c,c.b,"loading",function(){this.h=!1;le(this)}.bind(c));F(c.c,c.a,"playing",function(){this.h=!1;le(this)}.bind(c));F(c.c,c.a,"pause",function(){le(this)}.bind(c));F(c.c,c.b,"unloading",function(){this.h=!0;le(this)}.bind(c));F(c.c,c.a,"ended",function(){window.setTimeout(function(){this.a&&this.a.ended&&
(this.h=!0,le(this))}.bind(this),5E3)}.bind(c))}p=je.prototype;p.Hc=function(){this.g=0;this.j=!0;this.o=0!=cast.receiver.CastReceiverManager.getInstance().getSenders().length;le(this)};function le(c){Promise.resolve().then(function(){this.b&&(this.dispatchEvent(new G("caststatuschanged")),me(this)||ne(this,0))}.bind(c))}
function oe(c,d,e){for(var f in d.player)c.b[f](d.player[f]);c.w(e);e=Promise.resolve();var g=c.a.autoplay;d.manifest&&(c.a.autoplay=!1,e=c.b.load(d.manifest,d.startTime));e.then(function(){if(c.b){for(var e in d.video)c.a[e]=d.video[e];for(var f in d.playerAfterLoad)c.b[f](d.playerAfterLoad[f]);c.a.autoplay=g;d.manifest&&(c.a.play(),ne(c,0))}},function(d){c.b.dispatchEvent(new G("error",{detail:d}))})}p.Kc=function(c,d){this.b&&(this.Xb(),pe(this,{type:"event",targetName:c,event:d},this.f))};
p.Xb=function(){null!=this.l&&window.clearTimeout(this.l);this.l=window.setTimeout(this.Xb.bind(this),500);var c={video:{},player:{}};Nd.forEach(function(d){c.video[d]=this.a[d]}.bind(this));if(this.b.S())for(var d in Vd)0==this.g%Vd[d]&&(c.player[d]=this.b[d]());for(var e in Rd)0==this.g%Rd[e]&&(c.player[e]=this.b[e]());if(d=cast.receiver.CastReceiverManager.getInstance().getSystemVolume())c.video.volume=d.level,c.video.muted=d.muted;this.m&&(this.g+=1);pe(this,{type:"update",update:c},this.f);me(this)};
function me(c){return c.j&&(c.a.duration||c.b.S())?(qe(c),c.j=!1,!0):!1}function qe(c){var d={contentId:c.b.Jb(),streamType:c.b.S()?"LIVE":"BUFFERED",duration:c.a.duration,contentType:""};ne(c,0,d)}p.md=function(){var c=cast.receiver.CastReceiverManager.getInstance().getSystemVolume();c&&pe(this,{type:"update",update:{video:{volume:c.level,muted:c.muted}}},this.f);pe(this,{type:"event",targetName:"video",event:{type:"volumechange"}},this.f)};
p.$d=function(c){var d=ae(c.data);switch(d.type){case "init":this.g=0;this.m=!1;this.j=!0;oe(this,d.initState,d.appData);this.Xb();break;case "appData":this.w(d.appData);break;case "set":var e=d.targetName,f=d.property;d=d.value;if("video"==e){var g=cast.receiver.CastReceiverManager.getInstance();if("volume"==f){g.setSystemVolumeLevel(d);break}else if("muted"==f){g.setSystemVolumeMuted(d);break}}this.s[e][f]=d;break;case "call":e=this.s[d.targetName];e[d.methodName].apply(e,d.args);break;case "asyncCall":e=
d.targetName;f=d.methodName;"player"==e&&"load"==f&&(this.g=0,this.m=!1);g=d.id;c=c.senderId;var h=this.s[e];d=h[f].apply(h,d.args);"player"==e&&"load"==f&&(d=d.then(function(){this.j=!0}.bind(this)));d.then(this.Qc.bind(this,c,g,null),this.Qc.bind(this,c,g))}};
p.Ld=function(c){var d=ae(c.data);switch(d.type){case "PLAY":this.a.play();ne(this,0);break;case "PAUSE":this.a.pause();ne(this,0);break;case "SEEK":c=d.currentTime;var e=d.resumeState;null!=c&&(this.a.currentTime=Number(c));e&&"PLAYBACK_START"==e?(this.a.play(),ne(this,0)):e&&"PLAYBACK_PAUSE"==e&&(this.a.pause(),ne(this,0));break;case "STOP":this.b.hb().then(function(){this.b&&ne(this,0)}.bind(this));break;case "GET_STATUS":ne(this,Number(d.requestId));break;case "VOLUME":e=d.volume;c=e.level;e=
e.muted;var f=this.a.volume,g=this.a.muted;null!=c&&(this.a.volume=Number(c));null!=e&&(this.a.muted=e);f==this.a.volume&&g==this.a.muted||ne(this,0);break;case "LOAD":this.g=0;this.j=this.m=!1;c=d.currentTime;e=this.A(d.media.contentId);this.a.autoplay=!0;this.b.load(e,c).then(function(){this.b&&qe(this)}.bind(this))["catch"](function(c){var e="LOAD_FAILED";7==c.category&&7E3==c.code&&(e="LOAD_CANCELLED");pe(this,{requestId:Number(d.requestId),type:e},this.i)}.bind(this));break;default:pe(this,{requestId:Number(d.requestId),
type:"INVALID_REQUEST",reason:"INVALID_COMMAND"},this.i)}};p.Qc=function(c,d,e){this.b&&pe(this,{type:"asyncComplete",id:d,error:e},this.f,c)};function pe(c,d,e,f){c.o&&(c=$d(d),f?e.getCastChannel(f).send(c):e.broadcast(c))}
function ne(c,d,e){var f=c.a.playbackRate;var g=re;g=c.h?g.IDLE:c.b.xc()?g.Yc:c.a.paused?g.$c:g.ad;f={mediaSessionId:0,playbackRate:f,playerState:g,currentTime:c.a.currentTime,supportedMediaCommands:15,volume:{level:c.a.volume,muted:c.a.muted}};e&&(f.media=e);pe(c,{requestId:d,type:"MEDIA_STATUS",status:[f]},c.i)}var re={IDLE:"IDLE",ad:"PLAYING",Yc:"BUFFERING",$c:"PAUSED"};function se(c,d){var e=N(c,d);return 1!=e.length?null:e[0]}function N(c,d){return Array.prototype.filter.call(c.childNodes,function(c){return c instanceof Element&&c.tagName==d})}function te(c){return Array.prototype.filter.call(c.childNodes,function(c){return c instanceof Element&&"pssh"==c.localName&&"urn:mpeg:cenc:2013"==c.namespaceURI})}function ue(c,d,e){return c.hasAttributeNS(d,e)?c.getAttributeNS(d,e):null}
function ve(c){return Array.prototype.every.call(c.childNodes,function(c){return c.nodeType==Node.TEXT_NODE||c.nodeType==Node.CDATA_SECTION_NODE})?c.textContent.trim():null}function O(c,d,e,f){var g=null;c=c.getAttribute(d);null!=c&&(g=e(c));return null==g?void 0!=f?f:null:g}function we(c){if(!c)return null;/^\d+-\d+-\d+T\d+:\d+:\d+(\.\d+)?$/.test(c)&&(c+="Z");c=Date.parse(c);return isNaN(c)?null:Math.floor(c/1E3)}
function xe(c){if(!c)return null;c=/^P(?:([0-9]*)Y)?(?:([0-9]*)M)?(?:([0-9]*)D)?(?:T(?:([0-9]*)H)?(?:([0-9]*)M)?(?:([0-9.]*)S)?)?$/.exec(c);if(!c)return null;c=31536E3*Number(c[1]||null)+2592E3*Number(c[2]||null)+86400*Number(c[3]||null)+3600*Number(c[4]||null)+60*Number(c[5]||null)+Number(c[6]||null);return isFinite(c)?c:null}function ye(c){var d=/([0-9]+)-([0-9]+)/.exec(c);if(!d)return null;c=Number(d[1]);if(!isFinite(c))return null;d=Number(d[2]);return isFinite(d)?{start:c,end:d}:null}
function ze(c){c=Number(c);return 0===c%1?c:null}function Ae(c){c=Number(c);return 0===c%1&&0<c?c:null}function Be(c){c=Number(c);return 0===c%1&&0<=c?c:null}function Ce(c){var d;c=(d=c.match(/^(\d+)\/(\d+)$/))?Number(d[1]/d[2]):Number(c);return isNaN(c)?null:c};var De={"urn:uuid:1077efec-c0b2-4d02-ace3-3c1e52e2fb4b":"org.w3.clearkey","urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed":"com.widevine.alpha","urn:uuid:9a04f079-9840-4286-ab92-e65be0885f95":"com.microsoft.playready","urn:uuid:f239e769-efa3-4850-9c16-a903c6932efb":"com.adobe.primetime"};
function Ee(c,d,e){c=Fe(c);var f=null,g=[],h=[],k=c.map(function(c){return c.keyId}).filter(Eb);if(k.length&&1<k.filter(Fb).length)throw new C(2,4,4010);e||(h=c.filter(function(c){return"urn:mpeg:dash:mp4protection:2011"==c.Pc?(f=c.init||f,!1):!0}),h.length&&(g=Ge(f,d,h),0==g.length&&(g=[Gb("",f)])));!c.length||!e&&h.length||(g=I.values(De).filter(function(c){return"org.w3.clearkey"!=c}).map(function(c){return Gb(c,f)}));var l=k[0]||null;l&&g.forEach(function(c){c.initData.forEach(function(c){c.keyId=
l})});return{nc:l,hf:f,drmInfos:g,sc:!0}}function He(c,d,e,f){var g=Ee(c,d,f);if(e.sc){c=1==e.drmInfos.length&&!e.drmInfos[0].keySystem;d=0==g.drmInfos.length;if(0==e.drmInfos.length||c&&!d)e.drmInfos=g.drmInfos;e.sc=!1}else if(0<g.drmInfos.length&&(e.drmInfos=e.drmInfos.filter(function(c){return g.drmInfos.some(function(d){return d.keySystem==c.keySystem})}),0==e.drmInfos.length))throw new C(2,4,4008);return g.nc||e.nc}
function Ge(c,d,e){return e.map(function(e){var f=De[e.Pc];return f?[Gb(f,e.init||c)]:d(e.node)||[]}).reduce(Cb,[])}
function Fe(c){return c.map(function(c){var d=c.getAttribute("schemeIdUri"),f=ue(c,"urn:mpeg:cenc:2013","default_KID"),g=te(c).map(ve);if(!d)return null;d=d.toLowerCase();if(f&&(f=f.replace(/-/g,"").toLowerCase(),0<=f.indexOf(" ")))throw new C(2,4,4009);var h=[];try{h=g.map(function(c){return{initDataType:"cenc",initData:Wb(c),keyId:null}})}catch(k){throw new C(2,4,4007);}return{node:c,Pc:d,keyId:f,init:0<h.length?h:null}}).filter(Eb)};function Ie(c,d,e,f,g){var h={RepresentationID:d,Number:e,Bandwidth:f,Time:g};return c.replace(/\$(RepresentationID|Number|Bandwidth|Time)?(?:%0([0-9]+)([diouxX]))?\$/g,function(c,d,e,f){if("$$"==c)return"$";var g=h[d];if(null==g)return c;"RepresentationID"==d&&e&&(e=void 0);"Time"==d&&(g=Math.round(g));switch(f){case void 0:case "d":case "i":case "u":c=g.toString();break;case "o":c=g.toString(8);break;case "x":c=g.toString(16);break;case "X":c=g.toString(16).toUpperCase();break;default:c=g.toString()}e=
window.parseInt(e,10)||1;return Array(Math.max(0,e-c.length)+1).join("0")+c})}
function Je(c,d){var e=Ke(c,d,"timescale"),f=1;e&&(f=Ae(e)||1);e=Ke(c,d,"duration");(e=Ae(e||""))&&(e/=f);var g=Ke(c,d,"startNumber"),h=Number(Ke(c,d,"presentationTimeOffset"))||0,k=Be(g||"");if(null==g||null==k)k=1;var l=Le(c,d,"SegmentTimeline");g=null;if(l){g=f;var m=c.M.duration||Infinity;l=N(l,"S");for(var n=[],t=0,u=0;u<l.length;++u){var v=l[u],z=O(v,"t",Be),y=O(v,"d",Be);v=O(v,"r",ze);null!=z&&(z-=h);if(!y)break;z=null!=z?z:t;v=v||0;if(0>v)if(u+1<l.length){v=O(l[u+1],"t",Be);if(null==v)break;
else if(z>=v)break;v=Math.ceil((v-z)/y)-1}else{if(Infinity==m)break;else if(z/g>=m)break;v=Math.ceil((m*g-z)/y)-1}0<n.length&&z!=t&&(n[n.length-1].end=z/g);for(var qa=0;qa<=v;++qa)t=z+y,n.push({start:z/g,end:t/g,Xe:z}),z=t}g=n}return{timescale:f,T:e,Ea:k,da:h/f||0,ic:h,G:g}}function Ke(c,d,e){return[d(c.v),d(c.X),d(c.ba)].filter(Eb).map(function(c){return c.getAttribute(e)}).reduce(function(c,d){return c||d})}
function Le(c,d,e){return[d(c.v),d(c.X),d(c.ba)].filter(Eb).map(function(c){return se(c,e)}).reduce(function(c,d){return c||d})}function Me(c,d){var e=new DOMParser;try{var f=Lb(c);var g=e.parseFromString(f,"text/xml")}catch(k){}if(g&&g.documentElement.tagName==d)var h=g.documentElement;return h&&0<h.getElementsByTagName("parsererror").length?null:h}
function Ne(c,d,e,f,g,h){for(var k=ue(c,"http://www.w3.org/1999/xlink","href"),l=ue(c,"http://www.w3.org/1999/xlink","actuate")||"onRequest",m=0;m<c.attributes.length;m++){var n=c.attributes[m];"http://www.w3.org/1999/xlink"==n.namespaceURI&&(c.removeAttributeNS(n.namespaceURI,n.localName),--m)}if(5<=h)return $a(new C(2,4,4028));if("onLoad"!=l)return $a(new C(2,4,4027));var t=H([f],[k]);return g.request(0,rb(t,d)).Y(function(f){f=Me(f.data,c.tagName);if(!f)return $a(new C(2,4,4001,k));for(;c.childNodes.length;)c.removeChild(c.childNodes[0]);
for(;f.childNodes.length;){var l=f.childNodes[0];f.removeChild(l);c.appendChild(l)}for(l=0;l<f.attributes.length;l++){var n=f.attributes[l].nodeName,m=f.getAttribute(n);c.setAttribute(n,m)}return Oe(c,d,e,t[0],g,h+1)})}
function Oe(c,d,e,f,g,h){h=h||0;if(ue(c,"http://www.w3.org/1999/xlink","href")){var k=Ne(c,d,e,f,g,h);e&&(k=k.Y(void 0,function(){return Oe(c,d,e,f,g,h)}));return k}k=[];for(var l=0;l<c.childNodes.length;l++){var m=c.childNodes[l];m instanceof Element&&("urn:mpeg:dash:resolve-to-zero:2013"==ue(m,"http://www.w3.org/1999/xlink","href")?(c.removeChild(m),--l):"SegmentTimeline"!=m.tagName&&k.push(Oe(m,d,e,f,g,h)))}return db(k).Y(function(){return c})};function Pe(c,d,e){this.c=c;this.b=d;this.a=e}A("shaka.media.InitSegmentReference",Pe);Pe.prototype.Eb=function(){return this.c()};Pe.prototype.createUris=Pe.prototype.Eb;Pe.prototype.Kb=function(){return this.b};Pe.prototype.getStartByte=Pe.prototype.Kb;Pe.prototype.Ib=function(){return this.a};Pe.prototype.getEndByte=Pe.prototype.Ib;function P(c,d,e,f,g,h){this.position=c;this.startTime=d;this.endTime=e;this.c=f;this.b=g;this.a=h}A("shaka.media.SegmentReference",P);P.prototype.V=function(){return this.position};
P.prototype.getPosition=P.prototype.V;P.prototype.Lb=function(){return this.startTime};P.prototype.getStartTime=P.prototype.Lb;P.prototype.qd=function(){return this.endTime};P.prototype.getEndTime=P.prototype.qd;P.prototype.Eb=function(){return this.c()};P.prototype.createUris=P.prototype.Eb;P.prototype.Kb=function(){return this.b};P.prototype.getStartByte=P.prototype.Kb;P.prototype.Ib=function(){return this.a};P.prototype.getEndByte=P.prototype.Ib;function Q(c,d){this.D=c;this.b=d==Qe;this.a=0}A("shaka.util.DataViewReader",Q);var Qe=1;Q.Endianness={cf:0,df:Qe};Q.prototype.ja=function(){return this.a<this.D.byteLength};Q.prototype.hasMoreData=Q.prototype.ja;Q.prototype.V=function(){return this.a};Q.prototype.getPosition=Q.prototype.V;Q.prototype.rd=function(){return this.D.byteLength};Q.prototype.getLength=Q.prototype.rd;Q.prototype.ca=function(){try{var c=this.D.getUint8(this.a);this.a+=1;return c}catch(d){Re()}};Q.prototype.readUint8=Q.prototype.ca;
Q.prototype.bb=function(){try{var c=this.D.getUint16(this.a,this.b);this.a+=2;return c}catch(d){Re()}};Q.prototype.readUint16=Q.prototype.bb;Q.prototype.B=function(){try{var c=this.D.getUint32(this.a,this.b);this.a+=4;return c}catch(d){Re()}};Q.prototype.readUint32=Q.prototype.B;Q.prototype.Lc=function(){try{var c=this.D.getInt32(this.a,this.b);this.a+=4;return c}catch(d){Re()}};Q.prototype.readInt32=Q.prototype.Lc;
Q.prototype.Ra=function(){try{if(this.b){var c=this.D.getUint32(this.a,!0);var d=this.D.getUint32(this.a+4,!0)}else d=this.D.getUint32(this.a,!1),c=this.D.getUint32(this.a+4,!1)}catch(e){Re()}if(2097151<d)throw new C(2,3,3001);this.a+=8;return d*Math.pow(2,32)+c};Q.prototype.readUint64=Q.prototype.Ra;Q.prototype.Da=function(c){this.a+c>this.D.byteLength&&Re();var d=new Uint8Array(this.D.buffer,this.D.byteOffset+this.a,c);this.a+=c;return new Uint8Array(d)};Q.prototype.readBytes=Q.prototype.Da;
Q.prototype.F=function(c){this.a+c>this.D.byteLength&&Re();this.a+=c};Q.prototype.skip=Q.prototype.F;Q.prototype.Oc=function(c){this.a<c&&Re();this.a-=c};Q.prototype.rewind=Q.prototype.Oc;Q.prototype.seek=function(c){(0>c||c>this.D.byteLength)&&Re();this.a=c};Q.prototype.seek=Q.prototype.seek;Q.prototype.Yb=function(){for(var c=this.a;this.ja()&&0!=this.D.getUint8(this.a);)this.a+=1;c=new Uint8Array(this.D.buffer,this.D.byteOffset+c,this.a-c);this.a+=1;return Lb(c)};
Q.prototype.readTerminatedString=Q.prototype.Yb;function Re(){throw new C(2,3,3E3);};function R(){this.c=[];this.b=[];this.a=!1}A("shaka.util.Mp4Parser",R);R.prototype.C=function(c,d){var e=Se(c);this.c[e]=0;this.b[e]=d;return this};R.prototype.box=R.prototype.C;R.prototype.Z=function(c,d){var e=Se(c);this.c[e]=1;this.b[e]=d;return this};R.prototype.fullBox=R.prototype.Z;R.prototype.stop=function(){this.a=!0};R.prototype.stop=R.prototype.stop;
R.prototype.parse=function(c,d){var e=new Uint8Array(c);e=new Q(new DataView(e.buffer,e.byteOffset,e.byteLength),0);for(this.a=!1;e.ja()&&!this.a;)this.xb(0,e,d)};R.prototype.parse=R.prototype.parse;
R.prototype.xb=function(c,d,e){var f=d.V(),g=d.B(),h=d.B();switch(g){case 0:g=d.D.byteLength-f;break;case 1:g=d.Ra()}var k=this.b[h];if(k){var l=null,m=null;1==this.c[h]&&(m=d.B(),l=m>>>24,m&=16777215);h=f+g;e&&h>d.D.byteLength&&(h=d.D.byteLength);h-=d.V();d=0<h?d.Da(h):new Uint8Array(0);d=new Q(new DataView(d.buffer,d.byteOffset,d.byteLength),0);k({parser:this,partialOkay:e||!1,version:l,flags:m,reader:d,size:g,start:f+c})}else d.F(Math.min(f+g-d.V(),d.D.byteLength-d.V()))};
R.prototype.parseNext=R.prototype.xb;function S(c){for(;c.reader.ja()&&!c.parser.a;)c.parser.xb(c.start,c.reader,c.partialOkay)}R.children=S;function Te(c){for(var d=c.reader.B();0<d&&!c.parser.a;--d)c.parser.xb(c.start,c.reader,c.partialOkay)}R.sampleDescription=Te;function Ue(c){return function(d){c(d.reader.Da(d.reader.D.byteLength-d.reader.V()))}}R.allData=Ue;function Se(c){for(var d=0,e=0;e<c.length;e++)d=d<<8|c.charCodeAt(e);return d}
function Ve(c){return String.fromCharCode(c>>24&255,c>>16&255,c>>8&255,c&255)}R.typeToString=Ve;function We(c,d,e,f){var g,h=(new R).Z("sidx",function(c){g=Xe(d,f,e,c)});c&&h.parse(c);if(g)return g;throw new C(2,3,3004);}
function Xe(c,d,e,f){var g=[];f.reader.F(4);var h=f.reader.B();if(0==h)throw new C(2,3,3005);if(0==f.version){var k=f.reader.B();var l=f.reader.B()}else k=f.reader.Ra(),l=f.reader.Ra();f.reader.F(2);var m=f.reader.bb();c=c+f.size+l;for(l=0;l<m;l++){var n=f.reader.B(),t=(n&2147483648)>>>31;n&=2147483647;var u=f.reader.B();f.reader.F(4);if(1==t)throw new C(2,3,3006);g.push(new P(g.length,k/h-d,(k+u)/h-d,function(){return e},c,c+n-1));k+=u;c+=n}f.parser.stop();return g};function T(c){this.a=c}A("shaka.media.SegmentIndex",T);T.prototype.destroy=function(){this.a=null;return Promise.resolve()};T.prototype.destroy=T.prototype.destroy;T.prototype.find=function(c){for(var d=this.a.length-1;0<=d;--d){var e=this.a[d];if(c>=e.startTime&&c<e.endTime)return e.position}return this.a.length&&c<this.a[0].startTime?this.a[0].position:null};T.prototype.find=T.prototype.find;
T.prototype.get=function(c){if(0==this.a.length)return null;c-=this.a[0].position;return 0>c||c>=this.a.length?null:this.a[c]};T.prototype.get=T.prototype.get;T.prototype.offset=function(c){for(var d=0;d<this.a.length;++d)this.a[d].startTime+=c,this.a[d].endTime+=c};T.prototype.offset=T.prototype.offset;
T.prototype.Qb=function(c){for(var d=[],e=0,f=0;e<this.a.length&&f<c.length;){var g=this.a[e],h=c[f];g.startTime<h.startTime?(d.push(g),e++):(g.startTime>h.startTime?0==e&&d.push(h):(.1<Math.abs(g.endTime-h.endTime)?d.push(new P(g.position,h.startTime,h.endTime,h.c,h.b,h.a)):d.push(g),e++),f++)}for(;e<this.a.length;)d.push(this.a[e++]);if(d.length)for(e=d[d.length-1].position+1;f<c.length;)g=c[f++],g=new P(e++,g.startTime,g.endTime,g.c,g.b,g.a),d.push(g);else d=c;this.a=d};T.prototype.merge=T.prototype.Qb;
T.prototype.Gb=function(c){for(var d=0;d<this.a.length;++d)if(this.a[d].endTime>c){this.a.splice(0,d);return}this.a=[]};T.prototype.evict=T.prototype.Gb;function Ye(c,d){for(;c.a.length;)if(c.a[c.a.length-1].startTime>=d)c.a.pop();else break;for(;c.a.length;)if(0>=c.a[0].endTime)c.a.shift();else break;if(0!=c.a.length){var e=c.a[c.a.length-1];c.a[c.a.length-1]=new P(e.position,e.startTime,d,e.c,e.b,e.a)}};function Ze(c){this.b=c;this.a=new Q(c,0);$e||($e=[new Uint8Array([255]),new Uint8Array([127,255]),new Uint8Array([63,255,255]),new Uint8Array([31,255,255,255]),new Uint8Array([15,255,255,255,255]),new Uint8Array([7,255,255,255,255,255]),new Uint8Array([3,255,255,255,255,255,255]),new Uint8Array([1,255,255,255,255,255,255,255])])}var $e;Ze.prototype.ja=function(){return this.a.ja()};
function af(c){var d=bf(c);if(7<d.length)throw new C(2,3,3002);for(var e=0,f=0;f<d.length;f++)e=256*e+d[f];d=e;e=bf(c);a:{for(f=0;f<$e.length;f++)if(Zb(e,$e[f])){f=!0;break a}f=!1}if(f)e=c.b.byteLength-c.a.V();else{if(8==e.length&&e[1]&224)throw new C(2,3,3001);f=e[0]&(1<<8-e.length)-1;for(var g=1;g<e.length;g++)f=256*f+e[g];e=f}e=c.a.V()+e<=c.b.byteLength?e:c.b.byteLength-c.a.V();f=new DataView(c.b.buffer,c.b.byteOffset+c.a.V(),e);c.a.F(e);return new cf(d,f)}
function bf(c){var d=c.a.ca(),e;for(e=1;8>=e&&!(d&1<<8-e);e++);if(8<e)throw new C(2,3,3002);var f=new Uint8Array(e);f[0]=d;for(d=1;d<e;d++)f[d]=c.a.ca();return f}function cf(c,d){this.id=c;this.a=d}function df(c){if(8<c.a.byteLength)throw new C(2,3,3002);if(8==c.a.byteLength&&c.a.getUint8(0)&224)throw new C(2,3,3001);for(var d=0,e=0;e<c.a.byteLength;e++){var f=c.a.getUint8(e);d=256*d+f}return d};function ef(){}
ef.prototype.parse=function(c,d,e,f){var g;d=new Ze(new DataView(d));if(440786851!=af(d).id)throw new C(2,3,3008);var h=af(d);if(408125543!=h.id)throw new C(2,3,3009);d=h.a.byteOffset;h=new Ze(h.a);for(g=null;h.ja();){var k=af(h);if(357149030==k.id){g=k;break}}if(!g)throw new C(2,3,3010);h=new Ze(g.a);g=1E6;for(k=null;h.ja();){var l=af(h);if(2807729==l.id)g=df(l);else if(17545==l.id)if(k=l,4==k.a.byteLength)k=k.a.getFloat32(0);else if(8==k.a.byteLength)k=k.a.getFloat64(0);else throw new C(2,3,3003);
}if(null==k)throw new C(2,3,3011);h=g/1E9;g=k*h;c=af(new Ze(new DataView(c)));if(475249515!=c.id)throw new C(2,3,3007);return ff(c,d,h,g,e,f)};function ff(c,d,e,f,g,h){function k(){return g}var l=[];c=new Ze(c.a);for(var m=null,n=null;c.ja();){var t=af(c);if(187==t.id){var u=gf(t);u&&(t=e*u.Ye,u=d+u.se,null!=m&&l.push(new P(l.length,m-h,t-h,k,n,u-1)),m=t,n=u)}}null!=m&&l.push(new P(l.length,m-h,f-h,k,n,null));return l}
function gf(c){var d=new Ze(c.a);c=af(d);if(179!=c.id)throw new C(2,3,3013);c=df(c);d=af(d);if(183!=d.id)throw new C(2,3,3012);d=new Ze(d.a);for(var e=0;d.ja();){var f=af(d);if(241==f.id){e=df(f);break}}return{Ye:c,se:e}};function hf(c,d){var e=Le(c,d,"Initialization");if(!e)return null;var f=c.v.ea,g=e.getAttribute("sourceURL");g&&(f=H(c.v.ea,[g]));g=0;var h=null;if(e=O(e,"range",ye))g=e.start,h=e.end;return new Pe(function(){return f},g,h)}
function jf(c,d){var e=Number(Ke(c,kf,"presentationTimeOffset"))||0,f=Ke(c,kf,"timescale"),g=1;f&&(g=Ae(f)||1);e=e/g||0;f=hf(c,kf);var h=c.v.contentType;g=c.v.mimeType.split("/")[1];if("text"!=h&&"mp4"!=g&&"webm"!=g)throw new C(2,4,4006);if("webm"==g&&!f)throw new C(2,4,4005);h=Le(c,kf,"RepresentationIndex");var k=Ke(c,kf,"indexRange"),l=c.v.ea;k=ye(k||"");if(h){var m=h.getAttribute("sourceURL");m&&(l=H(c.v.ea,[m]));k=O(h,"range",ye,k)}if(!k)throw new C(2,4,4002);g=lf(c,d,f,l,k.start,k.end,g,e);return{createSegmentIndex:g.createSegmentIndex,
findSegmentPosition:g.findSegmentPosition,getSegmentReference:g.getSegmentReference,initSegmentReference:f,da:e}}
function lf(c,d,e,f,g,h,k,l){var m=c.presentationTimeline,n=!c.Ia||!c.M.Mb,t=c.M.index,u=c.M.duration,v=d,z=null;return{createSegmentIndex:function(){var c=[v(f,g,h),"webm"==k?v(e.c(),e.b,e.a):null];v=null;return Promise.all(c).then(function(c){var d=c[0];c=c[1]||null;d="mp4"==k?We(d,g,f,l):(new ef).parse(d,c,f,l);m.Na(d,0==t);z=new T(d);n&&Ye(z,u)})},findSegmentPosition:function(c){return z.find(c)},getSegmentReference:function(c){return z.get(c)}}}function kf(c){return c.cb};function mf(c,d){var e=hf(c,nf);var f=of(c);var g=Je(c,nf),h=g.Ea;0==h&&(h=1);var k=0;g.T?k=g.T*(h-1):g.G&&0<g.G.length&&(k=g.G[0].start);f={T:g.T,startTime:k,Ea:h,da:g.da,G:g.G,Ma:f};if(!f.T&&!f.G&&1<f.Ma.length)throw new C(2,4,4002);if(!f.T&&!c.M.duration&&!f.G&&1==f.Ma.length)throw new C(2,4,4002);if(f.G&&0==f.G.length)throw new C(2,4,4002);h=g=null;c.ba.id&&c.v.id&&(h=c.ba.id+","+c.v.id,g=d[h]);k=pf(c.M.duration,f.Ea,c.v.ea,f);g?(g.Qb(k),h=c.presentationTimeline.Xa(),g.Gb(h-c.M.start)):(c.presentationTimeline.Na(k,
0==c.M.index),g=new T(k),h&&c.Ia&&(d[h]=g));c.Ia&&c.M.Mb||Ye(g,c.M.duration);return{createSegmentIndex:Promise.resolve.bind(Promise),findSegmentPosition:g.find.bind(g),getSegmentReference:g.get.bind(g),initSegmentReference:e,da:f.da}}function nf(c){return c.va}
function pf(c,d,e,f){var g=f.Ma.length;f.G&&f.G.length!=f.Ma.length&&(g=Math.min(f.G.length,f.Ma.length));for(var h=[],k=f.startTime,l=0;l<g;l++){var m=f.Ma[l],n=H(e,[m.Hd]),t=void 0;t=null!=f.T?k+f.T:f.G?f.G[l].end:k+c;h.push(new P(l+d,k,t,function(c){return c}.bind(null,n),m.start,m.end));k=t}return h}
function of(c){return[c.v.va,c.X.va,c.ba.va].filter(Eb).map(function(c){return N(c,"SegmentURL")}).reduce(function(c,e){return 0<c.length?c:e}).map(function(d){d.getAttribute("indexRange")&&!c.wc&&(c.wc=!0);var e=d.getAttribute("media");d=O(d,"mediaRange",ye,{start:0,end:null});return{Hd:e,start:d.start,end:d.end}})};function qf(c,d,e,f){var g=rf(c);var h=Je(c,sf);var k=Ke(c,sf,"media"),l=Ke(c,sf,"index");h={T:h.T,timescale:h.timescale,Ea:h.Ea,da:h.da,ic:h.ic,G:h.G,Pb:k,Za:l};k=h.Za?1:0;k+=h.G?1:0;k+=h.T?1:0;if(0==k)throw new C(2,4,4002);1!=k&&(h.Za&&(h.G=null),h.T=null);if(!h.Za&&!h.Pb)throw new C(2,4,4002);if(h.Za){e=c.v.mimeType.split("/")[1];if("mp4"!=e&&"webm"!=e)throw new C(2,4,4006);if("webm"==e&&!g)throw new C(2,4,4005);f=Ie(h.Za,c.v.id,null,c.bandwidth||null,null);f=H(c.v.ea,[f]);c=lf(c,d,g,f,0,null,
e,h.da)}else h.T?(f||c.presentationTimeline.Sb(h.T),c=tf(c,h)):(k=d=null,c.ba.id&&c.v.id&&(k=c.ba.id+","+c.v.id,d=e[k]),l=uf(c,h),f=!c.Ia||!c.M.Mb,d?(f&&Ye(new T(l),c.M.duration),d.Qb(l),e=c.presentationTimeline.Xa(),d.Gb(e-c.M.start)):(c.presentationTimeline.Na(l,0==c.M.index),d=new T(l),k&&c.Ia&&(e[k]=d)),f&&Ye(d,c.M.duration),c={createSegmentIndex:Promise.resolve.bind(Promise),findSegmentPosition:d.find.bind(d),getSegmentReference:d.get.bind(d)});return{createSegmentIndex:c.createSegmentIndex,
findSegmentPosition:c.findSegmentPosition,getSegmentReference:c.getSegmentReference,initSegmentReference:g,da:h.da}}function sf(c){return c.fb}
function tf(c,d){var e=c.M.duration,f=d.T,g=d.Ea,h=d.timescale,k=d.Pb,l=c.bandwidth||null,m=c.v.id,n=c.v.ea;return{createSegmentIndex:Promise.resolve.bind(Promise),findSegmentPosition:function(c){return 0>c||e&&c>=e?null:Math.floor(c/f)},getSegmentReference:function(c){var d=c*f,t=d+f;e&&(t=Math.min(t,e));return 0>t||e&&d>=e?null:new P(c,d,t,function(){var e=Ie(k,m,c+g,l,d*h);return H(n,[e])},0,null)}}}
function uf(c,d){for(var e=[],f=0;f<d.G.length;f++){var g=f+d.Ea;e.push(new P(g,d.G[f].start,d.G[f].end,function(c,d,e,f,g,t){c=Ie(c,d,g,e,t);return H(f,[c]).map(function(c){return c.toString()})}.bind(null,d.Pb,c.v.id,c.bandwidth||null,c.v.ea,g,d.G[f].Xe+d.ic),0,null))}return e}function rf(c){var d=Ke(c,sf,"initialization");if(!d)return null;var e=c.v.id,f=c.bandwidth||null,g=c.v.ea;return new Pe(function(){var c=Ie(d,e,null,f,null);return H(g,[c])},0,null)};var vf={},wf={};A("shaka.media.ManifestParser.registerParserByExtension",function(c,d){wf[c]=d});A("shaka.media.ManifestParser.registerParserByMime",function(c,d){vf[c]=d});function xf(){var c={},d;for(d in vf)c[d]=!0;for(var e in wf)c[e]=!0;["application/dash+xml","application/x-mpegurl","application/vnd.apple.mpegurl","application/vnd.ms-sstr+xml"].forEach(function(d){c[d]=!!vf[d]});["mpd","m3u8","ism"].forEach(function(d){c[d]=!!wf[d]});return c}
function yf(c,d,e,f){var g=f;g||(f=(new Ja(c)).aa.split("/").pop().split("."),1<f.length&&(f=f.pop().toLowerCase(),g=wf[f]));if(g)return Promise.resolve(g);e=rb([c],e);e.method="HEAD";return d.request(0,e).promise.then(function(d){(d=d.headers["content-type"])&&(d=d.toLowerCase());return(g=vf[d])?g:Promise.reject(new C(2,4,4E3,c))},function(c){c.severity=2;return Promise.reject(c)})};function U(c,d){this.g=c;this.l=d;this.f=this.b=Infinity;this.a=1;this.j=this.c=0;this.i=!0;this.h=0}A("shaka.media.PresentationTimeline",U);U.prototype.U=function(){return this.b};U.prototype.getDuration=U.prototype.U;U.prototype.ma=function(c){this.b=c};U.prototype.setDuration=U.prototype.ma;U.prototype.wd=function(){return this.g};U.prototype.getPresentationStartTime=U.prototype.wd;U.prototype.Rc=function(c){this.j=c};U.prototype.setClockOffset=U.prototype.Rc;
U.prototype.yb=function(c){this.i=c};U.prototype.setStatic=U.prototype.yb;U.prototype.dc=function(c){this.f=c};U.prototype.setSegmentAvailabilityDuration=U.prototype.dc;U.prototype.Sc=function(c){this.l=c};U.prototype.setDelay=U.prototype.Sc;U.prototype.Na=function(c,d){0!=c.length&&(d&&(this.c=Math.max(this.c,c[0].startTime)),this.a=c.reduce(function(c,d){return Math.max(c,d.endTime-d.startTime)},this.a))};U.prototype.notifySegments=U.prototype.Na;
U.prototype.Sb=function(c){this.a=Math.max(this.a,c)};U.prototype.notifyMaxSegmentDuration=U.prototype.Sb;U.prototype.offset=function(c){this.c+=c};U.prototype.offset=U.prototype.offset;U.prototype.S=function(){return Infinity==this.b&&!this.i};U.prototype.isLive=U.prototype.S;U.prototype.Aa=function(){return Infinity!=this.b&&!this.i};U.prototype.isInProgress=U.prototype.Aa;U.prototype.Xa=function(){if(Infinity==this.f)return this.h;var c=this.Ka()-this.f;return Math.max(this.h,c)};
U.prototype.getSegmentAvailabilityStart=U.prototype.Xa;U.prototype.Tc=function(c){this.h=c};U.prototype.setUserSeekStart=U.prototype.Tc;U.prototype.Ka=function(){return this.S()||this.Aa()?Math.min(Math.max(0,(Date.now()+this.j)/1E3-this.a-this.g),this.b):this.b};U.prototype.getSegmentAvailabilityEnd=U.prototype.Ka;U.prototype.Wa=function(c){var d=Math.max(this.c,this.h);if(Infinity==this.f)return d;var e=this.Ka()-this.f;c=Math.min(e+c,this.oa());return Math.max(d,c)};
U.prototype.getSafeSeekRangeStart=U.prototype.Wa;U.prototype.Ja=function(){return this.Wa(0)};U.prototype.getSeekRangeStart=U.prototype.Ja;U.prototype.oa=function(){var c=this.S()||this.Aa()?this.l:0;return Math.max(0,this.Ka()-c)};U.prototype.getSeekRangeEnd=U.prototype.oa;function zf(){this.a=this.b=null;this.h=[];this.c=null;this.j=[];this.i=1;this.l={};this.m=0;this.o=new Ca(5);this.g=null;this.f=new nb}A("shaka.dash.DashParser",zf);p=zf.prototype;p.configure=function(c){this.b=c};p.start=function(c,d){this.h=[c];this.a=d;return Af(this).then(function(c){this.a&&Bf(this,c);return this.c}.bind(this))};p.stop=function(){this.b=this.a=null;this.h=[];this.c=null;this.j=[];this.l={};null!=this.g&&(window.clearTimeout(this.g),this.g=null);return this.f.destroy()};
p.update=function(){Af(this)["catch"](function(c){if(this.a)this.a.onError(c)}.bind(this))};p.onExpirationUpdated=function(){};function Af(c){var d=Date.now(),e=c.a.networkingEngine.request(0,rb(c.h,c.b.retryParameters));ob(c.f,e);return e.promise.then(function(d){if(c.a)return Cf(c,d.data,d.uri)}).then(function(){var e=(Date.now()-d)/1E3;Da(c.o,1,e);return e})}
function Cf(c,d,e){d=Me(d,"MPD");if(!d)throw new C(2,4,4001,e);d=Oe(d,c.b.retryParameters,c.b.dash.xlinkFailGracefully,e,c.a.networkingEngine);ob(c.f,d);return d.promise.then(function(d){return Df(c,d,e)})}
function Df(c,d,e){e=[e];var f=N(d,"Location").map(ve).filter(Eb);0<f.length&&(e=H(e,f),c.h=e);f=N(d,"BaseURL").map(ve);e=H(e,f);var g=O(d,"minBufferTime",xe);c.m=O(d,"minimumUpdatePeriod",xe,-1);var h=O(d,"availabilityStartTime",we);f=O(d,"timeShiftBufferDepth",xe);var k=O(d,"suggestedPresentationDelay",xe),l=O(d,"maxSegmentDuration",xe),m=d.getAttribute("type")||"static";if(c.c)var n=c.c.presentationTimeline;else{var t=Math.max(c.b.dash.defaultPresentationDelay,1.5*g);n=new U(h,null!=k?k:t)}h=Ef(c,
{Ia:"static"!=m,presentationTimeline:n,ba:null,M:null,X:null,v:null,bandwidth:0,wc:!1},e,d);k=h.duration;var u=h.periods;n.yb("static"==m);"static"!=m&&h.oc||n.ma(k||Infinity);(m=n.S())&&!isNaN(c.b.availabilityWindowOverride)&&(f=c.b.availabilityWindowOverride);null==f&&(f=Infinity);n.dc(f);n.Sb(l||1);if(c.c)return Promise.resolve();d=N(d,"UTCTiming");return Ff(c,e,d,m).then(function(c){this.a&&(n.Rc(c),this.c={presentationTimeline:n,periods:u,offlineSessionIds:[],minBufferTime:g||0})}.bind(c))}
function Ef(c,d,e,f){var g=O(f,"mediaPresentationDuration",xe),h=[],k=0;f=N(f,"Period");for(var l=0;l<f.length;l++){var m=f[l];k=O(m,"start",xe,k);var n=O(m,"duration",xe),t=null;if(l!=f.length-1){var u=O(f[l+1],"start",xe);null!=u&&(t=u-k)}else null!=g&&(t=g-k);null==t&&(t=n);m=Gf(c,d,e,{start:k,duration:t,node:m,index:l,Mb:null==t||l==f.length-1});h.push(m);n=d.ba.id;-1==c.j.indexOf(n)&&(c.j.push(n),c.c&&(c.a.filterNewPeriod(m),c.c.periods.push(m)));if(null==t){k=null;break}k+=t}null==c.c&&c.a.filterAllPeriods(h);
return null!=g?{periods:h,duration:g,oc:!1}:{periods:h,duration:k,oc:!0}}
function Gf(c,d,e,f){d.ba=Hf(f.node,null,e);d.M=f;d.ba.id||(d.ba.id="__shaka_period_"+f.start);N(f.node,"EventStream").forEach(c.je.bind(c,f.start,f.duration));e=N(f.node,"AdaptationSet").map(c.he.bind(c,d)).filter(Eb);var g=e.map(function(c){return c.ue}).reduce(Cb,[]),h=g.filter(Fb);if(d.Ia&&g.length!=h.length)throw new C(2,4,4018);var k=e.filter(function(c){return!c.hc});e.filter(function(c){return c.hc}).forEach(function(c){var d=c.streams[0],e=c.hc;k.forEach(function(c){c.id==e&&c.streams.forEach(function(c){c.trickModeVideo=
d})})});e=If(k,"video");g=If(k,"audio");if(!e.length&&!g.length)throw new C(2,4,4004);g.length||(g=[null]);e.length||(e=[null]);d=[];for(h=0;h<g.length;h++)for(var l=0;l<e.length;l++)Jf(c,g[h],e[l],d);c=If(k,"text");e=[];for(g=0;g<c.length;g++)e.push.apply(e,c[g].streams);return{startTime:f.start,textStreams:e,variants:d}}function If(c,d){return c.filter(function(c){return c.contentType==d})}
function Jf(c,d,e,f){if(d||e)if(d&&e){var g=d.drmInfos;var h=e.drmInfos;if(g.length&&h.length?0<vc(g,h).length:1){h=vc(d.drmInfos,e.drmInfos);for(var k=0;k<d.streams.length;k++)for(var l=0;l<e.streams.length;l++)g=(e.streams[l].bandwidth||0)+(d.streams[k].bandwidth||0),g={id:c.i++,language:d.language,primary:d.Ob||e.Ob,audio:d.streams[k],video:e.streams[l],bandwidth:g,drmInfos:h,allowedByApplication:!0,allowedByKeySystem:!0},f.push(g)}}else for(h=d||e,k=0;k<h.streams.length;k++)g=h.streams[k].bandwidth||
0,g={id:c.i++,language:h.language||"und",primary:h.Ob,audio:d?h.streams[k]:null,video:e?h.streams[k]:null,bandwidth:g,drmInfos:h.drmInfos,allowedByApplication:!0,allowedByKeySystem:!0},f.push(g)}
p.he=function(c,d){c.X=Hf(d,c.ba,null);var e=!1,f=N(d,"Role"),g=f.map(function(c){return c.getAttribute("value")}).filter(Eb),h=void 0,k="text"==c.X.contentType;k&&(h="subtitle");for(var l=0;l<f.length;l++){var m=f[l].getAttribute("schemeIdUri");if(null==m||"urn:mpeg:dash:role:2011"==m)switch(m=f[l].getAttribute("value"),m){case "main":e=!0;break;case "caption":case "subtitle":h=m}}var n=null,t=!1;N(d,"EssentialProperty").forEach(function(c){"http://dashif.org/guidelines/trickmode"==c.getAttribute("schemeIdUri")?
n=c.getAttribute("value"):t=!0});if(t)return null;f=N(d,"ContentProtection");var u=Ee(f,this.b.dash.customScheme,this.b.dash.ignoreDrmInfo);f=nd(d.getAttribute("lang")||"und");m=d.getAttribute("label");l=N(d,"Representation");g=l.map(this.ke.bind(this,c,u,h,f,m,e,g)).filter(function(c){return!!c});if(0==g.length){if(k)return null;throw new C(2,4,4003);}c.X.contentType&&"application"!=c.X.contentType||(c.X.contentType=Kf(g[0].mimeType,g[0].codecs),g.forEach(function(d){d.type=c.X.contentType}));g.forEach(function(c){u.drmInfos.forEach(function(d){c.keyId&&
d.keyIds.push(c.keyId)})});k=l.map(function(c){return c.getAttribute("id")}).filter(Eb);return{id:c.X.id||"__fake__"+this.i++,contentType:c.X.contentType,language:f,Ob:e,streams:g,drmInfos:u.drmInfos,hc:n,ue:k}};
p.ke=function(c,d,e,f,g,h,k,l){c.v=Hf(l,c.X,null);if(!Lf(c.v))return null;c.bandwidth=O(l,"bandwidth",Ae)||0;var m=c.v.contentType;m="text"==m||"application"==m;try{var n=this.ve.bind(this);if(c.v.cb)var t=jf(c,n);else if(c.v.va)t=mf(c,this.l);else if(c.v.fb)t=qf(c,n,this.l,!!this.c);else{var u=c.v.ea,v=c.M.duration||0;t={createSegmentIndex:Promise.resolve.bind(Promise),findSegmentPosition:function(c){return 0<=c&&c<v?1:null},getSegmentReference:function(c){return 1!=c?null:new P(1,0,v,function(){return u},
0,null)},initSegmentReference:null,da:0}}}catch(z){if(m&&4002==z.code)return null;throw z;}l=N(l,"ContentProtection");l=He(l,this.b.dash.customScheme,d,this.b.dash.ignoreDrmInfo);return{id:this.i++,createSegmentIndex:t.createSegmentIndex,findSegmentPosition:t.findSegmentPosition,getSegmentReference:t.getSegmentReference,initSegmentReference:t.initSegmentReference,presentationTimeOffset:t.da,mimeType:c.v.mimeType,codecs:c.v.codecs,frameRate:c.v.frameRate,bandwidth:c.bandwidth,width:c.v.width,height:c.v.height,
kind:e,encrypted:0<d.drmInfos.length,keyId:l,language:f,label:g,type:c.X.contentType,primary:h,trickModeVideo:null,containsEmsgBoxes:c.v.containsEmsgBoxes,roles:k,channelsCount:c.v.Tb}};p.Qe=function(){this.g=null;Af(this).then(function(c){this.a&&Bf(this,c)}.bind(this))["catch"](function(c){this.a&&(c.severity=1,this.a.onError(c),Bf(this,0))}.bind(this))};function Bf(c,d){0>c.m||(c.g=window.setTimeout(c.Qe.bind(c),1E3*Math.max(3,c.m-d,Ea(c.o))))}
function Hf(c,d,e){d=d||{contentType:"",mimeType:"",codecs:"",containsEmsgBoxes:!1,frameRate:void 0,Tb:null};e=e||d.ea;var f=N(c,"BaseURL").map(ve),g=c.getAttribute("contentType")||d.contentType,h=c.getAttribute("mimeType")||d.mimeType,k=c.getAttribute("codecs")||d.codecs,l=O(c,"frameRate",Ce)||d.frameRate,m=!!N(c,"InbandEventStream").length,n=N(c,"AudioChannelConfiguration");n=Mf(n)||d.Tb;g||(g=Kf(h,k));return{ea:H(e,f),cb:se(c,"SegmentBase")||d.cb,va:se(c,"SegmentList")||d.va,fb:se(c,"SegmentTemplate")||
d.fb,width:O(c,"width",Be)||d.width,height:O(c,"height",Be)||d.height,contentType:g,mimeType:h,codecs:k,frameRate:l,containsEmsgBoxes:m||d.containsEmsgBoxes,id:c.getAttribute("id"),Tb:n}}
function Mf(c){for(var d=0;d<c.length;++d){var e=c[d],f=e.getAttribute("schemeIdUri");if(f&&(e=e.getAttribute("value")))switch(f){case "urn:mpeg:dash:outputChannelPositionList:2012":return e.trim().split(/ +/).length;case "urn:mpeg:dash:23003:3:audio_channel_configuration:2011":case "urn:dts:dash:audio_channel_configuration:2012":f=parseInt(e,10);if(!f)continue;return f;case "tag:dolby.com,2014:dash:audio_channel_configuration:2011":case "urn:dolby:dash:audio_channel_configuration:2011":if(f=parseInt(e,
16)){for(c=0;f;)f&1&&++c,f>>=1;return c}}}return null}function Lf(c){var d=c.cb?1:0;d+=c.va?1:0;d+=c.fb?1:0;if(0==d)return"text"==c.contentType||"application"==c.contentType?!0:!1;1!=d&&(c.cb&&(c.va=null),c.fb=null);return!0}
function Nf(c,d,e,f){d=H(d,[e]);d=rb(d,c.b.retryParameters);d.method=f;d=c.a.networkingEngine.request(0,d);ob(c.f,d);return d.promise.then(function(c){if("HEAD"==f){if(!c.headers||!c.headers.date)return 0;c=c.headers.date}else c=Lb(c.data);c=Date.parse(c);return isNaN(c)?0:c-Date.now()})}
function Ff(c,d,e,f){e=e.map(function(c){return{scheme:c.getAttribute("schemeIdUri"),value:c.getAttribute("value")}});var g=c.b.dash.clockSyncUri;f&&!e.length&&g&&e.push({scheme:"urn:mpeg:dash:utc:http-head:2014",value:g});return Bb(e,function(c){var e=c.value;switch(c.scheme){case "urn:mpeg:dash:utc:http-head:2014":case "urn:mpeg:dash:utc:http-head:2012":return Nf(this,d,e,"HEAD");case "urn:mpeg:dash:utc:http-xsdate:2014":case "urn:mpeg:dash:utc:http-iso:2014":case "urn:mpeg:dash:utc:http-xsdate:2012":case "urn:mpeg:dash:utc:http-iso:2012":return Nf(this,
d,e,"GET");case "urn:mpeg:dash:utc:direct:2014":case "urn:mpeg:dash:utc:direct:2012":return c=Date.parse(e),isNaN(c)?0:c-Date.now();case "urn:mpeg:dash:utc:http-ntp:2014":case "urn:mpeg:dash:utc:ntp:2014":case "urn:mpeg:dash:utc:sntp:2014":return Promise.reject();default:return Promise.reject()}}.bind(c))["catch"](function(){return 0})}
p.je=function(c,d,e){var f=e.getAttribute("schemeIdUri")||"",g=e.getAttribute("value")||"",h=O(e,"timescale",Be)||1;N(e,"Event").forEach(function(e){var k=O(e,"presentationTime",Be)||0,m=O(e,"duration",Be)||0;k=k/h+c;m=k+m/h;null!=d&&(k=Math.min(k,c+d),m=Math.min(m,c+d));e={schemeIdUri:f,value:g,startTime:k,endTime:m,id:e.getAttribute("id")||"",eventElement:e};this.a.onTimelineRegionAdded(e)}.bind(this))};
p.ve=function(c,d,e){c=rb(c,this.b.retryParameters);null!=d&&(c.headers.Range="bytes="+d+"-"+(null!=e?e:""));d=this.a.networkingEngine.request(1,c);ob(this.f,d);return d.promise.then(function(c){return c.data})};function Kf(c,d){return J[Ib(c,d)]?"text":c.split("/")[0]}wf.mpd=zf;vf["application/dash+xml"]=zf;function Of(c,d,e,f){this.b=c;this.type=d;this.a=e;this.segments=f||null}function Pf(c,d,e,f){this.id=c;this.name=d;this.a=e;this.value=f||null}Pf.prototype.toString=function(){function c(c){return c.name+'="'+c.value+'"'}return this.value?"#"+this.name+":"+this.value:0<this.a.length?"#"+this.name+":"+this.a.map(c).join(","):"#"+this.name};function Qf(c,d){this.name=c;this.value=d}Pf.prototype.getAttribute=function(c){var d=this.a.filter(function(d){return d.name==c});return d.length?d[0]:null};
function Rf(c,d,e){e=e||null;return(c=c.getAttribute(d))?c.value:e}function Sf(c,d){this.b=d;this.a=c};function Tf(c,d){return c.filter(function(c){return c.name==d})}function Uf(c,d){var e=Tf(c,d);return e.length?e[0]:null}function Vf(c,d,e){return c.filter(function(c){var f=c.getAttribute("TYPE");c=c.getAttribute("GROUP-ID");return f.value==d&&c.value==e})};function Wf(c){this.b=c;this.a=0}function Xf(c){Yf(c,/[ \t]+/gm)}function Yf(c,d){d.lastIndex=c.a;var e=d.exec(c.b);e=null==e?null:{position:e.index,length:e[0].length,xe:e};if(c.a==c.b.length||null==e||e.position!=c.a)return null;c.a+=e.length;return e.xe}function Zf(c){return c.a==c.b.length?null:(c=Yf(c,/[^ \t\n]*/gm))?c[0]:null};function $f(){this.a=0}
function ag(c,d,e){d=Lb(d);d=d.replace(/\r\n|\r(?=[^\n]|$)/gm,"\n").trim();var f=d.split(/\n+/m);if(!/^#EXTM3U($|[ \t\n])/m.test(f[0]))throw new C(2,4,4015);d=0;for(var g=1;g<f.length;g++)if(!/^#(?!EXT)/m.test(f[g])){var h=bg(c,f[g]);--c.a;if(0<=cg.indexOf(h.name)){d=1;break}else"EXT-X-STREAM-INF"==h.name&&(g+=1)}g=[];for(h=1;h<f.length;)if(/^#(?!EXT)/m.test(f[h]))h+=1;else{var k=bg(c,f[h]);if(dg.includes(k.name)){if(1!=d)throw new C(2,4,4017);f=f.splice(h,f.length-h);c=eg(c,e,f,g);return new Of(e,
d,g,c)}g.push(k);h+=1;"EXT-X-STREAM-INF"==k.name&&(k.a.push(new Qf("URI",f[h])),h+=1)}return new Of(e,d,g)}function eg(c,d,e,f){var g=[],h=[];e.forEach(function(e){if(/^(#EXT)/.test(e))e=bg(c,e),0<=cg.indexOf(e.name)?f.push(e):h.push(e);else{if(/^#(?!EXT)/m.test(e))return[];e=H([d],[e.trim()])[0];g.push(new Sf(e,h));h=[]}});return g}
function bg(c,d){a:{var e=c.a++;var f=d.match(/^#(EXT[^:]*)(?::(.*))?$/);if(!f)throw new C(2,4,4016,d);var g=f[1],h=f[2];f=[];if(h&&0<=h.indexOf("=")){h=new Wf(h);for(var k,l=/([^=]+)=(?:"([^"]*)"|([^",]*))(?:,|$)/g;k=Yf(h,l);)f.push(new Qf(k[1],k[2]||k[3]))}else if(h){e=new Pf(e,g,f,h);break a}e=new Pf(e,g,f)}return e}var cg="EXT-X-TARGETDURATION EXT-X-MEDIA-SEQUENCE EXT-X-DISCONTINUITY-SEQUENCE EXT-X-PLAYLIST-TYPE EXT-X-MAP EXT-X-I-FRAMES-ONLY EXT-X-ENDLIST".split(" "),dg="EXTINF EXT-X-BYTERANGE EXT-X-DISCONTINUITY EXT-X-PROGRAM-DATE-TIME EXT-X-KEY EXT-X-DATERANGE".split(" ");function fg(c){try{var d=fg.parse(c);return bb({uri:c,data:d.data,headers:{"content-type":d.contentType}})}catch(e){return $a(e)}}A("shaka.net.DataUriPlugin",fg);
fg.parse=function(c){var d=c.split(":");if(2>d.length||"data"!=d[0])throw new C(2,1,1004,c);d=d.slice(1).join(":").split(",");if(2>d.length)throw new C(2,1,1004,c);var e=d[0];d=window.decodeURIComponent(d.slice(1).join(","));e=e.split(";");var f=null;1<e.length&&(f=e[1]);if("base64"==f)c=Wb(d).buffer;else{if(f)throw new C(2,1,1005,c);c=Pb(d)}return{data:c,contentType:e[0]}};qb("data",fg);function gg(){this.g=this.c=null;this.N=1;this.w=new Map;this.L=new Set;this.a=new Map;this.b=null;this.s="";this.o=new $f;this.j=this.i=null;this.f=hg;this.m=null;this.l=0;this.A=Infinity;this.h=new nb;this.H=[]}A("shaka.hls.HlsParser",gg);p=gg.prototype;p.configure=function(c){this.g=c};p.start=function(c,d){this.c=d;return ig(this,c).then(function(c){this.s=c.uri;return kg(this,c.data).then(function(){lg(this,this.i);return this.m}.bind(this))}.bind(this))};
p.stop=function(){this.g=this.c=null;this.w.clear();this.L.clear();this.a.clear();this.m=null;return this.h.destroy()};p.update=function(){if(this.f!=mg.ta){for(var c=[],d=q(this.a.values()),e=d.next();!e.done;e=d.next())c.push(ng(this,e.value));return Promise.all(c)}};
function ng(c,d){ig(c,d.dd).then(function(c){var e=mg,g=ag(this.o,c.data,c.uri);if(1!=g.type)throw new C(2,4,4017);c=Uf(g.a,"EXT-X-MEDIA-SEQUENCE");var h=d.stream;og(this,d.zb,g,c?Number(c.value):0,h.mimeType,h.codecs).then(function(c){d.eb.a=c;c=c[c.length-1];Uf(g.a,"EXT-X-ENDLIST")&&(pg(this,e.ta),this.b.ma(c.endTime))}.bind(this))}.bind(c))}p.onExpirationUpdated=function(){};
function kg(c,d){var e=ag(c.o,d,c.s);if(0!=e.type)throw new C(2,4,4022);return qg(c,e).then(function(c){this.c.filterAllPeriods([c]);for(var d=Infinity,e=0,f=0,l=Infinity,m=q(this.a.values()),n=m.next();!n.done;n=m.next())n=n.value,d=Math.min(d,n.Rb),e=Math.max(e,n.Rb),f=Math.max(f,n.Gd),"text"!=n.stream.type&&(l=Math.min(l,n.duration));n=null;m=0;this.f!=mg.ta&&(n=Date.now()/1E3-f,m=3*this.l);this.b=new U(n,m);this.b.yb(this.f==mg.ta);rg(this);if(this.f!=mg.ta){d=3*this.l;this.b.Sc(d);this.i=this.A;
this.f==mg.jc&&(isNaN(this.g.availabilityWindowOverride)||(d=this.g.availabilityWindowOverride),this.b.dc(d));for(d=0;95443.7176888889<=e;)d+=95443.7176888889,e-=95443.7176888889;if(d)for(e=q(this.a.values()),n=e.next();!n.done;n=e.next())l=n.value,95443.7176888889>l.Rb&&(l.stream.presentationTimeOffset=-d,l.eb.offset(d))}else for(this.b.ma(l),this.b.offset(-d),e=q(this.a.values()),n=e.next();!n.done;n=e.next())f=n.value,f.stream.presentationTimeOffset=d,f.eb.offset(-d),Ye(f.eb,l);this.m={presentationTimeline:this.b,
periods:[c],offlineSessionIds:[],minBufferTime:0}}.bind(c))}function qg(c,d){var e=d.a,f=Tf(d.a,"EXT-X-MEDIA").filter(function(c){return"SUBTITLES"==sg(c,"TYPE")}.bind(c)).map(function(c){return tg(this,c)}.bind(c));return Promise.all(f).then(function(c){var f=Tf(e,"EXT-X-STREAM-INF").map(function(c){return ug(this,c,d)}.bind(this));return Promise.all(f).then(function(d){return{startTime:0,variants:d.reduce(Cb,[]),textStreams:c}}.bind(this))}.bind(c))}
function ug(c,d,e){var f=Rf(d,"CODECS","avc1.42E01E,mp4a.40.2").split(/\s*,\s*/),g=d.getAttribute("RESOLUTION"),h=null,k=null,l=Rf(d,"FRAME-RATE"),m=Number(sg(d,"BANDWIDTH"));if(g){var n=g.value.split("x");h=n[0];k=n[1]}e=Tf(e.a,"EXT-X-MEDIA");e=e.filter(function(c){return"CLOSED-CAPTIONS"!=sg(c,"TYPE")});e=e.filter(function(c){var d=Rf(c,"URI")||"";return"SUBTITLES"==(Rf(c,"TYPE")||"")||""!=d});var t=Rf(d,"AUDIO"),u=Rf(d,"VIDEO");t?e=Vf(e,"AUDIO",t):u&&(e=Vf(e,"VIDEO",u));if(n=vg("text",f)){var v=
Rf(d,"SUBTITLES");v&&(v=Vf(e,"SUBTITLES",v),v.length&&(c.w.get(v[0].id).stream.codecs=n));f.splice(f.indexOf(n),1)}e=e.map(function(c){return wg(this,c,f)}.bind(c));var z=[],y=[];return Promise.all(e).then(function(c){t?z=c:u&&(y=c);c=!1;if(z.length||y.length)if(z.length)if(sg(d,"URI")==z[0].zb){var e="audio";c=!0}else e="video";else e="audio";else 1==f.length?(e=vg("video",f),e=g||l||e?"video":"audio"):(e="video",f=[f.join(",")]);return c?Promise.resolve():xg(this,d,f,e)}.bind(c)).then(function(c){c&&
("audio"==c.stream.type?z=[c]:y=[c]);y&&yg(y);z&&yg(z);return zg(this,z,y,m,h,k,l)}.bind(c))}function yg(c){c.forEach(function(c){var d=c.stream.codecs.split(",");d=d.filter(function(c){return"mp4a.40.34"!=c});c.stream.codecs=d.join(",")})}
function zg(c,d,e,f,g,h,k){e.forEach(function(c){if(c=c.stream)c.width=Number(g)||void 0,c.height=Number(h)||void 0,c.frameRate=Number(k)||void 0}.bind(c));d.length||(d=[null]);e.length||(e=[null]);for(var l=[],m=0;m<d.length;m++)for(var n=0;n<e.length;n++){var t=d[m]?d[m].stream:null,u=e[n]?e[n].stream:null,v=d[m]?d[m].drmInfos:null,z=e[n]?e[n].drmInfos:null,y=void 0;if(t&&u)if(v.length&&z.length?0<vc(v,z).length:1)y=vc(v,z);else continue;else t?y=v:u&&(y=z);v=(e[m]?e[m].zb:"")+" - "+(d[m]?d[m].zb:
"");c.L.has(v)||(t=Ag(c,t,u,f,y),l.push(t),c.L.add(v))}return l}function Ag(c,d,e,f,g){return{id:c.N++,language:d?d.language:"und",primary:!!d&&d.primary||!!e&&e.primary,audio:d,video:e,bandwidth:f,drmInfos:g,allowedByApplication:!0,allowedByKeySystem:!0}}function tg(c,d){sg(d,"TYPE");return wg(c,d,[]).then(function(c){return c.stream})}
function wg(c,d,e){var f=sg(d,"URI");if(c.a.has(f))return Promise.resolve(c.a.get(f));var g=sg(d,"TYPE").toLowerCase();"subtitles"==g&&(g="text");var h=nd(Rf(d,"LANGUAGE","und")),k=Rf(d,"NAME"),l=d.getAttribute("DEFAULT"),m=d.getAttribute("AUTOSELECT"),n=Rf(d,"CHANNELS");return Bg(c,f,e,g,h,!!l||!!m,k,"audio"==g?Cg(n):null).then(function(c){if(this.a.has(f))return this.a.get(f);this.w.set(d.id,c);this.a.set(f,c);return c}.bind(c))}
function Cg(c){if(!c)return null;c=c.split("/")[0];return parseInt(c,10)}function xg(c,d,e,f){var g=sg(d,"URI");return c.a.has(g)?Promise.resolve(c.a.get(g)):Bg(c,g,e,f,"und",!1,null,null).then(function(c){if(this.a.has(g))return this.a.get(g);this.a.set(g,c);return c}.bind(c))}
function Bg(c,d,e,f,g,h,k,l){var m=H([c.s],[d])[0],n,t="",u;return ig(c,m).then(function(d){m=d.uri;n=ag(c.o,d.data,m);if(1!=n.type)throw new C(2,4,4017);d=n;var g=mg,h=Uf(d.a,"EXT-X-PLAYLIST-TYPE"),k=Uf(d.a,"EXT-X-ENDLIST");k=h&&"VOD"==h.value||k;h=h&&"EVENT"==h.value&&!k;h=!k&&!h;k?pg(c,g.ta):(h?pg(c,g.jc):pg(c,g.Zc),d=Dg(d.a,"EXT-X-TARGETDURATION"),d=Number(d.value),c.l=Math.max(d,c.l),c.A=Math.min(d,c.A));if(1==e.length)t=e[0];else if(d=vg(f,e),null!=d)t=d;else throw new C(2,4,4025,e);return Eg(c,
f,t,n)}).then(function(e){u=e;e=Uf(n.a,"EXT-X-MEDIA-SEQUENCE");return og(c,d,n,e?Number(e.value):0,u,t)}).then(function(e){var v=e[0].startTime,y=e[e.length-1].endTime,qa=y-v;e=new T(e);var Dc=Fg(n),jg=void 0;"text"==f&&(jg="subtitle");var Sd=[];n.segments.forEach(function(c){c=Tf(c.b,"EXT-X-KEY");Sd.push.apply(Sd,c)});var Td=!1,Ud=[],Rb=null;Sd.forEach(function(c){if("NONE"!=sg(c,"METHOD")){Td=!0;var d=sg(c,"KEYFORMAT");if(c=(d=Gg[d])?d(c):null)c.keyIds.length&&(Rb=c.keyIds[0]),Ud.push(c)}});if(Td&&
!Ud.length)throw new C(2,4,4026);return{stream:{id:c.N++,createSegmentIndex:Promise.resolve.bind(Promise),findSegmentPosition:e.find.bind(e),getSegmentReference:e.get.bind(e),initSegmentReference:Dc,presentationTimeOffset:0,mimeType:u,codecs:t,kind:jg,encrypted:Td,keyId:Rb,language:g,label:k||null,type:f,primary:h,trickModeVideo:null,containsEmsgBoxes:!1,frameRate:void 0,width:void 0,height:void 0,bandwidth:void 0,roles:[],channelsCount:l},eb:e,drmInfos:Ud,zb:d,dd:m,Rb:v,Gd:y,duration:qa}})}
function Fg(c){var d=Tf(c.a,"EXT-X-MAP");if(!d.length)return null;if(1<d.length)throw new C(2,4,4020);d=d[0];var e=sg(d,"URI"),f=H([c.b],[e])[0];c=0;e=null;if(d=Rf(d,"BYTERANGE"))c=d.split("@"),d=Number(c[0]),c=Number(c[1]),e=c+d-1;return new Pe(function(){return[f]},c,e)}
function Hg(c,d,e,f){var g=d.b,h=d.a;d=Dg(g,"EXTINF").value.split(",");d=f+Number(d[0]);var k=0,l=null;if(g=Uf(g,"EXT-X-BYTERANGE"))k=g.value.split("@"),g=Number(k[0]),k=k[1]?Number(k[1]):c.a+1,l=k+g-1;return new P(e,f,d,function(){return[h]},k,l)}function rg(c){c.b&&(c.H.forEach(function(d){c.b.Na(d,!0)}),c.H=[])}
function og(c,d,e,f,g,h){var k=e.segments,l=[],m=k[0].a,n=Hg(null,k[0],f,0);e=Fg(e);return Ig(c,d,e,n,g,h).then(function(c){m.split("/").pop();for(var d=0;d<k.length;++d){var e=l[l.length-1];e=Hg(e,k[d],f+d,0==d?c:e.endTime);l.push(e)}this.H.push(l);rg(this);return l}.bind(c))}
function Jg(c,d){var e=c.c.networkingEngine,f=rb(d.c(),c.g.retryParameters),g={},h=d.b;g.Range="bytes="+h+"-"+(h+2048-1);var k={};if(0!=h||null!=d.a)h="bytes="+h+"-",null!=d.a&&(h+=d.a),k.Range=h;f.headers=g;g=e.request(1,f);ob(c.h,g);return g.promise["catch"](function(){Ga("Unable to fetch a partial HLS segment! Falling back to a full segment request, which is expensive!  Your server should support Range requests and CORS preflights.",f.uris[0]);f.headers=k;var d=e.request(1,f);ob(c.h,d);return d.promise})}
function Ig(c,d,e,f,g,h){if(c.m&&(d=c.a.get(d).eb.get(f.position)))return Promise.resolve(d.startTime);f=[Jg(c,f)];if("video/mp4"==g||"audio/mp4"==g)e?f.push(Jg(c,e)):f.push(f[0]);return Promise.all(f).then(function(c){if("video/mp4"==g||"audio/mp4"==g)return Kg(c[0].data,c[1].data);if("audio/mpeg"==g)return 0;if("video/mp2t"==g)return Lg(c[0].data);if("application/mp4"==g||0==g.indexOf("text/")){c=c[0].data;var d=Ib(g,h);if(J[d]){var e=new Wc(null);e.f=new J[d];c=e.Lb(c)}else c=0;return c}throw new C(2,
4,4030);}.bind(c))}function Kg(c,d){var e=0;(new R).C("moov",S).C("trak",S).C("mdia",S).Z("mdhd",function(c){c.reader.F(0==c.version?8:16);e=c.reader.B();c.parser.stop()}).parse(d,!0);if(!e)throw new C(2,4,4030);var f=0,g=!1;(new R).C("moof",S).C("traf",S).Z("tfdt",function(c){f=(0==c.version?c.reader.B():c.reader.Ra())/e;g=!0;c.parser.stop()}).parse(c,!0);if(!g)throw new C(2,4,4030);return f}
function Lg(c){function d(){throw new C(2,4,4030);}c=new Q(new DataView(c),0);for(var e=0,f=0;;)if(e=c.V(),f=c.ca(),71!=f&&d(),c.bb()&16384||d(),f=(c.ca()&48)>>4,0!=f&&2!=f||d(),3==f&&(f=c.ca(),c.F(f)),1!=c.B()>>8)c.seek(e+188),f=c.ca(),71!=f&&(c.seek(e+192),f=c.ca()),71!=f&&(c.seek(e+204),f=c.ca()),71!=f&&d(),c.Oc(1);else return c.F(3),e=c.ca()>>6,0!=e&&1!=e||d(),0==c.ca()&&d(),e=c.ca(),f=c.bb(),c=c.bb(),(1073741824*((e&14)>>1)+((f&65534)<<14|(c&65534)>>1))/9E4}
function vg(c,d){for(var e=Mg[c],f=0;f<e.length;f++)for(var g=0;g<d.length;g++)if(e[f].test(d[g].trim()))return d[g].trim();return"text"==c?"":null}
function Eg(c,d,e,f){f=f.segments[0].a;var g=(new Ja(f)).aa.split(".").pop(),h=Ng[d][g];if(h)return Promise.resolve(h);if("text"==d)return e&&"vtt"!=e?Promise.resolve("application/mp4"):Promise.resolve("text/vtt");d=rb([f],c.g.retryParameters);d.method="HEAD";d=c.c.networkingEngine.request(1,d);ob(c.h,d);return d.promise.then(function(c){c=c.headers["content-type"];if(!c)throw new C(2,4,4021,g);return c.split(";")[0]})}
function sg(c,d){var e=c.getAttribute(d);if(!e)throw new C(2,4,4023,d);return e.value}function Dg(c,d){var e=Uf(c,d);if(!e)throw new C(2,4,4024,d);return e}function ig(c,d){var e=c.c.networkingEngine.request(0,rb([d],c.g.retryParameters));ob(c.h,e);return e.promise}
var Mg={audio:[/^vorbis$/,/^opus$/,/^flac$/,/^mp4a/,/^[ae]c-3$/],video:[/^avc/,/^hev/,/^hvc/,/^vp0?[89]/,/^av1$/],text:[/^vtt$/,/^wvtt/,/^stpp/]},Ng={audio:{mp4:"audio/mp4",m4s:"audio/mp4",m4i:"audio/mp4",m4a:"audio/mp4",ts:"video/mp2t"},video:{mp4:"video/mp4",m4s:"video/mp4",m4i:"video/mp4",m4v:"video/mp4",ts:"video/mp2t"},text:{mp4:"application/mp4",m4s:"application/mp4",m4i:"application/mp4",vtt:"text/vtt",ttml:"application/ttml+xml"}};
gg.prototype.W=function(){this.c&&(this.j=null,this.update().then(function(){lg(this,this.i)}.bind(this))["catch"](function(c){this.c&&(c.severity=1,this.c.onError(c),lg(this,0))}.bind(this)))};function lg(c,d){null!=c.i&&null!=d&&(c.j=window.setTimeout(c.W.bind(c),1E3*d))}function pg(c,d){c.f=d;c.b&&c.b.yb(c.f==mg.ta);c.f==mg.ta&&null!=c.j&&(window.clearTimeout(c.j),c.j=null,c.i=null)}
var Gg={"urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed":function(c){var d=sg(c,"METHOD");if("SAMPLE-AES-CENC"!=d&&"SAMPLE-AES-CTR"!=d)return null;d=sg(c,"URI");d=fg.parse(d);d=new Uint8Array(d.data);d=Gb("com.widevine.alpha",[{initDataType:"cenc",initData:d}]);if(c=Rf(c,"KEYID"))d.keyIds=[c.substr(2).toLowerCase()];return d}},hg="VOD",mg={ta:hg,Zc:"EVENT",jc:"LIVE"};wf.m3u8=gg;vf["application/x-mpegurl"]=gg;vf["application/vnd.apple.mpegurl"]=gg;function Og(c,d,e,f){this.a=c;this.s=d;this.o=e;this.w=f;this.h=new xb;this.b=null;this.g=!1;this.m=c.readyState;this.c=!1;this.j=this.A=-1;this.f=this.i=!1;d=this.l.bind(this);F(this.h,c,"waiting",d);this.b=new Qb(d);Ub(this.b,.25)}Og.prototype.destroy=function(){var c=this.h.destroy();this.w=this.s=this.a=this.h=null;null!=this.b&&(this.b.cancel(),this.b=null);return c};Og.prototype.ab=function(){this.f=!0;this.l()};
Og.prototype.l=function(){if(0!=this.a.readyState){if(this.a.seeking){if(!this.g)return}else this.g=!1;if(!this.a.paused){this.a.readyState!=this.m&&(this.c=!1,this.m=this.a.readyState);var c=this.o.smallGapLimit,d=this.a.currentTime,e=this.a.buffered;a:{if(e&&e.length&&!(1==e.length&&1E-6>e.end(0)-e.start(0))){var f=.1;/(Edge\/|Trident\/|Tizen|CrKey)/.test(navigator.userAgent)&&(f=.5);for(var g=0;g<e.length;g++)if(e.start(g)>d&&(0==g||e.end(g-1)-d<=f)){f=g;break a}}f=null}if(null==f){if(e=this.a.currentTime,
d=this.a.buffered,!this.a.paused&&0<this.a.playbackRate)if(this.j!=e)this.j=e,this.A=Date.now(),this.i=!1;else if(!this.i&&this.A<Date.now()-1E3)for(f=0;f<d.length;f++)if(e>=d.start(f)&&e<d.end(f)-.5){this.a.currentTime+=.1;this.j=this.a.currentTime;this.i=!0;break}}else if(0!=f||this.f){g=e.start(f);var h=this.s.presentationTimeline.oa();if(!(g>=h)){h=g-d;c=h<=c;var k=!1;.001>h||(c||this.c||(this.c=!0,d=new G("largegap",{currentTime:d,gapSize:h}),d.cancelable=!0,this.w(d),this.o.jumpLargeGaps&&!d.defaultPrevented&&
(k=!0)),!c&&!k)||(0!=f&&e.end(f-1),this.a.currentTime=g)}}}}};function Pg(c,d,e){this.a=c;this.i=d;this.h=e;this.c=new xb;this.f=1;this.g=!1;this.b=null;0<c.readyState?this.Fc():Ab(this.c,c,"loadedmetadata",this.Fc.bind(this));F(this.c,c,"ratechange",this.Wd.bind(this))}p=Pg.prototype;p.destroy=function(){var c=this.c.destroy();this.c=null;null!=this.b&&(this.b.cancel(),this.b=null);this.i=this.a=null;return c};function Qg(c){return 0<c.a.readyState?c.a.currentTime:c.h}function Rg(c,d){0<c.a.readyState?Sg(c,c.a.currentTime,d):(c.h=d,setTimeout(c.i,0))}
p.Va=function(){return this.f};function Tg(c,d){null!=c.b&&(c.b.cancel(),c.b=null);c.f=d;c.a.playbackRate=c.g||0>d?0:d;!c.g&&0>d&&(c.b=new Qb(function(){c.a.currentTime+=d/4}),Ub(c.b,.25))}p.Wd=function(){var c=this.g||0>this.f?0:this.f;this.a.playbackRate&&this.a.playbackRate!=c&&Tg(this,this.a.playbackRate)};p.Fc=function(){.001>Math.abs(this.a.currentTime-this.h)?this.Gc():(Ab(this.c,this.a,"seeking",this.Gc.bind(this)),this.a.currentTime=0==this.a.currentTime?this.h:this.a.currentTime)};
p.Gc=function(){var c=this;F(this.c,this.a,"seeking",function(){return c.i()})};function Sg(c,d,e){function f(){!c.a||10<=g++||c.a.currentTime!=d||(c.a.currentTime=e,setTimeout(f,100))}c.a.currentTime=e;var g=0;setTimeout(f,100)};function Ug(c,d,e,f,g,h){this.c=c;this.b=d;this.h=e;this.j=g;this.f=null;this.g=new Og(c,d,e,h);d=this.Yd.bind(this);e=this.b.presentationTimeline;null==f?f=Infinity>e.U()?e.Ja():e.oa():0>f&&(f=e.oa()+f);f=Vg(this,Wg(this,f));this.a=new Pg(c,d,f);this.f=new Qb(this.Vd.bind(this));Ub(this.f,.25)}p=Ug.prototype;p.destroy=function(){var c=Promise.all([this.a.destroy(),this.g.destroy()]);this.g=this.a=null;null!=this.f&&(this.f.cancel(),this.f=null);this.j=this.h=this.b=this.c=null;return c};
function Xg(c){var d=Qg(c.a);0<c.c.readyState&&(c.c.paused||(d=Wg(c,d)));return d}p.Va=function(){return this.a.Va()};p.ab=function(){this.g.ab()};p.Vd=function(){if(0!=this.c.readyState&&!this.c.paused){var c=this.c.currentTime,d=this.b.presentationTimeline,e=d.Ja();d=d.oa();3>d-e&&(e=d-3);c<e&&(c=Yg(this,c),this.c.currentTime=c)}};
p.Yd=function(){var c=this.g;c.g=!0;c.f=!1;c.c=!1;var d=Qg(this.a);c=Yg(this,d);if(.001<Math.abs(c-d)&&(d=(new Date).getTime()/1E3,!this.i||this.i<d-1)){this.i=d;Rg(this.a,c);return}this.j()};function Vg(c,d){var e=c.b.presentationTimeline.U();return d>=e?e-c.h.durationBackoff:d}
function Yg(c,d){var e=yc.bind(null,c.c.buffered),f=Math.max(c.b.minBufferTime||0,c.h.rebufferingGoal),g=c.b.presentationTimeline,h=g.Ja(),k=g.oa(),l=g.U();3>k-h&&(h=k-3);var m=g.Wa(f),n=g.Wa(5);f=g.Wa(f+5);return d>=l?Vg(c,d):d>k?k:d<h?e(n)?n:f:d>=m||e(d)?d:f}function Wg(c,d){var e=c.b.presentationTimeline.Ja();if(d<e)return e;e=c.b.presentationTimeline.oa();return d>e?e:d};function Zg(c,d,e,f,g,h,k){this.a=c;this.w=d;this.g=e;this.s=f;this.l=g;this.h=h;this.A=k;this.c=[];this.j=new xb;this.b=!1;this.i=-1;this.f=null;$g(this)}Zg.prototype.destroy=function(){var c=this.j?this.j.destroy():Promise.resolve();this.j=null;ah(this);this.A=this.h=this.l=this.s=this.g=this.w=this.a=null;this.c=[];return c};
Zg.prototype.o=function(c){if(!this.c.some(function(d){return d.info.schemeIdUri==c.schemeIdUri&&d.info.startTime==c.startTime&&d.info.endTime==c.endTime})){var d={info:c,status:1};this.c.push(d);var e=new G("timelineregionadded",{detail:bh(c)});this.h(e);this.m(!0,d)}};function bh(c){var d=lb(c);d.eventElement=c.eventElement;return d}
Zg.prototype.m=function(c,d){var e=d.info.startTime>this.a.currentTime?1:d.info.endTime<this.a.currentTime?3:2,f=2==d.status,g=2==e;if(e!=d.status){if(!c||f||g)f||this.h(new G("timelineregionenter",{detail:bh(d.info)})),g||this.h(new G("timelineregionexit",{detail:bh(d.info)}));d.status=e}};function $g(c){ah(c);c.f=window.setTimeout(c.H.bind(c),250)}function ah(c){c.f&&(window.clearTimeout(c.f),c.f=null)}
Zg.prototype.H=function(){this.f=null;$g(this);var c=Jd(this.g,this.a.currentTime);c!=this.i&&(-1!=this.i&&this.A(),this.i=c);c=zc(this.a.buffered,this.a.currentTime);var d=xc(this.a.buffered),e=this.g.presentationTimeline,f=e.Ka();d=e.S()&&d>=f;e=this.w;e=e.g?"ended"==e.g.readyState:!0;d=d||this.a.ended||e;this.b?(e=Math.max(this.g.minBufferTime||0,this.s.rebufferingGoal),(d||c>=e)&&0!=this.b&&(this.b=!1,this.l(!1))):!d&&.5>c&&1!=this.b&&(this.b=!0,this.l(!0));this.c.forEach(this.m.bind(this,!1))};function ch(c,d){this.a=d;this.b=c;this.g=null;this.j=1;this.m=Promise.resolve();this.h=[];this.i={};this.c={};this.o=!1;this.A=null;this.w=this.f=this.l=!1;this.s=0}p=ch.prototype;p.destroy=function(){for(var c in this.c)dh(this.c[c]);this.g=this.c=this.i=this.h=this.m=this.b=this.a=null;this.f=!0;return Promise.resolve()};
p.configure=function(c){this.g=c;this.A=new Xa({maxAttempts:Math.max(c.retryParameters.maxAttempts,2),baseDelay:c.retryParameters.baseDelay,backoffFactor:c.retryParameters.backoffFactor,fuzzFactor:c.retryParameters.fuzzFactor,timeout:0},!0)};p.init=function(){var c=Xg(this.a.Pa);c=this.a.Ac(this.b.periods[Jd(this.b,c)]);return c.variant||c.text?eh(this,c).then(function(){!this.f&&this.a&&this.a.Md&&this.a.Md()}.bind(this)):Promise.reject(new C(2,5,5005))};
function V(c){var d=Xg(c.a.Pa);return c.b.periods[Jd(c.b,d)]}function fh(c){var d=c.c.video||c.c.audio;return d?c.b.periods[d.Ba]:null}function gh(c){return hh(c,"audio")}function ih(c){return hh(c,"video")}function hh(c,d){var e=c.c[d];return e?e.ua||e.stream:null}
function jh(c,d){gd(c.a.J,"text");c.s++;c.w=!1;var e=c.s;return c.a.J.init({text:d},!1).then(function(){return kh(c,[d])}).then(function(){if(!c.f&&c.s==e&&!c.c.text&&!c.w){var f=Xg(c.a.Pa);c.c.text=lh(d,Jd(c.b,f));mh(c,c.c.text,0)}})}function nh(c){c.w=!0;c.c.text&&(dh(c.c.text),delete c.c.text)}function oh(c,d){var e=c.c.video;if(e){var f=e.stream;if(f)if(d){var g=f.trickModeVideo;g&&!e.ua&&(ph(c,g,!1),e.ua=f)}else if(f=e.ua)e.ua=null,ph(c,f,!0)}}
function qh(c,d,e){d.video&&ph(c,d.video,e);d.audio&&ph(c,d.audio,e)}function ph(c,d,e){var f=c.c[d.type];if(!f&&"text"==d.type&&c.g.ignoreTextStreamFailures)jh(c,d);else if(f){var g=Kd(c.b,d);e&&g!=f.Ba?rh(c):(f.ua&&(d.trickModeVideo?(f.ua=d,d=d.trickModeVideo):f.ua=null),(g=c.h[g])&&g.Sa&&(g=c.i[d.id])&&g.Sa&&f.stream!=d&&("text"==d.type&&$c(c.a.J,Ib(d.mimeType,d.codecs)),f.stream=d,f.wb=!0,e&&(f.ya?f.Ab=!0:f.Ca?(f.xa=!0,f.Ab=!0):(dh(f),sh(c,f,!0)))))}}
function th(c){var d=Xg(c.a.Pa),e=c.g.smallGapLimit;Object.keys(c.c).every(function(c){var f=this.a.J;"text"==c?(c=f.a,c=d>=c.a&&d<c.b):(c=bd(f,c),c=yc(c,d,e));return c}.bind(c))||rh(c)}function rh(c){for(var d in c.c){var e=c.c[d];e.ya||e.xa||(e.Ca?e.xa=!0:null==ad(c.a.J,d)?null==e.wa&&mh(c,e,0):(dh(e),sh(c,e,!1)))}}
function eh(c,d,e){var f=Xg(c.a.Pa),g=Jd(c.b,f),h={},k=[];d.variant&&d.variant.audio&&(h.audio=d.variant.audio,k.push(d.variant.audio));d.variant&&d.variant.video&&(h.video=d.variant.video,k.push(d.variant.video));d.text&&(h.text=d.text,k.push(d.text));return c.a.J.init(h,c.g.forceTransmuxTS).then(function(){if(!c.f){var d=c.b.presentationTimeline.U();Infinity>d?c.a.J.ma(d):c.a.J.ma(Math.pow(2,32));return kh(c,k)}}).then(function(){if(!c.f)for(var d in h){var f=h[d];c.c[d]||(c.c[d]=lh(f,g,e),mh(c,
c.c[d],0))}})}function lh(c,d,e){return{stream:c,type:c.type,La:null,pa:null,ua:null,wb:!0,Ba:d,endOfStream:!1,Ca:!1,wa:null,xa:!1,Ab:!1,ya:!1,$b:!1,Ya:!1,Nc:e||0}}
function uh(c,d){var e=c.h[d];if(e)return e.promise;e={promise:new B,Sa:!1};c.h[d]=e;var f=c.b.periods[d].variants.map(function(c){var d=[];c.audio&&d.push(c.audio);c.video&&d.push(c.video);c.video&&c.video.trickModeVideo&&d.push(c.video.trickModeVideo);return d}).reduce(Cb,[]).filter(Fb);f.push.apply(f,c.b.periods[d].textStreams);c.m=c.m.then(function(){if(!this.f)return kh(this,f)}.bind(c)).then(function(){this.f||(this.h[d].promise.resolve(),this.h[d].Sa=!0)}.bind(c))["catch"](function(c){this.f||
(this.h[d].promise["catch"](function(){}),this.h[d].promise.reject(),delete this.h[d],this.a.onError(c))}.bind(c));return e.promise}
function kh(c,d){d.map(function(c){return c.id}).filter(Fb);for(var e=[],f=0;f<d.length;++f){var g=d[f],h=c.i[g.id];h?e.push(h.promise):(c.i[g.id]={promise:new B,Sa:!1},e.push(g.createSegmentIndex()))}return Promise.all(e).then(function(){if(!this.f)for(var c=0;c<d.length;++c){var e=this.i[d[c].id];e.Sa||(e.promise.resolve(),e.Sa=!0)}}.bind(c))["catch"](function(c){if(!this.f){for(var e=0;e<d.length;e++)this.i[d[e].id].promise["catch"](function(){}),this.i[d[e].id].promise.reject(),delete this.i[d[e].id];
return Promise.reject(c)}}.bind(c))}p.Se=function(c){if(!this.f&&!c.Ca&&null!=c.wa&&!c.ya)if(c.wa=null,c.xa)sh(this,c,c.Ab);else{try{var d=vh(this,c);null!=d&&(mh(this,c,d),c.Ya=!1)}catch(e){wh(this,e);return}d=I.values(this.c);xh(this,c);d.every(function(c){return c.endOfStream})&&this.a.J.endOfStream().then(function(){if(!this.f){var c=this.a.J.U();c<this.b.presentationTimeline.U()&&this.b.presentationTimeline.ma(c)}}.bind(this))}};
function vh(c,d){var e=Xg(c.a.Pa),f=yh(c,d,e),g=Kd(c.b,d.stream),h=Jd(c.b,f),k=dd(c.a.J,d.type,e),l=Math.max(c.j*Math.max(c.b.minBufferTime||0,c.g.rebufferingGoal),c.j*c.g.bufferingGoal);if(f>=c.b.presentationTimeline.U())return d.endOfStream=!0,null;d.endOfStream=!1;d.Ba=h;if(h!=g)return null;if(k>=l)return.5;h=cd(c.a.J,d.type);h=zh(c,d,e,h,g);if(!h)return 1;var m=Infinity;I.values(c.c).forEach(function(d){m=Math.min(m,yh(c,d,e))});if(f>=m+c.b.presentationTimeline.a)return 1;d.Nc=0;Ah(c,d,e,g,h);
return null}function yh(c,d,e){return d.La&&d.pa?c.b.periods[Kd(c.b,d.La)].startTime+d.pa.endTime:Math.max(e,d.Nc)}function zh(c,d,e,f,g){if(d.pa&&d.stream==d.La)return Bh(c,d,g,d.pa.position+1);e=d.pa?d.stream.findSegmentPosition(Math.max(0,c.b.periods[Kd(c.b,d.La)].startTime+d.pa.endTime-c.b.periods[g].startTime)):d.stream.findSegmentPosition(Math.max(0,(f||e)-c.b.periods[g].startTime));if(null==e)return null;var h=null;null==f&&(h=Bh(c,d,g,Math.max(0,e-1)));return h||Bh(c,d,g,e)}
function Bh(c,d,e,f){e=c.b.periods[e];d=d.stream.getSegmentReference(f);if(!d)return null;f=c.b.presentationTimeline;c=f.Xa();f=f.Ka();return e.startTime+d.endTime<c||e.startTime+d.startTime>f?null:d}
function Ah(c,d,e,f,g){var h=c.b.periods[f],k=d.stream,l=c.b.presentationTimeline.U(),m=c.b.periods[f+1];f=Ch(c,d,f,Math.max(0,h.startTime-.1),m?m.startTime+.01:l);d.Ca=!0;d.wb=!1;l=Dh(c,g);Promise.all([f,l]).then(function(c){if(!this.f&&!this.l)return Eh(this,d,e,h,k,g,c[1])}.bind(c)).then(function(){this.f||this.l||(d.Ca=!1,d.$b=!1,d.xa||this.a.ab(),mh(this,d,0),Fh(this,k))}.bind(c))["catch"](function(c){this.f||this.l||(d.Ca=!1,"text"==d.type&&this.g.ignoreTextStreamFailures?delete this.c.text:
3017==c.code?Gh(this,d,c):(d.Ya=!0,c.severity=2,wh(this,c)))}.bind(c))}function Gh(c,d,e){if(!I.values(c.c).some(function(c){return c!=d&&c.$b})){var f=Math.round(100*c.j);if(20<f)c.j-=.2;else if(4<f)c.j-=.04;else{d.Ya=!0;c.l=!0;c.a.onError(e);return}d.$b=!0}mh(c,d,4)}
function Ch(c,d,e,f,g){if(!d.wb)return Promise.resolve();e=hd(c.a.J,d.type,c.b.periods[e].startTime-d.stream.presentationTimeOffset,f,g);if(!d.stream.initSegmentReference)return e;c=Dh(c,d.stream.initSegmentReference).then(function(c){if(!this.f)return ed(this.a.J,d.type,c,null,null)}.bind(c))["catch"](function(c){d.wb=!0;return Promise.reject(c)});return Promise.all([e,c])}
function Eh(c,d,e,f,g,h,k){g.containsEmsgBoxes&&(new R).Z("emsg",c.ie.bind(c,f,h)).parse(k);return Hh(c,d,e).then(function(){if(!this.f)return ed(this.a.J,d.type,k,h.startTime+f.startTime,h.endTime+f.startTime)}.bind(c)).then(function(){if(!this.f)return d.La=g,d.pa=h,Promise.resolve()}.bind(c))}
p.ie=function(c,d,e){var f=e.reader.Yb(),g=e.reader.Yb(),h=e.reader.B(),k=e.reader.B(),l=e.reader.B(),m=e.reader.B();e=e.reader.Da(e.reader.D.byteLength-e.reader.V());c=c.startTime+d.startTime+k/h;if("urn:mpeg:dash:event:2012"==f)this.a.Od();else this.a.onEvent(new G("emsg",{detail:{startTime:c,endTime:c+l/h,schemeIdUri:f,value:g,timescale:h,presentationTimeDelta:k,eventDuration:l,id:m,messageData:e}}))};
function Hh(c,d,e){var f=Math.max(c.g.bufferBehind,c.b.presentationTimeline.a),g=ad(c.a.J,d.type);if(null==g)return Promise.resolve();e=e-g-f;return 0>=e?Promise.resolve():c.a.J.remove(d.type,g,g+e).then(function(){}.bind(c))}
function Fh(c,d){if(!c.o&&(c.o=I.values(c.c).every(function(c){return"text"==c.type?!0:!c.xa&&!c.ya&&c.pa}),c.o)){var e=Kd(c.b,d);c.h[e]||uh(c,e).then(function(){this.f||this.a.zc()}.bind(c))["catch"](Db);for(e=0;e<c.b.periods.length;++e)uh(c,e)["catch"](Db);c.a.ae&&c.a.ae()}}
function xh(c,d){if(d.Ba!=Kd(c.b,d.stream)){var e=d.Ba,f=I.values(c.c);f.every(function(c){return c.Ba==e})&&f.every(Ih)&&uh(c,e).then(function(){if(!this.f&&f.every(function(c){var d=Kd(this.b,c.stream);return Ih(c)&&c.Ba==e&&d!=e}.bind(this))){var c=this.b.periods[e],d=this.a.Ac(c),k={};d.variant&&d.variant.video&&(k.video=d.variant.video);d.variant&&d.variant.audio&&(k.audio=d.variant.audio);d.text&&(k.text=d.text);for(var l in this.c)if(!k[l]&&"text"!=l){this.a.onError(new C(2,5,5005));return}for(var m in k)if(!this.c[m])if("text"==
m)eh(this,{text:k.text},c.startTime),delete k[m];else{this.a.onError(new C(2,5,5005));return}for(var n in this.c)(c=k[n])?(ph(this,c,!1),mh(this,this.c[n],0)):delete this.c[n];this.a.zc()}}.bind(c))["catch"](Db)}}function Ih(c){return!c.Ca&&null==c.wa&&!c.xa&&!c.ya}function Dh(c,d){var e=rb(d.c(),c.g.retryParameters);if(0!=d.b||null!=d.a){var f="bytes="+d.b+"-";null!=d.a&&(f+=d.a);e.headers.Range=f}return c.a.$a.request(1,e).promise.then(function(c){return c.data})}
function sh(c,d,e){d.xa=!1;d.Ab=!1;d.ya=!0;gd(c.a.J,d.type).then(function(){if(!this.f&&e)return this.a.J.flush(d.type)}.bind(c)).then(function(){this.f||(d.La=null,d.pa=null,d.ya=!1,d.endOfStream=!1,mh(this,d,0))}.bind(c))}function mh(c,d,e){d.wa=window.setTimeout(c.Se.bind(c,d),1E3*e)}function dh(c){null!=c.wa&&(window.clearTimeout(c.wa),c.wa=null)}function wh(c,d){Za(c.A).then(function(){this.f||(this.a.onError(d),d.handled||this.g.failureCallback(d))}.bind(c))};function Jh(c,d,e,f,g,h){if(200<=e&&299>=e&&202!=e)return g&&(f=g),{uri:f,data:d,headers:c,fromCache:!!c["x-shaka-from-cache"]};g=null;try{g=Ob(d)}catch(k){}throw new C(401==e||403==e?2:1,1,1001,f,e,g,c,h);};function W(c,d,e){var f=new W.b;I.forEach(d.headers,function(c,d){f.append(c,d)});var g=new W.a,h={body:d.body||void 0,headers:f,method:d.method,signal:g.signal,credentials:d.allowCrossSiteCredentials?"include":void 0},k={mc:!1,Xc:!1},l;d.retryParameters.timeout&&(l=setTimeout(function(){k.Xc=!0;g.abort()},d.retryParameters.timeout));c=W.f(c,e,h,k,l);return new D(c,function(){k.mc=!0;g.abort();return Promise.resolve()})}A("shaka.net.HttpFetchPlugin",W);
W.f=function(c,d,e,f,g){return r(function k(){var l,m,n,t,u,v;return x(k,function(k){switch(k.u){case 1:return l=W.c,na(k,2,3),w(k,l(c,e),5);case 5:return m=k.K,w(k,m.arrayBuffer(),6);case 6:n=k.K;case 3:sa(k);clearTimeout(g);ta(k,4);break;case 2:t=ra(k);if(f.mc)throw new C(1,1,7001,c,d);if(f.Xc)throw new C(1,1,1003,c,d);throw new C(1,1,1002,c,t,d);case 4:return u={},v=m.headers,v.forEach(function(c,d){u[d.trim()]=c}),k["return"](Jh(u,n,m.status,c,m.url,d))}})})};
W.isSupported=function(){return!(!window.fetch||!window.AbortController)};W.isSupported=W.isSupported;W.c=window.fetch;W.a=window.AbortController;W.b=window.Headers;W.isSupported()&&(qb("http",W,1),qb("https",W,1));function Kh(c,d,e){var f=new Kh.g,g=new Promise(function(g,k){f.open(d.method,c,!0);f.responseType="arraybuffer";f.timeout=d.retryParameters.timeout;f.withCredentials=d.allowCrossSiteCredentials;f.onabort=function(){k(new C(1,1,7001,c,e))};f.onload=function(d){d=d.target;var f=d.getAllResponseHeaders().trim().split("\r\n").reduce(function(c,d){var e=d.split(": ");c[e[0].toLowerCase()]=e.slice(1).join(": ");return c},{});try{var h=Jh(f,d.response,d.status,c,d.responseURL,e);if(window.hasOwnProperty("player")){var l=
window.b;d=0;for(f=1;f<l.I.stateHistory.length;++f)"buffering"===l.I.stateHistory[f].state&&d++}g(h)}catch(v){k(v)}};f.onerror=function(d){k(new C(1,1,1002,c,d,e))};f.ontimeout=function(){k(new C(1,1,1003,c,e))};for(var h in d.headers)f.setRequestHeader(h.toLowerCase(),d.headers[h]);f.send(d.body)});return new D(g,function(){f.abort();return Promise.resolve()})}A("shaka.net.HttpXHRPlugin",Kh);Kh.g=window.XMLHttpRequest;qb("http",Kh,2);qb("https",Kh,2);function Lh(c){this.a={};this.c=Promise.resolve();this.h=!1;this.i=c;this.f=this.b=this.g=0}Lh.prototype.destroy=function(){this.h=!0;var c=this.c["catch"](function(){});this.c=Promise.resolve();return c};function Mh(c,d,e,f,g){c.a[d]=c.a[d]||[];c.a[d].push({request:e,pc:f,Jd:g})}
function Nh(c,d){var e=I.values(c.a);c.a={};e.forEach(function(d){d.forEach(function(d){c.b+=d.pc})});var f=Promise.resolve().then(function(){Oh(c);return Promise.all(e.map(function(e){return Ph(c,d,e)}))});c.c=c.c.then(function(){return f});return f}function Ph(c,d,e){var f=Promise.resolve();e.forEach(function(e){f=f.then(function(){Oh(c);return Qh(c,d,e)})});return f}
function Qh(c,d,e){return Promise.resolve().then(function(){Oh(c);return d.request(1,e.request).promise}).then(function(d){Oh(c);c.g+=e.pc;c.f+=d.data.byteLength;c.i(c.b?c.g/c.b:0,c.f);return e.Jd(d.data)})}function Oh(c){if(c.h)throw new C(2,9,7001);};function Rh(c,d){var e=this;this.c=c;this.b=c.objectStore(d);this.a=new B;c.onabort=function(c){c.preventDefault();e.a.reject()};c.onerror=function(c){c.preventDefault();e.a.reject()};c.oncomplete=function(){e.a.resolve()}}Rh.prototype.abort=function(){try{this.c.abort()}catch(c){}return this.a["catch"](function(){})};Rh.prototype.store=function(){return this.b};Rh.prototype.promise=function(){return this.a};function Sh(c){this.b=c;this.a=[]}Sh.prototype.destroy=function(){return Promise.all(this.a.map(function(c){return c.abort()}))};function Th(c,d){return Uh(c,d,"readwrite")}function Uh(c,d,e){e=c.b.transaction([d],e);var f=new Rh(e,d);c.a.push(f);f.promise().then(function(){ib(c.a,f)},function(){ib(c.a,f)});return f};function Vh(){this.a={}}Vh.prototype.destroy=function(){var c=I.values(this.a).map(function(c){return c.destroy()});this.a={};return Promise.all(c)};Vh.prototype.init=function(){var c=this;I.forEach(Wh,function(d,f){var e=f();e&&(c.a[d]=e)});var d=I.values(this.a).map(function(c){return c.init()});return Promise.all(d)};
function Xh(c){var d=null;I.forEach(c.a,function(c,f){I.forEach(f.getCells(),function(e,f){f.hasFixedKeySpace()||d||(d={path:{fa:c,P:e},P:f})})});if(d)return d;throw new C(2,9,9013,"Could not find a cell that supports add-operations");}function Yh(c,d){I.forEach(c.a,function(c,f){I.forEach(f.getCells(),function(e,f){d({fa:c,P:e},f)})})}
function Zh(c,d,e){c=c.a[d];if(!c)throw new C(2,9,9013,"Could not find mechanism with name "+d);d=c.getCells()[e];if(!d)throw new C(2,9,9013,"Could not find cell with name "+e);return d}
function $h(c){return r(function e(){var f,g,h,k;return x(e,function(e){switch(e.u){case 1:return f=I,g=Object.values(c.a),h=0<g.length,h||(k=Wh,f.forEach(k,function(c,e){var f=e();f&&g.push(f)})),w(e,Promise.all(g.map(function(c){return c.erase()})),2);case 2:if(h)e.O(0);else return w(e,Promise.all(g.map(function(c){return c.destroy()})),0)}})})}A("shaka.offline.StorageMuxer.register",function(c,d){Wh[c]=d});A("shaka.offline.StorageMuxer.unregister",function(c){delete Wh[c]});
function ai(){return I.values(Wh).some(function(c){return(c=c())?(c.destroy(),!0):!1})}var Wh={};function bi(c){this.a=new Sh(c)}p=bi.prototype;p.destroy=function(){return this.a.destroy()};p.hasFixedKeySpace=function(){return!0};p.addSegments=function(){return ci("segment")};p.removeSegments=function(c,d){return di(this,"segment",c,d)};p.getSegments=function(c){return ei(this,"segment",c).then(function(c){return c.map(fi)})};p.addManifests=function(){return ci("manifest")};
p.updateManifestExpiration=function(c,d){var e=Th(this.a,"manifest"),f=e.store(),g=new B;f.get(c).onsuccess=function(e){(e=e.target.result)?(e.expiration=d,f.put(e),g.resolve()):g.reject(new C(2,9,9012,"Could not find values for "+c))};return e.promise().then(function(){return g})};p.removeManifests=function(c,d){return di(this,"manifest",c,d)};p.getManifests=function(c){return ei(this,"manifest",c).then(function(c){return c.map(gi)})};
p.getAllManifests=function(){var c=Uh(this.a,"manifest","readonly"),d={};c.store().openCursor().onsuccess=function(c){if(c=c.target.result)d[c.key]=gi(c.value),c["continue"]()};return c.promise().then(function(){return d})};function ci(c){return Promise.reject(new C(2,9,9011,"Cannot add new value to "+c))}function di(c,d,e,f){c=Th(c.a,d);var g=c.store();e.forEach(function(c){g["delete"](c).onsuccess=function(){return f(c)}});return c.promise()}
function ei(c,d,e){c=Uh(c.a,d,"readonly");var f=c.store(),g={},h=[];e.forEach(function(c){f.get(c).onsuccess=function(d){d=d.target.result;void 0==d&&h.push(c);g[c]=d}});return c.promise().then(function(){return h.length?Promise.reject(new C(2,9,9012,"Could not find values for "+h)):e.map(function(c){return g[c]})})}
function gi(c){return{originalManifestUri:c.originalManifestUri,duration:c.duration,size:c.size,expiration:null==c.expiration?Infinity:c.expiration,periods:c.periods.map(hi),sessionIds:c.sessionIds,drmInfo:c.drmInfo,appMetadata:c.appMetadata}}function hi(c){ii(c);c.streams.forEach(function(){});return{startTime:c.startTime,streams:c.streams.map(ji)}}
function ji(c){var d=c.Dd?ki(c.Dd):null;return{id:c.id,primary:c.primary,presentationTimeOffset:c.presentationTimeOffset,contentType:c.contentType,mimeType:c.mimeType,codecs:c.codecs,frameRate:c.frameRate,kind:c.kind,language:c.language,label:c.label,width:c.width,height:c.height,initSegmentKey:d,encrypted:c.encrypted,keyId:c.keyId,segments:c.segments.map(li),variantIds:c.variantIds}}function li(c){var d=ki(c.uri);return{startTime:c.startTime,endTime:c.endTime,dataKey:d}}
function fi(c){return{data:c.data}}function ki(c){var d;if((d=/^offline:[0-9]+\/[0-9]+\/([0-9]+)$/.exec(c))||(d=/^offline:segment\/([0-9]+)$/.exec(c)))return Number(d[1]);throw new C(2,9,9004,"Could not parse uri "+c);}
function ii(c){var d=c.streams.filter(function(c){return"audio"==c.contentType}),e=c.streams.filter(function(c){return"video"==c.contentType});if(!d.every(function(c){return c.variantIds})||!e.every(function(c){return c.variantIds})){d.forEach(function(c){c.variantIds=[]});e.forEach(function(c){c.variantIds=[]});var f=0;if(e.length&&!d.length){var g=f++;e.forEach(function(c){c.variantIds.push(g)})}if(!e.length&&d.length){var h=f++;d.forEach(function(c){c.variantIds.push(h)})}e.length&&d.length&&d.forEach(function(c){e.forEach(function(d){var e=
f++;c.variantIds.push(e);d.variantIds.push(e)})})}};function mi(c,d,e,f){this.a=new Sh(c);this.c=d;this.b=e;this.f=f}p=mi.prototype;p.destroy=function(){return this.a.destroy()};p.hasFixedKeySpace=function(){return this.f};p.addSegments=function(c){return ni(this,this.c,c)};p.removeSegments=function(c,d){return oi(this,this.c,c,d)};p.getSegments=function(c){return pi(this,this.c,c)};p.addManifests=function(c){return ni(this,this.b,c)};
p.updateManifestExpiration=function(c,d){var e=Th(this.a,this.b),f=e.store();f.get(c).onsuccess=function(e){if(e=e.target.result)e.expiration=d,f.put(e,c)};return e.promise()};p.removeManifests=function(c,d){return oi(this,this.b,c,d)};p.getManifests=function(c){return pi(this,this.b,c)};p.getAllManifests=function(){var c=Uh(this.a,this.b,"readonly"),d={};c.store().openCursor().onsuccess=function(c){if(c=c.target.result)d[c.key]=c.value,c["continue"]()};return c.promise().then(function(){return d})};
function ni(c,d,e){if(c.f)return Promise.reject(new C(1,9,9011,"Cannot add new value to "+d));c=Th(c.a,d);var f=c.store(),g=[];e.forEach(function(c){f.add(c).onsuccess=function(c){g.push(c.target.result)}});return c.promise().then(function(){return g})}function oi(c,d,e,f){c=Th(c.a,d);var g=c.store();e.forEach(function(c){g["delete"](c).onsuccess=function(){return f(c)}});return c.promise()}
function pi(c,d,e){c=Uh(c.a,d,"readonly");var f=c.store(),g={},h=[];e.forEach(function(c){var d=f.get(c);d.onsuccess=function(){void 0==d.result&&h.push(c);g[c]=d.result}});return c.promise().then(function(){return h.length?Promise.reject(new C(1,9,9012,"Could not find values for "+h)):e.map(function(c){return g[c]})})};function qi(){this.c=this.b=this.a=this.f=null}
qi.prototype.init=function(){var c=this,d=new B,e=window.indexedDB.open("shaka_offline_db",3);e.onsuccess=function(e){e=e.target.result;c.f=e;var f=e.objectStoreNames;f=f.contains("manifest")&&f.contains("segment")?new bi(e):null;c.a=f;f=e.objectStoreNames;f=f.contains("manifest-v2")&&f.contains("segment-v2")?new mi(e,"segment-v2","manifest-v2",!0):null;c.b=f;f=e.objectStoreNames;e=f.contains("manifest-v3")&&f.contains("segment-v3")?new mi(e,"segment-v3","manifest-v3",!1):null;c.c=e;d.resolve()};
e.onupgradeneeded=function(c){c=c.target.result;var d={autoIncrement:!0};c.createObjectStore("manifest-v3",d);c.createObjectStore("segment-v3",d)};e.onerror=function(c){d.reject(new C(2,9,9001,e.error));c.preventDefault()};return d};
qi.prototype.destroy=function(){var c=this;return r(function e(){return x(e,function(e){switch(e.u){case 1:if(!c.a){e.O(2);break}return w(e,c.a.destroy(),2);case 2:if(!c.b){e.O(4);break}return w(e,c.b.destroy(),4);case 4:if(!c.c){e.O(6);break}return w(e,c.c.destroy(),6);case 6:c.f&&c.f.close(),e.u=0}})})};qi.prototype.getCells=function(){var c={};this.a&&(c.v1=this.a);this.b&&(c.v2=this.b);this.c&&(c.v3=this.c);return c};
qi.prototype.erase=function(){var c=this;return r(function e(){return x(e,function(e){switch(e.u){case 1:if(!c.a){e.O(2);break}return w(e,c.a.destroy(),2);case 2:if(!c.b){e.O(4);break}return w(e,c.b.destroy(),4);case 4:if(!c.c){e.O(6);break}return w(e,c.c.destroy(),6);case 6:return c.f&&c.f.close(),w(e,ri(),8);case 8:return c.f=null,c.a=null,c.b=null,c.c=null,w(e,c.init(),0)}})})};
function ri(){var c=new B,d=window.indexedDB.deleteDatabase("shaka_offline_db");d.onblocked=function(){};d.onsuccess=function(){c.resolve()};d.onerror=function(e){c.reject(new C(2,9,9001,d.error));e.preventDefault()};return c}Wh.idb=function(){return window.indexedDB?new qi:null};function si(c,d,e,f){this.a=c;this.g=d;this.f=e;this.c=f;this.b=["offline:",c,"/",d,"/",e,"/",f].join("")}si.prototype.fa=function(){return this.g};si.prototype.P=function(){return this.f};si.prototype.key=function(){return this.c};si.prototype.toString=function(){return this.b};
function ti(c){c=/^offline:([a-z]+)\/([^/]+)\/([^/]+)\/([0-9]+)$/.exec(c);if(null==c)return null;var d=c[1];if("manifest"!=d&&"segment"!=d)return null;var e=c[2];if(!e)return null;var f=c[3];return f&&null!=d?new si(d,e,f,Number(c[4])):null};function ui(c,d){this.b=c;this.a=d}function vi(c,d){var e=new U(null,0);e.ma(d.duration);var f=d.periods.map(function(d){return wi(c,d,e)}),g=d.drmInfo?[d.drmInfo]:[];d.drmInfo&&f.forEach(function(c){c.variants.forEach(function(c){c.drmInfos=g})});return{presentationTimeline:e,minBufferTime:2,offlineSessionIds:d.sessionIds,periods:f}}
function wi(c,d,e){var f=d.streams.filter(function(c){return"audio"==c.contentType}),g=d.streams.filter(function(c){return"video"==c.contentType});f=xi(c,f,g);g=d.streams.filter(function(c){return"text"==c.contentType}).map(function(d){return yi(c,d)});d.streams.forEach(function(d,f){var g=d.segments.map(function(d,e){return zi(c,e,d)});e.Na(g,0==f)});return{startTime:d.startTime,variants:f,textStreams:g}}
function xi(c,d,e){var f={},g=[];g.push.apply(g,d);g.push.apply(g,e);g.forEach(function(c){c.variantIds.forEach(function(c){f[c]=f[c]||{id:c,language:"",primary:!1,audio:null,video:null,bandwidth:0,drmInfos:[],allowedByApplication:!0,allowedByKeySystem:!0}})});d.forEach(function(d){var e=yi(c,d);d.variantIds.forEach(function(c){c=f[c];c.language=e.language;c.primary=c.primary||e.primary;c.audio=e})});e.forEach(function(d){var e=yi(c,d);d.variantIds.forEach(function(c){c=f[c];c.primary=c.primary||
e.primary;c.video=e})});return I.values(f)}
function yi(c,d){var e=d.segments.map(function(d,e){return zi(c,e,d)}),f=new T(e);e={id:d.id,createSegmentIndex:function(){return Promise.resolve()},findSegmentPosition:function(c){return f.find(c)},getSegmentReference:function(c){return f.get(c)},initSegmentReference:null,presentationTimeOffset:d.presentationTimeOffset,mimeType:d.mimeType,codecs:d.codecs,width:d.width||void 0,height:d.height||void 0,frameRate:d.frameRate||void 0,kind:d.kind,encrypted:d.encrypted,keyId:d.keyId,language:d.language,
label:d.label||null,type:d.contentType,primary:d.primary,trickModeVideo:null,containsEmsgBoxes:!1,roles:[],channelsCount:null};null!=d.initSegmentKey&&(e.initSegmentReference=Ai(c,d.initSegmentKey));return e}function zi(c,d,e){var f=new si("segment",c.b,c.a,e.dataKey);return new P(d,e.startTime,e.endTime,function(){return[f.toString()]},0,null)}function Ai(c,d){var e=new si("segment",c.b,c.a,d);return new Pe(function(){return[e.toString()]},0,null)};function Bi(){this.a=null}p=Bi.prototype;p.configure=function(){};p.start=function(c){var d=ti(c);this.a=d;if(null==d||"manifest"!=d.a)return Promise.reject(new C(2,1,9004,d));var e=new Vh;return mb([e],function(){return r(function g(){var c,k,l,m;return x(g,function(g){switch(g.u){case 1:return w(g,e.init(),2);case 2:return w(g,Zh(e,d.fa(),d.P()),3);case 3:return c=g.K,w(g,c.getManifests([d.key()]),4);case 4:return k=g.K,l=k[0],m=new ui(d.fa(),d.P()),g["return"](vi(m,l))}})})})};p.stop=function(){return Promise.resolve()};
p.update=function(){};p.onExpirationUpdated=function(c,d){var e=this.a,f=new Vh;return mb([f],function(){return r(function h(){var k,l,m,n,t;return x(h,function(h){switch(h.u){case 1:return w(h,f.init(),2);case 2:return w(h,Zh(f,e.fa(),e.P()),3);case 3:return k=h.K,w(h,k.getManifests([e.key()]),4);case 4:l=h.K;m=l[0];n=0<=m.sessionIds.indexOf(c);t=void 0==m.expiration||m.expiration>d;if(n&&t)return w(h,k.updateManifestExpiration(e.key(),d),0);h.O(0)}})})})["catch"](function(){})};
vf["application/x-offline-manifest"]=Bi;function Ci(c){var d=ti(c);return d&&"manifest"==d.a?Ci.a(c):d&&"segment"==d.a?Ci.b(d.key(),d):$a(new C(2,1,9004,c))}A("shaka.offline.OfflineScheme",Ci);Ci.a=function(c){c={uri:c,data:new ArrayBuffer(0),headers:{"content-type":"application/x-offline-manifest"}};return bb(c)};
Ci.b=function(c,d){var e=new Vh,f=mb([e],function(){return r(function h(){var c,f,m;return x(h,function(h){switch(h.u){case 1:return w(h,e.init(),2);case 2:return w(h,Zh(e,d.fa(),d.P()),3);case 3:return c=h.K,w(h,c.getSegments([d.key()]),4);case 4:return f=h.K,m=f[0],h["return"]({uri:d,data:m.data,headers:{}})}})})});return cb(f)};qb("offline",Ci);function X(c){this.a=null;for(var d=0;d<c.textTracks.length;++d){var e=c.textTracks[d];e.mode="disabled";"Shaka Player TextTrack"==e.label&&(this.a=e)}this.a||(this.a=c.addTextTrack("subtitles","Shaka Player TextTrack"));this.a.mode="hidden"}A("shaka.text.SimpleTextDisplayer",X);X.prototype.remove=function(c,d){if(!this.a)return!1;Di(this.a,function(e){return!(e.startTime>=d||e.endTime<=c)});return!0};X.prototype.remove=X.prototype.remove;
X.prototype.append=function(c){for(var d=Ei,e=[],f=0;f<c.length;f++){var g=d(c[f]);g&&e.push(g)}e.slice().sort(function(c,d){return c.startTime!=d.startTime?c.startTime-d.startTime:c.endTime!=d.endTime?c.endTime-d.startTime:e.indexOf(d)-e.indexOf(c)}).forEach(function(c){this.a.addCue(c)}.bind(this))};X.prototype.append=X.prototype.append;X.prototype.destroy=function(){this.a&&Di(this.a,function(){return!0});this.a=null;return Promise.resolve()};X.prototype.destroy=X.prototype.destroy;
X.prototype.isTextVisible=function(){return"showing"==this.a.mode};X.prototype.isTextVisible=X.prototype.isTextVisible;X.prototype.setTextVisibility=function(c){this.a.mode=c?"showing":"hidden"};X.prototype.setTextVisibility=X.prototype.setTextVisibility;
function Ei(c){if(c.startTime>=c.endTime)return null;var d=new VTTCue(c.startTime,c.endTime,c.payload);d.lineAlign=c.lineAlign;d.positionAlign=c.positionAlign;d.size=c.size;try{d.align=c.textAlign}catch(e){}"center"==c.textAlign&&"center"!=d.align&&(d.align="middle");2==c.writingDirection?d.vertical="lr":3==c.writingDirection&&(d.vertical="rl");1==c.lineInterpretation&&(d.snapToLines=!1);null!=c.line&&(d.line=c.line);null!=c.position&&(d.position=c.position);return d}
function Di(c,d){var e=c.mode;c.mode="showing"==e?"showing":"hidden";for(var f=c.cues,g=f.length-1;0<=g;g--){var h=f[g];h&&d(h)&&c.removeCue(h)}c.mode=e};function Y(c,d){var e=this;L.call(this);this.ha=!1;this.f=null;this.pb=!1;this.s=null;this.m=new xb;this.Bb=this.h=this.Db=this.b=this.l=this.a=this.w=this.g=this.j=this.i=this.o=null;this.bd=1E9;this.lb=[];this.ob=!1;this.ia=!0;this.N=this.qb=this.Ha=null;this.kc=!1;this.A=null;this.nb=[];this.H={};this.c=Fi(this);this.mb={width:Infinity,height:Infinity};this.I=Gi();this.kb=0;this.L=this.c.preferredAudioLanguage;this.ga=this.c.preferredTextLanguage;this.Ga=this.c.preferredVariantRole;this.Ua=this.c.preferredTextRole;
this.W=this.c.preferredAudioChannelCount;d&&d(this);this.o=new E(this.Ke.bind(this));c&&this.rb(c,!0);F(this.m,window,"online",function(){e.ac()})}Ba(Y,L);A("shaka.Player",Y);function Hi(c){if(!c.Ha)return Promise.resolve();var d=Promise.resolve();c.l&&(d=c.l.stop(),c.l=null);return Promise.all([d,c.Ha()])}
Y.prototype.destroy=function(){var c=this;return r(function e(){var f;return x(e,function(e){switch(e.u){case 1:return w(e,c.detach(),2);case 2:return c.ha=!0,f=Promise.all([c.m?c.m.destroy():null,c.o?c.o.destroy():null]),c.pb=!1,c.m=null,c.h=null,c.Bb=null,c.o=null,c.c=null,w(e,f,0)}})})};Y.prototype.destroy=Y.prototype.destroy;Y.version="v2.4.7-dirty";var Ii={};Y.registerSupportPlugin=function(c,d){Ii[c]=d};
Y.isBrowserSupported=function(){return!!window.Promise&&!!window.Uint8Array&&!!Array.prototype.forEach&&!!window.MediaSource&&!!MediaSource.isTypeSupported&&!!window.MediaKeys&&!!window.navigator&&!!window.navigator.requestMediaKeySystemAccess&&!!window.MediaKeySystemAccess&&!!window.MediaKeySystemAccess.prototype.getConfiguration};Y.probeSupport=function(){return tc().then(function(c){var d=xf(),e=Zc();c={manifest:d,media:e,drm:c};for(var f in Ii)c[f]=Ii[f]();return c})};
Y.prototype.rb=function(c,d){var e=this;return r(function g(){return x(g,function(g){switch(g.u){case 1:void 0===d&&(d=!0);if(!e.f){g.O(2);break}return w(g,e.detach(),2);case 2:e.f=c;F(e.m,e.f,"error",e.ce.bind(e));if(d)return e.j=new Yc(e.f),w(g,e.j.j,0);g.O(0)}})})};Y.prototype.attach=Y.prototype.rb;Y.prototype.detach=function(){var c=this;return r(function e(){return x(e,function(e){switch(e.u){case 1:return c.f?w(e,c.hb(!1),2):e["return"]();case 2:c.m.ra(c.f,"error"),c.f=null,e.u=0}})})};
Y.prototype.detach=Y.prototype.detach;function Ji(c,d,e){return r(function g(){var h,k;return x(g,function(g){switch(g.u){case 1:return w(g,yf(d,c.o,c.c.manifest.retryParameters,e),2);case 2:return h=g.K,c.l=new h,c.l.configure(c.c.manifest),k={networkingEngine:c.o,filterNewPeriod:c.tb.bind(c),filterAllPeriods:c.ec.bind(c),onTimelineRegionAdded:c.be.bind(c),onEvent:c.gb.bind(c),onError:c.Ta.bind(c)},g["return"](c.l.start(d,k))}})})}
function Ki(c){function d(c){return c.video&&c.audio||c.video&&c.video.codecs.includes(",")}c.b.periods.some(function(c){return c.variants.some(d)})&&c.b.periods.forEach(function(c){c.variants=c.variants.filter(d)});if(0==c.b.periods.length)throw new C(2,4,4014);}function Li(c){var d=c.b.presentationTimeline.U(),e=c.c.playRangeEnd,f=c.c.playRangeStart;0<f&&(c.S()||c.b.presentationTimeline.Tc(f));e<d&&(c.S()||c.b.presentationTimeline.ma(e))}
Y.prototype.load=function(c,d,e){var f=this;return r(function h(){var k,l,m,n,t,u,v,z,y,qa,Dc;return x(h,function(h){switch(h.u){case 1:if(!f.f)throw new C(2,7,7002);l=new B;m=function(){k=new C(2,7,7E3);return l};f.dispatchEvent(new G("loading"));n=Date.now();na(h,2);t=f.hb();f.Ha=m;return w(h,t,4);case 4:f.I=Gi();F(f.m,f.f,"playing",f.ib.bind(f));F(f.m,f.f,"pause",f.ib.bind(f));F(f.m,f.f,"ended",f.ib.bind(f));u=f.c.abrFactory;f.h&&f.Bb==u||(f.Bb=u,f.h=new u,f.h.configure(f.c.abr));f.s=new f.c.textDisplayFactory;
f.s.setTextVisibility(f.pb);if(k)throw k;v=f;return w(h,Ji(f,c,e),5);case 5:v.b=h.K;f.Db=c;if(k)throw k;Ki(f);f.i=new ac({$a:f.o,onError:f.Ta.bind(f),Vb:f.Nd.bind(f),onExpirationUpdated:f.Kd.bind(f),onEvent:f.gb.bind(f)});f.i.configure(f.c.drm);return w(h,f.i.init(f.b,!1),6);case 6:if(k)throw k;f.ec(f.b.periods);f.kb=Date.now()/1E3;f.L=f.c.preferredAudioLanguage;f.ga=f.c.preferredTextLanguage;f.W=f.c.preferredAudioChannelCount;Li(f);return w(h,f.i.rb(f.f),7);case 7:if(k)throw k;f.h.init(f.Le.bind(f));
f.j||(f.j=new Yc(f.f));f.j.o=f.s;f.g=new Ug(f.f,f.b,f.c.streaming,void 0==d?null:d,f.Je.bind(f),f.gb.bind(f));f.w=new Zg(f.f,f.j,f.b,f.c.streaming,f.Uc.bind(f),f.gb.bind(f),f.Ie.bind(f));f.a=new ch(f.b,{Pa:f.g,J:f.j,$a:f.o,Ac:f.Id.bind(f),zc:f.gd.bind(f),onError:f.Ta.bind(f),onEvent:f.gb.bind(f),Od:f.Pd.bind(f),ab:f.Zd.bind(f),filterNewPeriod:f.tb.bind(f),filterAllPeriods:f.ec.bind(f)});f.a.configure(f.c.streaming);Mi(f);f.dispatchEvent(new G("streaming"));return w(h,f.a.init(),8);case 8:if(k)throw k;
f.c.streaming.startAtSegmentBoundary&&(z=Ni(f,Xg(f.g)),Rg(f.g.a,z));f.b.periods.forEach(f.tb.bind(f));Oi(f);Pi(f);y=V(f.a);qa=Bd(y.variants,f.L,f.Ga,f.W);f.h.setVariants(qa);y.variants.some(function(c){return c.primary});f.nb.forEach(f.w.o.bind(f.w));f.nb=[];Ab(f.m,f.f,"loadeddata",function(){this.I.loadLatency=(Date.now()-n)/1E3}.bind(f));if(k)throw k;f.Ha=null;pa(h,0);break;case 2:return Dc=ra(h),l.resolve(),f.Ha==m&&(f.Ha=null,f.dispatchEvent(new G("unloading"))),k?h["return"](Promise.reject(k)):
h["return"](Promise.reject(Dc))}})})};Y.prototype.load=Y.prototype.load;
function Mi(c){function d(c){return(c.video?c.video.codecs.split(".")[0]:"")+"-"+(c.audio?c.audio.codecs.split(".")[0]:"")}var e=c.b.periods.reduce(function(c,d){return c.concat(d.variants)},[]);e=Dd(e,c.c.preferredAudioChannelCount);var f={};e.forEach(function(c){var e=d(c);e in f||(f[e]=[]);f[e].push(c)});var g=null,h=Infinity;I.forEach(f,function(c,d){var e=0,f=0;d.forEach(function(c){e+=c.bandwidth||0;++f});var k=e/f;k<h&&(g=c,h=k)});c.b.periods.forEach(function(c){c.variants=c.variants.filter(function(c){return d(c)==
g?!0:!1})})}Y.prototype.configure=function(c,d){if(2==arguments.length&&"string"==typeof c){for(var e=c,f={},g=f,h=0,k=0;;){h=e.indexOf(".",h);if(0>h)break;if(0==h||"\\"!=e[h-1])k=e.substring(k,h).replace(/\\\./g,"."),g[k]={},g=g[k],k=h+1;h+=1}g[e.substring(k).replace(/\\\./g,".")]=d;c=f}e=kb(this.c,c,Fi(this),Qi(),"");Ri(this);return e};Y.prototype.configure=Y.prototype.configure;
function Ri(c){c.l&&c.l.configure(c.c.manifest);c.i&&c.i.configure(c.c.drm);if(c.a){c.a.configure(c.c.streaming);try{c.b.periods.forEach(c.tb.bind(c))}catch(g){c.Ta(g)}var d=gh(c.a),e=ih(c.a),f=V(c.a);(d=Hd(d,e,f.variants))&&d.allowedByApplication&&d.allowedByKeySystem||Si(c,f)}c.h&&(c.h.configure(c.c.abr),c.c.abr.enabled&&!c.ia?c.h.enable():c.h.disable())}Y.prototype.getConfiguration=function(){var c=Fi(this);kb(c,this.c,Fi(this),Qi(),"");return c};Y.prototype.getConfiguration=Y.prototype.getConfiguration;
Y.prototype.we=function(){this.c=Fi(this);Ri(this)};Y.prototype.resetConfiguration=Y.prototype.we;Y.prototype.td=function(){return this.f};Y.prototype.getMediaElement=Y.prototype.td;Y.prototype.uc=function(){return this.o};Y.prototype.getNetworkingEngine=Y.prototype.uc;Y.prototype.Jb=function(){return this.Db};Y.prototype.getManifestUri=Y.prototype.Jb;Y.prototype.S=function(){return this.b?this.b.presentationTimeline.S():!1};Y.prototype.isLive=Y.prototype.S;
Y.prototype.Aa=function(){return this.b?this.b.presentationTimeline.Aa():!1};Y.prototype.isInProgress=Y.prototype.Aa;Y.prototype.Ed=function(){if(!this.b||!this.b.periods.length)return!1;var c=this.b.periods[0].variants;return c.length?!c[0].video:!1};Y.prototype.isAudioOnly=Y.prototype.Ed;Y.prototype.ye=function(){var c=0,d=0;this.b&&(d=this.b.presentationTimeline,c=d.Ja(),d=d.oa());return{start:c,end:d}};Y.prototype.seekRange=Y.prototype.ye;
Y.prototype.keySystem=function(){return this.i?this.i.keySystem():""};Y.prototype.keySystem=Y.prototype.keySystem;Y.prototype.drmInfo=function(){return this.i?this.i.b:null};Y.prototype.drmInfo=Y.prototype.drmInfo;Y.prototype.vb=function(){return this.i?this.i.vb():Infinity};Y.prototype.getExpiration=Y.prototype.vb;Y.prototype.xc=function(){return this.ob};Y.prototype.isBuffering=Y.prototype.xc;
Y.prototype.hb=function(c){var d=this;return r(function f(){return x(f,function(f){switch(f.u){case 1:if(d.ha)return f["return"]();void 0===c&&(c=!0);d.dispatchEvent(new G("unloading"));return w(f,Hi(d),2);case 2:return d.qb||(d.qb=Ti(d).then(function(){d.Uc(!1);d.qb=null})),w(f,d.qb,3);case 3:if(c)return d.j=new Yc(d.f),w(f,d.j.j,0);f.O(0)}})})};Y.prototype.unload=Y.prototype.hb;Y.prototype.Va=function(){return this.g?this.g.Va():0};Y.prototype.getPlaybackRate=Y.prototype.Va;
Y.prototype.Ue=function(c){this.g&&Tg(this.g.a,c);this.a&&oh(this.a,1!=c)};Y.prototype.trickPlay=Y.prototype.Ue;Y.prototype.hd=function(){this.g&&Tg(this.g.a,1);this.a&&oh(this.a,!1)};Y.prototype.cancelTrickPlay=Y.prototype.hd;Y.prototype.Bd=function(){if(!this.b||!this.g)return[];var c=Jd(this.b,Xg(this.g)),d=this.H[c]||{};return xd(this.b.periods[c],d.audio,d.video)};Y.prototype.getVariantTracks=Y.prototype.Bd;
Y.prototype.Ad=function(){if(!this.b||!this.g)return[];var c=Jd(this.b,Xg(this.g)),d=this.H[c]||{};if(!d.text){var e=Fd(this.b.periods[c].textStreams,this.ga,this.Ua);e.length&&(d.text=e[0].id)}return yd(this.b.periods[c],d.text).filter(function(c){return 0>this.lb.indexOf(c.id)}.bind(this))};Y.prototype.getTextTracks=Y.prototype.Ad;
Y.prototype.Ce=function(c){if(this.a){var d=V(this.a);a:{for(var e=0;e<d.textStreams.length;e++)if(d.textStreams[e].id==c.id){c=d.textStreams[e];break a}c=null}c&&(this.j.l=!1,Ui(this,c,!1),d=c,this.ia?this.A=d:ph(this.a,d,!0),this.ga=c.language)}};Y.prototype.selectTextTrack=Y.prototype.Ce;Y.prototype.Ae=function(){this.j.l=!0;nh(this.a)};Y.prototype.selectEmbeddedTextTrack=Y.prototype.Ae;Y.prototype.Ze=function(){return this.j?this.j.l:!1};Y.prototype.usingEmbeddedTextTrack=Y.prototype.Ze;
Y.prototype.De=function(c,d){if(this.a){this.c.abr.enabled&&Ga("Changing tracks while abr manager is enabled will likely result in the selected track being overriden. Consider disabling abr before calling selectVariantTrack().");var e=V(this.a),f=zd(e,c);f&&Ad(f)&&(Vi(this,f,!1),Wi(this,f,d),this.L=f.language,f.audio&&f.audio.channelsCount&&(this.W=f.audio.channelsCount),e=Bd(e.variants,this.L,this.Ga,this.W),this.h.setVariants(e))}};Y.prototype.selectVariantTrack=Y.prototype.De;
Y.prototype.pd=function(){if(!this.a)return[];var c=V(this.a);c=wd(c.variants).map(function(c){return c.audio}).filter(Fb);return Xi(c)};Y.prototype.getAudioLanguagesAndRoles=Y.prototype.pd;Y.prototype.zd=function(){if(!this.a)return[];var c=V(this.a);return Xi(c.textStreams)};Y.prototype.getTextLanguagesAndRoles=Y.prototype.zd;Y.prototype.od=function(){if(!this.a)return[];var c=V(this.a);return wd(c.variants).map(function(c){return c.language}).filter(Fb)};Y.prototype.getAudioLanguages=Y.prototype.od;
Y.prototype.yd=function(){return this.a?V(this.a).textStreams.map(function(c){return c.language}).filter(Fb):[]};Y.prototype.getTextLanguages=Y.prototype.yd;function Xi(c){var d=[];c.forEach(function(c){if(c){var e=c.language;c.roles.length?c.roles.forEach(function(c){d.push({language:e,role:c})}):d.push({language:e,role:""})}else d.push({language:"und",role:""})});return gb(d,function(c,d){return c.language==d.language&&c.role==d.role})}
Y.prototype.ze=function(c,d){if(this.a){var e=V(this.a);this.L=c;this.Ga=d||"";Si(this,e)}};Y.prototype.selectAudioLanguage=Y.prototype.ze;Y.prototype.Be=function(c,d){if(this.a){var e=V(this.a);this.ga=c;this.Ua=d||"";Si(this,e)}};Y.prototype.selectTextLanguage=Y.prototype.Be;Y.prototype.Nb=function(){return this.s?this.s.isTextVisible():this.pb};Y.prototype.isTextTrackVisible=Y.prototype.Nb;
Y.prototype.Ge=function(c){this.s&&this.s.setTextVisibility(c);this.pb=c;Yi(this);!this.c.streaming.alwaysStreamText&&this.a&&(c?(c=V(this.a),(c=Fd(c.textStreams,this.ga,this.Ua)[0])&&jh(this.a,c)):nh(this.a))};Y.prototype.setTextTrackVisibility=Y.prototype.Ge;Y.prototype.vd=function(){return this.b?new Date(1E3*this.b.presentationTimeline.g+1E3*this.f.currentTime):null};Y.prototype.getPlayheadTimeAsDate=Y.prototype.vd;
Y.prototype.xd=function(){return this.b?new Date(1E3*this.b.presentationTimeline.g):null};Y.prototype.getPresentationStartTimeAsDate=Y.prototype.xd;Y.prototype.Hb=function(){return this.j?this.j.Hb():{total:[],audio:[],video:[],text:[]}};Y.prototype.getBufferedInfo=Y.prototype.Hb;
Y.prototype.getStats=function(){Zi(this);this.ib();var c=null,d=null,e=this.f;e=e&&e.getVideoPlaybackQuality?e.getVideoPlaybackQuality():{};if(this.g&&this.b){var f=Jd(this.b,Xg(this.g)),g=this.b.periods[f];if(f=this.H[f])c=(d=Id(f.audio,f.video,g.variants))?d.video:null}c||(c={});d||(d={});return{width:c.width||0,height:c.height||0,streamBandwidth:d.bandwidth||0,decodedFrames:Number(e.totalVideoFrames),droppedFrames:Number(e.droppedVideoFrames),estimatedBandwidth:this.h?this.h.getBandwidthEstimate():
NaN,loadLatency:this.I.loadLatency,playTime:this.I.playTime,bufferingTime:this.I.bufferingTime,switchHistory:lb(this.I.switchHistory),stateHistory:lb(this.I.stateHistory)}};Y.prototype.getStats=Y.prototype.getStats;
Y.prototype.addTextTrack=function(c,d,e,f,g,h){if(!this.a)return Promise.reject();var k=V(this.a),l=this.b.periods.indexOf(k)+1,m=(l>=this.b.periods.length?this.b.presentationTimeline.U():this.b.periods[l].startTime)-k.startTime;if(Infinity==m)return Promise.reject(new C(1,4,4033));var n={id:this.bd++,createSegmentIndex:Promise.resolve.bind(Promise),findSegmentPosition:function(){return 1},getSegmentReference:function(d){return 1!=d?null:new P(1,0,m,function(){return[c]},0,null)},initSegmentReference:null,
presentationTimeOffset:0,mimeType:f,codecs:g||"",kind:e,encrypted:!1,keyId:null,language:d,label:h||null,type:"text",primary:!1,trickModeVideo:null,containsEmsgBoxes:!1,roles:[],channelsCount:null};this.lb.push(n.id);k.textStreams.push(n);return jh(this.a,n).then(function(){if(!this.ha){var c=this.b.periods.indexOf(k),f=hh(this.a,"text");f&&(this.H[c].text=f.id);this.lb.splice(this.lb.indexOf(n.id),1);Si(this,k);Oi(this);return{id:n.id,active:!1,type:"text",bandwidth:0,language:d,label:h||null,kind:e,
width:null,height:null}}}.bind(this))};Y.prototype.addTextTrack=Y.prototype.addTextTrack;Y.prototype.cc=function(c,d){this.mb.width=c;this.mb.height=d};Y.prototype.setMaxHardwareResolution=Y.prototype.cc;Y.prototype.ac=function(){if(this.a){var c=this.a;if(c.f)c=!1;else if(c.l)c=!1;else{for(var d in c.c){var e=c.c[d];e.Ya&&(e.Ya=!1,mh(c,e,.1))}c=!0}}else c=!1;return c};Y.prototype.retryStreaming=Y.prototype.ac;Y.prototype.sd=function(){return this.b};Y.prototype.getManifest=Y.prototype.sd;
function Vi(c,d,e){d.video&&$i(c,d.video);d.audio&&$i(c,d.audio);var f=fh(c.a);d!=Hd(gh(c.a),ih(c.a),f?f.variants:[])&&c.I.switchHistory.push({timestamp:Date.now()/1E3,id:d.id,type:"variant",fromAdaptation:e,bandwidth:d.bandwidth})}function Ui(c,d,e){$i(c,d);c.I.switchHistory.push({timestamp:Date.now()/1E3,id:d.id,type:"text",fromAdaptation:e,bandwidth:null})}function $i(c,d){var e=Kd(c.b,d);c.H[e]||(c.H[e]={});c.H[e][d.type]=d.id}
function Ti(c){c.m&&(c.m.ra(c.f,"loadeddata"),c.m.ra(c.f,"playing"),c.m.ra(c.f,"pause"),c.m.ra(c.f,"ended"));var d=c.i,e=Promise.all([c.h?c.h.stop():null,c.j?c.j.destroy():null,c.g?c.g.destroy():null,c.w?c.w.destroy():null,c.a?c.a.destroy():null,c.l?c.l.stop():null,c.s?c.s.destroy():null]).then(function(){return d?d.destroy():null});c.ia=!0;c.i=null;c.j=null;c.g=null;c.w=null;c.a=null;c.l=null;c.s=null;c.b=null;c.Db=null;c.nb=[];c.H={};c.I=Gi();return e}
function Qi(){return{".drm.servers":"",".drm.clearKeys":"",".drm.advanced":{distinctiveIdentifierRequired:!1,persistentStateRequired:!1,videoRobustness:"",audioRobustness:"",serverCertificate:new Uint8Array(0)}}}
function Fi(c){var d=5E5,e=Infinity;navigator.connection&&navigator.connection.type&&(d=1E6*navigator.connection.downlink,navigator.connection.saveData&&(e=360));return{drm:{retryParameters:Ya(),servers:{},clearKeys:{},advanced:{},delayLicenseRequestUntilPlayed:!1},manifest:{retryParameters:Ya(),availabilityWindowOverride:NaN,dash:{customScheme:function(c){if(c)return null},clockSyncUri:"",ignoreDrmInfo:!1,xlinkFailGracefully:!1,defaultPresentationDelay:10}},streaming:{retryParameters:Ya(),failureCallback:c.ld.bind(c),
rebufferingGoal:2,bufferingGoal:10,bufferBehind:30,ignoreTextStreamFailures:!1,alwaysStreamText:!1,startAtSegmentBoundary:!1,smallGapLimit:.5,jumpLargeGaps:!1,durationBackoff:1,forceTransmuxTS:!1},abrFactory:K,textDisplayFactory:function(){return new X(c.f)},abr:{enabled:!0,defaultBandwidthEstimate:d,switchInterval:8,bandwidthUpgradeTarget:.85,bandwidthDowngradeTarget:.95,restrictions:{minWidth:0,maxWidth:Infinity,minHeight:0,maxHeight:e,minPixels:0,maxPixels:Infinity,minBandwidth:0,maxBandwidth:Infinity}},
preferredAudioLanguage:"",preferredTextLanguage:"",preferredVariantRole:"",preferredTextRole:"",preferredAudioChannelCount:2,restrictions:{minWidth:0,maxWidth:Infinity,minHeight:0,maxHeight:Infinity,minPixels:0,maxPixels:Infinity,minBandwidth:0,maxBandwidth:Infinity},playRangeStart:0,playRangeEnd:Infinity}}p=Y.prototype;p.ld=function(c){var d=[1001,1002,1003];this.S()&&0<=d.indexOf(c.code)&&(c.severity=1,this.ac())};
function Gi(){return{width:NaN,height:NaN,streamBandwidth:NaN,decodedFrames:NaN,droppedFrames:NaN,estimatedBandwidth:NaN,loadLatency:NaN,playTime:0,bufferingTime:0,switchHistory:[],stateHistory:[]}}
p.ec=function(c){c.forEach(rd.bind(null,this.i,this.a?gh(this.a):null,this.a?ih(this.a):null));var d=jb(c,function(c){return c.variants.some(Ad)});if(0==d)throw new C(2,4,4032);if(d<c.length)throw new C(2,4,4011);c.forEach(function(c){qd(c,this.c.restrictions,this.mb)&&this.a&&V(this.a)==c&&Oi(this);if(!c.variants.some(Ad))throw new C(2,4,4012);}.bind(this))};
p.tb=function(c){rd(this.i,this.a?gh(this.a):null,this.a?ih(this.a):null,c);var d=c.variants,e=d.some(Ad);qd(c,this.c.restrictions,this.mb)&&this.a&&V(this.a)==c&&Oi(this);c=d.some(Ad);if(!e)throw new C(2,4,4011);if(!c)throw new C(2,4,4012);if(e=this.i?this.i.b:null)for(d=q(d),c=d.next();!c.done;c=d.next()){c=q(c.value.drmInfos);for(var f=c.next();!f.done;f=c.next())if(f=f.value,f.keySystem==e.keySystem){f=q(f.initData||[]);for(var g=f.next();!g.done;g=f.next())g=g.value,gc(this.i,g.initDataType,
g.initData)}}};function Wi(c,d,e){c.ia?(c.N=d,c.kc=e||!1):qh(c.a,d,e||!1)}function Zi(c){if(c.b){var d=Date.now()/1E3;c.ob?c.I.bufferingTime+=d-c.kb:c.I.playTime+=d-c.kb;c.kb=d}}function Ni(c,d){function e(c,d){if(!c)return null;var e=c.findSegmentPosition(d-h.startTime);return null==e?null:(e=c.getSegmentReference(e))?e.startTime+h.startTime:null}var f=gh(c.a),g=ih(c.a),h=V(c.a);f=e(f,d);g=e(g,d);return null!=g&&null!=f?Math.max(g,f):null!=g?g:null!=f?f:d}
p.Ke=function(c,d){this.h&&this.h.segmentDownloaded(c,d)};p.Uc=function(c){Zi(this);this.ob=c;this.ib();if(this.g){var d=this.g.a;c!=d.g&&(d.g=c,Tg(d,d.f))}this.dispatchEvent(new G("buffering",{buffering:c}))};p.Ie=function(){Oi(this)};
p.ib=function(){if(!this.ha){var c=this.ob?"buffering":this.f.ended?"ended":this.f.paused?"paused":"playing";var d=Date.now()/1E3;if(this.I.stateHistory.length){var e=this.I.stateHistory[this.I.stateHistory.length-1];e.duration=d-e.timestamp;if(c==e.state)return}this.I.stateHistory.push({timestamp:d,state:c,duration:0})}};p.Je=function(){if(this.w){var c=this.w;c.c.forEach(c.m.bind(c,!0))}this.a&&th(this.a)};
function aj(c,d){if(!d||!d.length)return c.Ta(new C(2,4,4012)),null;c.h.setVariants(d);return c.h.chooseVariant()}function Si(c,d){var e=Bd(d.variants,c.L,c.Ga,c.W),f=Fd(d.textStreams,c.ga,c.Ua);if(e=aj(c,e))Vi(c,e,!0),Wi(c,e,!0);(f=f[0])&&(c.c.streaming.alwaysStreamText||c.Nb())&&(Ui(c,f,!0),c.ia?c.A=f:ph(c.a,f,!0));Pi(c)}
p.Id=function(c){this.ia=!0;this.h.disable();var d={audio:!1,text:!1},e=Bd(c.variants,this.L,this.Ga,this.W,d),f=Fd(c.textStreams,this.ga,this.Ua,d);e=aj(this,e);f=f[0]||null;if(this.N){a:{var g=this.b;for(var h=0;h<g.periods.length;++h)for(var k=g.periods[h],l=0;l<k.variants.length;++l)if(k.variants[l]==this.N){g=h;break a}g=-1}this.b.periods[g]==c&&(e=this.N);this.N=null}this.A&&(this.b.periods[Kd(this.b,this.A)]==c&&(f=this.A),this.A=null);e&&Vi(this,e,!0);f&&(Ui(this,f,!0),!fh(this.a)&&e&&e.audio&&
d.text&&f.language!=e.audio.language&&(this.s.setTextVisibility(!0),Yi(this)));return this.c.streaming.alwaysStreamText||this.Nb()?{variant:e,text:f}:{variant:e,text:null}};p.gd=function(){this.ia=!1;this.c.abr.enabled&&this.h.enable();this.N&&(qh(this.a,this.N,this.kc),this.N=null);this.A&&(ph(this.a,this.A,!0),this.A=null)};p.Pd=function(){this.l&&this.l.update&&this.l.update()};p.Zd=function(){this.g&&this.g.ab()};p.Le=function(c,d){Vi(this,c,!0);this.a&&(qh(this.a,c,d||!1),Pi(this))};
function Pi(c){Promise.resolve().then(function(){this.ha||this.dispatchEvent(new G("adaptation"))}.bind(c))}function Oi(c){Promise.resolve().then(function(){this.ha||this.dispatchEvent(new G("trackschanged"))}.bind(c))}function Yi(c){c.dispatchEvent(new G("texttrackvisibility"))}p.Ta=function(c){if(!this.ha){var d=new G("error",{detail:c});this.dispatchEvent(d);d.defaultPrevented&&(c.handled=!0)}};p.be=function(c){this.w?this.w.o(c):this.nb.push(c)};p.gb=function(c){this.dispatchEvent(c)};
p.ce=function(){if(this.f.error){var c=this.f.error.code;if(1!=c){var d=this.f.error.msExtendedCode;d&&(0>d&&(d+=Math.pow(2,32)),d=d.toString(16));this.Ta(new C(2,3,3016,c,d,this.f.error.message))}}};
p.Nd=function(c){var d=["output-restricted","internal-error"],e=V(this.a),f=!1,g=Object.keys(c),h=1==g.length&&"00"==g[0];g.length&&e.variants.forEach(function(e){var g=[];e.audio&&g.push(e.audio);e.video&&g.push(e.video);g.forEach(function(g){var k=e.allowedByKeySystem;g.keyId&&(g=c[h?"00":g.keyId],e.allowedByKeySystem=!!g&&0>d.indexOf(g));k!=e.allowedByKeySystem&&(f=!0)})});(g=Hd(gh(this.a),ih(this.a),e.variants))&&!g.allowedByKeySystem&&Si(this,e);f&&(Oi(this),e=Bd(e.variants,this.L,this.Ga,this.W),
this.h.setVariants(e))};p.Kd=function(c,d){if(this.l&&this.l.onExpirationUpdated)this.l.onExpirationUpdated(c,d);this.dispatchEvent(new G("expirationupdated"))};function bj(c,d,e){var f=void 0==d.expiration?Infinity:d.expiration,g=d.presentationTimeline.U();d=vd(d.periods[0]);return{offlineUri:null,originalManifestUri:c,duration:g,size:0,expiration:f,tracks:d,appMetadata:e}}function cj(c,d){var e=wi(new ui(c.fa(),c.P()),d.periods[0],new U(null,0)),f=d.appMetadata||{};e=vd(e);return{offlineUri:c.toString(),originalManifestUri:d.originalManifestUri,duration:d.duration,size:d.size,expiration:d.expiration,tracks:e,appMetadata:f}};function dj(){this.a={}}function ej(c,d,e){e=e.endTime-e.startTime;return fj(c,d)*e}function fj(c,d){var e=c.a[d];null==e&&(e=0);return e};function Z(c){if(!c||c.constructor!=Y)throw new C(2,9,9008);this.a=c;this.b=gj(this);this.g=!1;this.c=null;this.f=[]}A("shaka.offline.Storage",Z);function hj(){return ai()}Z.support=hj;Z.prototype.destroy=function(){this.a=this.b=null;return Promise.resolve()};Z.prototype.destroy=Z.prototype.destroy;Z.prototype.configure=function(c){kb(this.b,c,gj(this),{},"")};Z.prototype.configure=Z.prototype.configure;
Z.prototype.store=function(c,d,e){var f=this;return r(function h(){var k,l,m,n,t,u;return x(h,function(h){switch(h.u){case 1:ij();if(f.g)return h["return"](Promise.reject(new C(2,9,9006)));f.g=!0;k=d||{};l=null;m=function(c){l=l||c};return w(h,jj(f,c,m,e),2);case 2:n=h.K;t=!n.manifest.presentationTimeline.S()&&!n.manifest.presentationTimeline.Aa();if(!t)throw new C(2,9,9005,c);kj(f);if(l)throw l;u=new Vh;return h["return"](mb([u,n.Fb],function(){return r(function y(){var d,e,h,m,t,v,Rb;return x(y,
function(y){switch(y.u){case 1:return oa(y),w(y,u.init(),4);case 4:return kj(f),lj(f,n.Fb,n.manifest.periods),w(y,Xh(u),5);case 5:return d=y.K,kj(f),na(y,6),w(y,mj(f,d.P,n.Fb,n.manifest,c,k||{}),8);case 8:return e=y.K,kj(f),w(y,d.P.addManifests([e]),9);case 9:return h=y.K,kj(f),m=new si("manifest",d.path.fa,d.path.P,h[0]),y["return"](cj(m,e));case 6:return t=ra(y),v=f.f,Rb=function(){},w(y,d.P.removeSegments(v,Rb),10);case 10:throw l||t;case 2:sa(y),f.g=!1,f.c=null,f.f=[],ta(y,0)}})})}))}})})};
Z.prototype.store=Z.prototype.store;function mj(c,d,e,f,g,h){var k=bj(g,f,h),l=new Lh(function(d,e){k.size=e;c.b.progressCallback(k,d)}),m;return mb([l],function(){m=nj(c,l,d,e,f,g,h);return Nh(l,c.a.o)}).then(function(){m.size=k.size;return m})}
Z.prototype.remove=function(c){var d=this;ij();var e=ti(c);if(null==e||"manifest"!=e.a)return Promise.reject(new C(2,9,9004,c));var f=new Vh;return mb([f],function(){return r(function h(){var c,l,m;return x(h,function(h){switch(h.u){case 1:return w(h,f.init(),2);case 2:return w(h,Zh(f,e.fa(),e.P()),3);case 3:return c=h.K,w(h,c.getManifests([e.key()]),4);case 4:return l=h.K,m=l[0],w(h,Promise.all([oj(d,e,m),pj(d,c,e,m)]),0)}})})})};Z.prototype.remove=Z.prototype.remove;
function oj(c,d,e){var f,g=new ac({$a:c.a.o,onError:function(c){6013!=c.code&&(f=c)},Vb:function(){},onExpirationUpdated:function(){},onEvent:function(){}});g.configure(c.a.getConfiguration().drm);var h=vi(new ui(d.fa(),d.P()),e);return mb([g],function(){return r(function l(){return x(l,function(d){switch(d.u){case 1:return w(d,g.init(h,c.b.usePersistentLicense),2);case 2:return w(d,hc(g,e.sessionIds),0)}})})}).then(function(){if(f)throw f;})}
function pj(c,d,e,f){function g(){l+=1;c.b.progressCallback(m,l/k)}var h=qj(f),k=h.length+1,l=0,m=cj(e,f);return Promise.all([d.removeSegments(h,g),d.removeManifests([e.key()],g)])}
Z.prototype.list=function(){function c(c,e){return r(function k(){var f;return x(k,function(g){switch(g.u){case 1:return w(g,e.getAllManifests(),2);case 2:f=g.K,I.forEach(f,function(e,f){var g=cj(new si("manifest",c.fa,c.P,e),f);d.push(g)}),g.u=0}})})}ij();var d=[],e=new Vh;return mb([e],function(){return r(function g(){var d;return x(g,function(g){switch(g.u){case 1:return w(g,e.init(),2);case 2:return d=Promise.resolve(),Yh(e,function(e,g){d=d.then(function(){return c(e,g)})}),w(g,d,0)}})})}).then(function(){return d})};
Z.prototype.list=Z.prototype.list;
function jj(c,d,e,f){function g(){}var h=c.a.o,k=c.a.getConfiguration(),l,m,n;return yf(d,h,k.manifest.retryParameters,f).then(function(c){var f=this;kj(this);m=new ac({$a:h,onError:e,Vb:g,onExpirationUpdated:function(){},onEvent:function(){}});m.configure(k.drm);var l={networkingEngine:h,filterAllPeriods:function(c){lj(f,m,c)},filterNewPeriod:function(c){rj(f,m,c)},onTimelineRegionAdded:function(){},onEvent:function(){},onError:e};n=new c;n.configure(k.manifest);return n.start(d,l)}.bind(c)).then(function(c){kj(this);
l=c;return m.init(l,this.b.usePersistentLicense)}.bind(c)).then(function(){kj(this);return sj(l)}.bind(c)).then(function(){kj(this);return fc(m)}.bind(c)).then(function(){kj(this);return n.stop()}.bind(c)).then(function(){kj(this);return{manifest:l,Fb:m}}.bind(c))["catch"](function(c){if(n)return n.stop().then(function(){throw c;});throw c;})}
function tj(c,d){var e=[],f=nd(c),g=[0,ld,md],h=d.filter(function(c){return"variant"==c.type});g=g.map(function(c){return h.filter(function(d){d=nd(d.language);return kd(c,f,d)})});for(var k,l=0;l<g.length;l++)if(g[l].length){k=g[l];break}k||(g=h.filter(function(c){return c.primary}),g.length&&(k=g));k||(k=h,h.map(function(c){return c.language}).filter(Fb));var m=k.filter(function(c){return c.height&&480>=c.height});m.length&&(m.sort(function(c,d){return d.height-c.height}),k=m.filter(function(c){return c.height==
m[0].height}));k.sort(function(c,d){return c.bandwidth-d.bandwidth});k.length&&e.push(k[Math.floor(k.length/2)]);e.push.apply(e,d.filter(function(c){return"text"==c.type}));return e}function gj(c){return{trackSelectionCallback:function(d){var e=c.a.getConfiguration();return tj(e.preferredAudioLanguage,d)},progressCallback:function(c,e){if(c||e)return null},usePersistentLicense:!0}}function lj(c,d,e){e.forEach(function(e){return rj(c,d,e)})}
function rj(c,d,e){var f=null;if(c.c){var g=c.c.filter(function(c){return"variant"==c.type})[0];g&&(f=zd(e,g))}var h=g=null;f&&(f.audio&&(g=f.audio),f.video&&(h=f.video));rd(d,g,h,e);qd(e,c.a.getConfiguration().restrictions,{width:Infinity,height:Infinity})}
function sj(c){var d=c.periods.map(function(c){return c.variants}).reduce(Cb,[]).map(function(c){var d=[];c.audio&&d.push(c.audio);c.video&&d.push(c.video);return d}).reduce(Cb,[]).filter(Fb);c=c.periods.map(function(c){return c.textStreams}).reduce(Cb,[]);d.push.apply(d,c);return Promise.all(d.map(function(c){return c.createSegmentIndex()}))}
function nj(c,d,e,f,g,h,k){var l=new dj,m=g.periods.map(function(h){return uj(c,d,e,l,f,g,h)}),n=f.b,t=kc(f);if(n&&c.b.usePersistentLicense){if(!t.length)throw new C(2,9,9007,h);n.initData=[]}return{originalManifestUri:h,duration:g.presentationTimeline.U(),size:0,expiration:f.vb(),periods:m,sessionIds:c.b.usePersistentLicense?t:[],drmInfo:n,appMetadata:k}}
function uj(c,d,e,f,g,h,k){var l=xd(k,null,null),m=yd(k,null);l=c.b.trackSelectionCallback(l.concat(m));null==c.c&&(c.c=l,lj(c,g,h.periods));vj(l);h.periods.forEach(function(c){c.variants.forEach(function(c){var d=c.audio,e=c.video;d&&!e&&(f.a[d.id]=d.bandwidth||c.bandwidth);!d&&e&&(f.a[e.id]=e.bandwidth||c.bandwidth);if(d&&e){var g=d.bandwidth||393216,h=e.bandwidth||c.bandwidth-g;0>=h&&(h=c.bandwidth);f.a[d.id]=g;f.a[e.id]=h}});c.textStreams.forEach(function(c){f.a[c.id]=52})});var n={};l.forEach(function(c){"variant"==
c.type&&null!=c.audioId&&(n[c.audioId]=!0);"variant"==c.type&&null!=c.videoId&&(n[c.videoId]=!0);"text"==c.type&&(n[c.id]=!0)});var t={};wj(h).filter(function(c){return!!n[c.id]}).forEach(function(g){t[g.id]=xj(c,d,e,f,h,g)});l.forEach(function(c){"variant"==c.type&&null!=c.audioId&&t[c.audioId].variantIds.push(c.id);"variant"==c.type&&null!=c.videoId&&t[c.videoId].variantIds.push(c.id)});return{startTime:k.startTime,streams:I.values(t)}}
function xj(c,d,e,f,g,h){var k={id:h.id,primary:h.primary,presentationTimeOffset:h.presentationTimeOffset||0,contentType:h.type,mimeType:h.mimeType,codecs:h.codecs,frameRate:h.frameRate,kind:h.kind,language:h.language,label:h.label,width:h.width||null,height:h.height||null,initSegmentKey:null,encrypted:h.encrypted,keyId:h.keyId,segments:[],variantIds:[]};g=g.presentationTimeline.Xa();var l=h.id;yj(h,g,function(g){Mh(d,l,zj(c,g),ej(f,h.id,g),function(d){return e.addSegments([{data:d}]).then(function(d){c.f.push(d[0]);
k.segments.push({startTime:g.startTime,endTime:g.endTime,dataKey:d[0]})})})});(g=h.initSegmentReference)&&Mh(d,l,zj(c,g),.5*fj(f,h.id),function(d){return e.addSegments([{data:d}]).then(function(d){c.f.push(d[0]);k.initSegmentKey=d[0]})});return k}function yj(c,d,e){d=c.findSegmentPosition(d);for(var f=null==d?null:c.getSegmentReference(d);f;)e(f),f=c.getSegmentReference(++d)}function kj(c){if(!c.a)throw new C(2,9,7001);}function ij(){if(!ai())throw new C(2,9,9E3);}
function zj(c,d){var e=c.a.getConfiguration().streaming.retryParameters;e=rb(d.c(),e);if(0!=d.b||null!=d.a)e.headers.Range="bytes="+d.b+"-"+(null==d.a?"":d.a);return e}function qj(c){var d=[];c.periods.forEach(function(c){c.streams.forEach(function(c){null!=c.initSegmentKey&&d.push(c.initSegmentKey);c.segments.forEach(function(c){d.push(c.dataKey)})})});return d}
Z.deleteAll=function(){return r(function d(){var e;return x(d,function(d){switch(d.u){case 1:return e=new Vh,oa(d),w(d,$h(e),2);case 2:return sa(d),w(d,e.destroy(),5);case 5:ta(d,0)}})})};function vj(c){c.some(function(d){return c.some(function(c){return d!=c&&d.type==c.type&&d.kind==c.kind&&d.language==c.language})})}
function wj(c){var d={};c.periods.forEach(function(c){c.textStreams.forEach(function(c){d[c.id]=c});c.variants.forEach(function(c){c.audio&&(d[c.audio.id]=c.audio);c.video&&(d[c.video.id]=c.video)})});return I.values(d)}Ii.offline=hj;A("shaka.polyfill.installAll",function(){for(var c=0;c<Aj.length;++c)Aj[c].ed()});var Aj=[];function Bj(c,d){d=d||0;for(var e={priority:d,ed:c},f=0;f<Aj.length;f++)if(Aj[f].priority<d){Aj.splice(f,0,e);return}Aj.push(e)}A("shaka.polyfill.register",Bj);function Cj(c){var d=c.type.replace(/^(webkit|moz|MS)/,"").toLowerCase();if("function"===typeof Event)var e=new Event(d,c);else e=document.createEvent("Event"),e.initEvent(d,c.bubbles,c.cancelable);c.target.dispatchEvent(e)}
Bj(function(){if(window.Document){var c=Element.prototype;c.requestFullscreen=c.requestFullscreen||c.mozRequestFullScreen||c.msRequestFullscreen||c.webkitRequestFullscreen;c=Document.prototype;c.exitFullscreen=c.exitFullscreen||c.mozCancelFullScreen||c.msExitFullscreen||c.webkitExitFullscreen;"fullscreenElement"in document||(Object.defineProperty(document,"fullscreenElement",{get:function(){return document.mozFullScreenElement||document.msFullscreenElement||document.webkitFullscreenElement}}),Object.defineProperty(document,
"fullscreenEnabled",{get:function(){return document.mozFullScreenEnabled||document.msFullscreenEnabled||document.webkitFullscreenEnabled}}));document.addEventListener("webkitfullscreenchange",Cj);document.addEventListener("webkitfullscreenerror",Cj);document.addEventListener("mozfullscreenchange",Cj);document.addEventListener("mozfullscreenerror",Cj);document.addEventListener("MSFullscreenChange",Cj);document.addEventListener("MSFullscreenError",Cj)}});Bj(function(){var c=navigator.userAgent;c&&0<=c.indexOf("CrKey")&&delete window.indexedDB});var Dj;function Ej(c,d,e){if("input"==c)switch(this.type){case "range":c="change"}Dj.call(this,c,d,e)}Bj(function(){0>navigator.userAgent.indexOf("Trident/")||HTMLInputElement.prototype.addEventListener==Ej||(Dj=HTMLInputElement.prototype.addEventListener,HTMLInputElement.prototype.addEventListener=Ej)});Bj(function(){});function Fj(){var c=MediaSource.prototype.addSourceBuffer;MediaSource.prototype.addSourceBuffer=function(){var d=c.apply(this,arguments);d.abort=function(){};return d}}function Gj(){var c=SourceBuffer.prototype.remove;SourceBuffer.prototype.remove=function(d,e){return c.call(this,d,e-.001)}}
function Hj(){var c=MediaSource.prototype.endOfStream;MediaSource.prototype.endOfStream=function(){for(var d=0,e=0;e<this.sourceBuffers.length;++e){var h=this.sourceBuffers[e];h=h.buffered.end(h.buffered.length-1);d=Math.max(d,h)}if(!isNaN(this.duration)&&d<this.duration)for(this.vc=!0,d=0;d<this.sourceBuffers.length;++d)this.sourceBuffers[d].qc=!1;return c.apply(this,arguments)};var d=!1,e=MediaSource.prototype.addSourceBuffer;MediaSource.prototype.addSourceBuffer=function(){var c=e.apply(this,arguments);
c.mediaSource_=this;c.addEventListener("updateend",Ij,!1);d||(this.addEventListener("sourceclose",Jj,!1),d=!0);return c}}function Ij(c){var d=c.target,e=d.mediaSource_;if(e.vc){c.preventDefault();c.stopPropagation();c.stopImmediatePropagation();d.qc=!0;for(c=0;c<e.sourceBuffers.length;++c)if(0==e.sourceBuffers[c].qc)return;e.vc=!1}}
function Jj(c){c=c.target;for(var d=0;d<c.sourceBuffers.length;++d)c.sourceBuffers[d].removeEventListener("updateend",Ij,!1);c.removeEventListener("sourceclose",Jj,!1)}function Kj(){var c=MediaSource.isTypeSupported;MediaSource.isTypeSupported=function(d){return"mp2t"==d.split(/ *; */)[0].split("/")[1]?!1:c(d)}}function Lj(){var c=MediaSource.isTypeSupported;MediaSource.isTypeSupported=function(d){var e=d.split("."),f=e[0];e.pop();return"opus"!=f&&c(d)}}
function Mj(){var c=MediaSource.isTypeSupported,d=/^dv(?:he|av)\./;MediaSource.isTypeSupported=function(e){for(var f=e.split(/ *; */),g=f[0],h={},k=1;k<f.length;++k){var l=f[k].split("="),m=l[0];l=l[1].replace(/"(.*)"/,"$1");h[m]=l}f=h.codecs;if(!f)return c(e);var n=!1,t=!1;e=f.split(",").filter(function(c){if(d.test(c))return t=!0,!1;/^(hev|hvc)1\.2/.test(c)&&(n=!0);return!0});t&&(n=!1);h.codecs=e.join(",");n&&(h.eotf="smpte2084");for(var u in h)g+="; "+u+'="'+h[u]+'"';return cast.__platform__.canDisplayType(g)}}
Bj(function(){if(window.MediaSource)if(window.cast&&cast.__platform__&&cast.__platform__.canDisplayType)Mj();else if(navigator.vendor&&0<=navigator.vendor.indexOf("Apple")){var c=navigator.appVersion;Kj();if(0<=c.indexOf("Version/8"))window.MediaSource=null;else if(0<=c.indexOf("Version/9"))Fj();else if(0<=c.indexOf("Version/10"))Fj(),Hj();else if(c.includes("Version/11")||c.includes("Version/12"))Fj(),Gj()}else(navigator.userAgent||"").includes("Tizen")&&Lj()});function Nj(c){this.f=[];this.b=[];this.a=[];(new R).Z("pssh",this.c.bind(this)).parse(c.buffer)}Nj.prototype.c=function(c){if(!(1<c.version)){var d=Yb(c.reader.Da(16)),e=[];if(0<c.version)for(var f=c.reader.B(),g=0;g<f;++g){var h=Yb(c.reader.Da(16));e.push(h)}f=c.reader.B();c.reader.F(f);this.b.push.apply(this.b,e);this.f.push(d);this.a.push({start:c.start,end:c.start+c.size-1})}};function Oj(c,d){try{var e=new Pj(c,d);return Promise.resolve(e)}catch(f){return Promise.reject(f)}}
function Pj(c,d){this.keySystem=c;for(var e=!1,f=0;f<d.length;++f){var g=d[f],h={audioCapabilities:[],videoCapabilities:[],persistentState:"optional",distinctiveIdentifier:"optional",initDataTypes:g.initDataTypes,sessionTypes:["temporary"],label:g.label},k=!1;if(g.audioCapabilities)for(var l=0;l<g.audioCapabilities.length;++l){var m=g.audioCapabilities[l];if(m.contentType){k=!0;var n=m.contentType.split(";")[0];MSMediaKeys.isTypeSupported(this.keySystem,n)&&(h.audioCapabilities.push(m),e=!0)}}if(g.videoCapabilities)for(l=
0;l<g.videoCapabilities.length;++l)m=g.videoCapabilities[l],m.contentType&&(k=!0,n=m.contentType.split(";")[0],MSMediaKeys.isTypeSupported(this.keySystem,n)&&(h.videoCapabilities.push(m),e=!0));k||(e=MSMediaKeys.isTypeSupported(this.keySystem,"video/mp4"));"required"==g.persistentState&&(e=!1);if(e){this.a=h;return}}e=Error("Unsupported keySystem");e.name="NotSupportedError";e.code=DOMException.NOT_SUPPORTED_ERR;throw e;}Pj.prototype.createMediaKeys=function(){var c=new Qj(this.keySystem);return Promise.resolve(c)};
Pj.prototype.getConfiguration=function(){return this.a};function Rj(c){var d=this.mediaKeys;d&&d!=c&&Sj(d,null);delete this.mediaKeys;return(this.mediaKeys=c)?Sj(c,this):Promise.resolve()}function Qj(c){this.a=new MSMediaKeys(c);this.b=new xb}Qj.prototype.createSession=function(c){var d=c||"temporary";if("temporary"!=d)throw new TypeError("Session type "+c+" is unsupported on this platform.");return new Tj(this.a,d)};Qj.prototype.setServerCertificate=function(){return Promise.resolve(!1)};
function Sj(c,d){function e(){d.msSetMediaKeys(f.a);d.removeEventListener("loadedmetadata",e)}yb(c.b);if(!d)return Promise.resolve();F(c.b,d,"msneedkey",Uj);var f=c;try{return 1<=d.readyState?d.msSetMediaKeys(c.a):d.addEventListener("loadedmetadata",e),Promise.resolve()}catch(g){return Promise.reject(g)}}function Tj(c){L.call(this);this.c=null;this.g=c;this.b=this.a=null;this.f=new xb;this.sessionId="";this.expiration=NaN;this.closed=new B;this.keyStatuses=new Vj}Ba(Tj,L);p=Tj.prototype;
p.generateRequest=function(c,d){this.a=new B;try{this.c=this.g.createSession("video/mp4",new Uint8Array(d),null),F(this.f,this.c,"mskeymessage",this.Td.bind(this)),F(this.f,this.c,"mskeyadded",this.Rd.bind(this)),F(this.f,this.c,"mskeyerror",this.Sd.bind(this)),Wj(this,"status-pending")}catch(e){this.a.reject(e)}return this.a};p.load=function(){return Promise.reject(Error("MediaKeySession.load not yet supported"))};p.update=function(c){this.b=new B;try{this.c.update(new Uint8Array(c))}catch(d){this.b.reject(d)}return this.b};
p.close=function(){try{this.c.close(),this.closed.resolve(),yb(this.f)}catch(c){this.closed.reject(c)}return this.closed};p.remove=function(){return Promise.reject(Error("MediaKeySession.remove is only applicable for persistent licenses, which are not supported on this platform"))};
function Uj(c){if(c.initData){var d=document.createEvent("CustomEvent");d.initCustomEvent("encrypted",!1,!1,null);d.initDataType="cenc";if(c=c.initData){var e=new Nj(c);if(!(1>=e.a.length)){for(var f=[],g=0;g<e.a.length;g++)f.push(c.subarray(e.a[g].start,e.a[g].end+1));c=gb(f,Xj);for(f=e=0;f<c.length;f++)e+=c[f].length;e=new Uint8Array(e);for(g=f=0;g<c.length;g++)e.set(c[g],f),f+=c[g].length;c=e}}d.initData=c;this.dispatchEvent(d)}}function Xj(c,d){return Zb(c,d)}
p.Td=function(c){this.a&&(this.a.resolve(),this.a=null);this.dispatchEvent(new G("message",{messageType:void 0==this.keyStatuses.a?"license-request":"license-renewal",message:c.message.buffer}))};p.Rd=function(){this.a?(Wj(this,"usable"),this.a.resolve(),this.a=null):this.b&&(Wj(this,"usable"),this.b.resolve(),this.b=null)};
p.Sd=function(){var c=Error("EME PatchedMediaKeysMs key error");c.errorCode=this.c.error;if(null!=this.a)this.a.reject(c),this.a=null;else if(null!=this.b)this.b.reject(c),this.b=null;else switch(this.c.error.code){case MSMediaKeyError.MS_MEDIA_KEYERR_OUTPUT:case MSMediaKeyError.MS_MEDIA_KEYERR_HARDWARECHANGE:Wj(this,"output-not-allowed");break;default:Wj(this,"internal-error")}};function Wj(c,d){var e=c.keyStatuses;e.size=void 0==d?0:1;e.a=d;c.dispatchEvent(new G("keystatuseschange"))}
function Vj(){this.size=0;this.a=void 0}var Yj;p=Vj.prototype;p.forEach=function(c){this.a&&c(this.a,Yj)};p.get=function(c){if(this.has(c))return this.a};p.has=function(c){var d=Yj;return this.a&&Zb(new Uint8Array(c),new Uint8Array(d))?!0:!1};p.entries=function(){};p.keys=function(){};p.values=function(){};
Bj(function(){!window.HTMLVideoElement||!window.MSMediaKeys||navigator.requestMediaKeySystemAccess&&MediaKeySystemAccess.prototype.getConfiguration||(Yj=(new Uint8Array([0])).buffer,delete HTMLMediaElement.prototype.mediaKeys,HTMLMediaElement.prototype.mediaKeys=null,HTMLMediaElement.prototype.setMediaKeys=Rj,window.MediaKeys=Qj,window.MediaKeySystemAccess=Pj,navigator.requestMediaKeySystemAccess=Oj)});function Zj(){return Promise.reject(Error("The key system specified is not supported."))}function ak(c){return null==c?Promise.resolve():Promise.reject(Error("MediaKeys not supported."))}function bk(){throw new TypeError("Illegal constructor.");}bk.prototype.createSession=function(){};bk.prototype.setServerCertificate=function(){};function ck(){throw new TypeError("Illegal constructor.");}ck.prototype.getConfiguration=function(){};ck.prototype.createMediaKeys=function(){};
Bj(function(){!window.HTMLVideoElement||navigator.requestMediaKeySystemAccess&&MediaKeySystemAccess.prototype.getConfiguration||(navigator.requestMediaKeySystemAccess=Zj,delete HTMLMediaElement.prototype.mediaKeys,HTMLMediaElement.prototype.mediaKeys=null,HTMLMediaElement.prototype.setMediaKeys=ak,window.MediaKeys=bk,window.MediaKeySystemAccess=ck)},-10);var dk="";function ek(c){var d=dk;return d?d+c.charAt(0).toUpperCase()+c.slice(1):c}function fk(c,d){try{var e=new gk(c,d);return Promise.resolve(e)}catch(f){return Promise.reject(f)}}function hk(c){var d=this.mediaKeys;d&&d!=c&&ik(d,null);delete this.mediaKeys;(this.mediaKeys=c)&&ik(c,this);return Promise.resolve()}
function gk(c,d){this.a=this.keySystem=c;var e=!1;"org.w3.clearkey"==c&&(this.a="webkit-org.w3.clearkey",e=!1);var f=!1;var g=document.getElementsByTagName("video");g=g.length?g[0]:document.createElement("video");for(var h=0;h<d.length;++h){var k=d[h],l={audioCapabilities:[],videoCapabilities:[],persistentState:"optional",distinctiveIdentifier:"optional",initDataTypes:k.initDataTypes,sessionTypes:["temporary"],label:k.label},m=!1;if(k.audioCapabilities)for(var n=0;n<k.audioCapabilities.length;++n){var t=
k.audioCapabilities[n];if(t.contentType){m=!0;var u=t.contentType.split(";")[0];g.canPlayType(u,this.a)&&(l.audioCapabilities.push(t),f=!0)}}if(k.videoCapabilities)for(n=0;n<k.videoCapabilities.length;++n)t=k.videoCapabilities[n],t.contentType&&(m=!0,g.canPlayType(t.contentType,this.a)&&(l.videoCapabilities.push(t),f=!0));m||(f=g.canPlayType("video/mp4",this.a)||g.canPlayType("video/webm",this.a));"required"==k.persistentState&&(e?(l.persistentState="required",l.sessionTypes=["persistent-license"]):
f=!1);if(f){this.b=l;return}}e="Unsupported keySystem";if("org.w3.clearkey"==c||"com.widevine.alpha"==c)e="None of the requested configurations were supported.";e=Error(e);e.name="NotSupportedError";e.code=DOMException.NOT_SUPPORTED_ERR;throw e;}gk.prototype.createMediaKeys=function(){var c=new jk(this.a);return Promise.resolve(c)};gk.prototype.getConfiguration=function(){return this.b};function jk(c){this.g=c;this.b=null;this.a=new xb;this.c=[];this.f={}}
function ik(c,d){c.b=d;yb(c.a);var e=dk;d&&(F(c.a,d,e+"needkey",c.ge.bind(c)),F(c.a,d,e+"keymessage",c.fe.bind(c)),F(c.a,d,e+"keyadded",c.de.bind(c)),F(c.a,d,e+"keyerror",c.ee.bind(c)))}p=jk.prototype;p.createSession=function(c){var d=c||"temporary";if("temporary"!=d&&"persistent-license"!=d)throw new TypeError("Session type "+c+" is unsupported on this platform.");c=this.b||document.createElement("video");c.src||(c.src="about:blank");d=new kk(c,this.g,d);this.c.push(d);return d};
p.setServerCertificate=function(){return Promise.resolve(!1)};p.ge=function(c){var d=document.createEvent("CustomEvent");d.initCustomEvent("encrypted",!1,!1,null);d.initDataType="webm";d.initData=c.initData;this.b.dispatchEvent(d)};p.fe=function(c){var d=lk(this,c.sessionId);d&&(c=new G("message",{messageType:void 0==d.keyStatuses.a?"licenserequest":"licenserenewal",message:c.message}),d.b&&(d.b.resolve(),d.b=null),d.dispatchEvent(c))};
p.de=function(c){if(c=lk(this,c.sessionId))mk(c,"usable"),c.a&&c.a.resolve(),c.a=null};
p.ee=function(c){var d=lk(this,c.sessionId);if(d){var e=Error("EME v0.1b key error");e.errorCode=c.errorCode;e.errorCode.systemCode=c.systemCode;!c.sessionId&&d.b?(e.method="generateRequest",45==c.systemCode&&(e.message="Unsupported session type."),d.b.reject(e),d.b=null):c.sessionId&&d.a?(e.method="update",d.a.reject(e),d.a=null):(e=c.systemCode,c.errorCode.code==MediaKeyError.MEDIA_KEYERR_OUTPUT?mk(d,"output-restricted"):1==e?mk(d,"expired"):mk(d,"internal-error"))}};
function lk(c,d){var e=c.f[d];return e?e:(e=c.c.shift())?(e.sessionId=d,c.f[d]=e):null}function kk(c,d,e){L.call(this);this.f=c;this.h=!1;this.a=this.b=null;this.c=d;this.g=e;this.sessionId="";this.expiration=NaN;this.closed=new B;this.keyStatuses=new nk}Ba(kk,L);
function ok(c,d,e){if(c.h)return Promise.reject(Error("The session is already initialized."));c.h=!0;try{if("persistent-license"==c.g)if(e)var f=new Uint8Array(Pb("LOAD_SESSION|"+e));else{var g=Pb("PERSISTENT|"),h=new Uint8Array(g.byteLength+d.byteLength);h.set(new Uint8Array(g),0);h.set(new Uint8Array(d),g.byteLength);f=h}else f=new Uint8Array(d)}catch(l){return Promise.reject(l)}c.b=new B;var k=ek("generateKeyRequest");try{c.f[k](c.c,f)}catch(l){if("InvalidStateError"!=l.name)return c.b=null,Promise.reject(l);
setTimeout(function(){try{this.f[k](this.c,f)}catch(m){this.b.reject(m),this.b=null}}.bind(c),10)}return c.b}p=kk.prototype;
p.fc=function(c,d){if(this.a)this.a.then(this.fc.bind(this,c,d))["catch"](this.fc.bind(this,c,d));else{this.a=c;if("webkit-org.w3.clearkey"==this.c){var e=Lb(d);var f=JSON.parse(e);"oct"!=f.keys[0].kty&&(this.a.reject(Error("Response is not a valid JSON Web Key Set.")),this.a=null);e=Wb(f.keys[0].k);f=Wb(f.keys[0].kid)}else e=new Uint8Array(d),f=null;var g=ek("addKey");try{this.f[g](this.c,e,f,this.sessionId)}catch(h){this.a.reject(h),this.a=null}}};
function mk(c,d){var e=c.keyStatuses;e.size=void 0==d?0:1;e.a=d;c.dispatchEvent(new G("keystatuseschange"))}p.generateRequest=function(c,d){return ok(this,d,null)};p.load=function(c){return"persistent-license"==this.g?ok(this,null,c):Promise.reject(Error("Not a persistent session."))};p.update=function(c){var d=new B;this.fc(d,c);return d};
p.close=function(){if("persistent-license"!=this.g){if(!this.sessionId)return this.closed.reject(Error("The session is not callable.")),this.closed;var c=ek("cancelKeyRequest");try{this.f[c](this.c,this.sessionId)}catch(d){}}this.closed.resolve();return this.closed};p.remove=function(){return"persistent-license"!=this.g?Promise.reject(Error("Not a persistent session.")):this.close()};function nk(){this.size=0;this.a=void 0}var pk;p=nk.prototype;p.forEach=function(c){this.a&&c(this.a,pk)};p.get=function(c){if(this.has(c))return this.a};
p.has=function(c){var d=pk;return this.a&&Zb(new Uint8Array(c),new Uint8Array(d))?!0:!1};p.entries=function(){};p.keys=function(){};p.values=function(){};
Bj(function(){if(!(!window.HTMLVideoElement||navigator.requestMediaKeySystemAccess&&MediaKeySystemAccess.prototype.getConfiguration)){if(HTMLMediaElement.prototype.webkitGenerateKeyRequest)dk="webkit";else if(!HTMLMediaElement.prototype.generateKeyRequest)return;pk=(new Uint8Array([0])).buffer;navigator.requestMediaKeySystemAccess=fk;delete HTMLMediaElement.prototype.mediaKeys;HTMLMediaElement.prototype.mediaKeys=null;HTMLMediaElement.prototype.setMediaKeys=hk;window.MediaKeys=jk;window.MediaKeySystemAccess=
gk}});Bj(function(){if(window.HTMLMediaElement){var c=HTMLMediaElement.prototype.play;HTMLMediaElement.prototype.play=function(){var d=c.apply(this,arguments);d&&d["catch"](function(){});return d}}});function qk(){return{droppedVideoFrames:this.webkitDroppedFrameCount,totalVideoFrames:this.webkitDecodedFrameCount,corruptedVideoFrames:0,creationTime:NaN,totalFrameDelay:0}}Bj(function(){if(window.HTMLVideoElement){var c=HTMLVideoElement.prototype;!c.getVideoPlaybackQuality&&"webkitDroppedFrameCount"in c&&(c.getVideoPlaybackQuality=qk)}});function rk(c,d,e){return new window.TextTrackCue(c,d,e)}function sk(c,d,e){return new window.TextTrackCue(c+"-"+d+"-"+e,c,d,e)}Bj(function(){if(!window.VTTCue&&window.TextTrackCue){var c=TextTrackCue.length;if(3==c)window.VTTCue=rk;else if(6==c)window.VTTCue=sk;else{try{var d=!!rk(1,2,"")}catch(e){d=!1}d&&(window.VTTCue=rk)}}});function tk(){}tk.prototype.parseInit=function(){};
tk.prototype.parseMedia=function(c,d){var e=Lb(c),f=[],g=new DOMParser,h=null;try{h=g.parseFromString(e,"text/xml")}catch(qa){throw new C(2,2,2005);}if(h){if(g=h.getElementsByTagName("tt")[0]){h=ue(g,"http://www.w3.org/ns/ttml#parameter","frameRate");var k=ue(g,"http://www.w3.org/ns/ttml#parameter","subFrameRate");var l=ue(g,"http://www.w3.org/ns/ttml#parameter","frameRateMultiplier");var m=ue(g,"http://www.w3.org/ns/ttml#parameter","tickRate");e=g.getAttribute("xml:space")||"default"}else throw new C(2,
2,2005);if("default"!=e&&"preserve"!=e)throw new C(2,2,2005);e="default"==e;h=new uk(h,k,l,m);k=vk(g.getElementsByTagName("styling")[0]);l=vk(g.getElementsByTagName("layout")[0]);m=[];for(var n=0;n<l.length;n++){var t=l[n],u=k;var v=new Cc;var z=t.getAttribute("xml:id");if(z){v.id=z;var y;if(y=wk(t,u,"extent"))y=(z=xk.exec(y))||yk.exec(y),null!=y&&(v.width=Number(y[1]),v.height=Number(y[2]),v.widthUnits=z?Qc:0,v.heightUnits=z?Qc:0);if(t=wk(t,u,"origin"))y=(z=xk.exec(t))||yk.exec(t),null!=y&&(v.viewportAnchorX=
Number(y[1]),v.viewportAnchorY=Number(y[2]),v.viewportAnchorUnits=z?Qc:0)}else v=null;v&&m.push(v)}g=vk(g.getElementsByTagName("body")[0]);for(n=0;n<g.length;n++)(v=zk(g[n],d.periodStart,h,k,l,m,e))&&f.push(v)}return f};
var xk=/^(\d{1,2}|100)% (\d{1,2}|100)%$/,Ak=/^(\d+px|\d+em)$/,yk=/^(\d+)px (\d+)px$/,Bk=/^(\d{2,}):(\d{2}):(\d{2}):(\d{2})\.?(\d+)?$/,Ck=/^(?:(\d{2,}):)?(\d{2}):(\d{2})$/,Dk=/^(?:(\d{2,}):)?(\d{2}):(\d{2}\.\d{2,})$/,Ek=/^(\d*(?:\.\d*)?)f$/,Fk=/^(\d*(?:\.\d*)?)t$/,Gk=/^(?:(\d*(?:\.\d*)?)h)?(?:(\d*(?:\.\d*)?)m)?(?:(\d*(?:\.\d*)?)s)?(?:(\d*(?:\.\d*)?)ms)?$/,Hk={left:"start",center:Ic,right:"end",start:"start",end:"end"},Ik={left:"line-left",center:"center",right:"line-right"};
function vk(c){var d=[];if(!c)return d;for(var e=c.childNodes,f=0;f<e.length;f++){var g="span"==e[f].nodeName&&"p"==c.nodeName;e[f].nodeType!=Node.ELEMENT_NODE||"br"==e[f].nodeName||g||(g=vk(e[f]),d=d.concat(g))}d.length||d.push(c);return d}function Jk(c,d){for(var e=c.childNodes,f=0;f<e.length;f++)if("br"==e[f].nodeName&&0<f)e[f-1].textContent+="\n";else if(0<e[f].childNodes.length)Jk(e[f],d);else if(d){var g=e[f].textContent.trim();g=g.replace(/\s+/g," ");e[f].textContent=g}}
function zk(c,d,e,f,g,h,k){if(!c.hasAttribute("begin")&&!c.hasAttribute("end")&&/^\s*$/.test(c.textContent))return null;Jk(c,k);k=Kk(c.getAttribute("begin"),e);var l=Kk(c.getAttribute("end"),e);e=Kk(c.getAttribute("dur"),e);var m=c.textContent;null==l&&null!=e&&(l=k+e);if(null==k||null==l)throw new C(2,2,2001);d=new Bc(k+d,l+d,m);if((g=Lk(c,"region",g))&&g.getAttribute("xml:id")){var n=g.getAttribute("xml:id");h=h.filter(function(c){return c.id==n});d.region=h[0]}Mk(d,c,g,f);return d}
function Mk(c,d,e,f){"rtl"==Nk(d,e,f,"direction")&&(c.writingDirection=1);var g=Nk(d,e,f,"writingMode");"tb"==g||"tblr"==g?c.writingDirection=2:"tbrl"==g?c.writingDirection=3:"rltb"==g||"rl"==g?c.writingDirection=1:g&&(c.writingDirection=Gc);if(g=Nk(d,e,f,"textAlign"))c.positionAlign=Ik[g],c.lineAlign=Hk[g],c.textAlign=Mc[g.toUpperCase()];if(g=Nk(d,e,f,"displayAlign"))c.displayAlign=Nc[g.toUpperCase()];if(g=Nk(d,e,f,"color"))c.color=g;if(g=Nk(d,e,f,"backgroundColor"))c.backgroundColor=g;if(g=Nk(d,
e,f,"fontFamily"))c.fontFamily=g;(g=Nk(d,e,f,"fontWeight"))&&"bold"==g&&(c.fontWeight=700);(g=Nk(d,e,f,"wrapOption"))&&"noWrap"==g&&(c.wrapLine=!1);(g=Nk(d,e,f,"lineHeight"))&&g.match(Ak)&&(c.lineHeight=g);(g=Nk(d,e,f,"fontSize"))&&g.match(Ak)&&(c.fontSize=g);if(g=Nk(d,e,f,"fontStyle"))c.fontStyle=Pc[g.toUpperCase()];(e=wk(e,f,"textDecoration"))&&Ok(c,e);(d=Pk(d,f,"textDecoration"))&&Ok(c,d)}
function Ok(c,d){for(var e=d.split(" "),f=0;f<e.length;f++)switch(e[f]){case "underline":0>c.textDecoration.indexOf("underline")&&c.textDecoration.push("underline");break;case "noUnderline":0<=c.textDecoration.indexOf("underline")&&ib(c.textDecoration,"underline");break;case "lineThrough":0>c.textDecoration.indexOf("lineThrough")&&c.textDecoration.push("lineThrough");break;case "noLineThrough":0<=c.textDecoration.indexOf("lineThrough")&&ib(c.textDecoration,"lineThrough");break;case "overline":0>c.textDecoration.indexOf("overline")&&
c.textDecoration.push("overline");break;case "noOverline":0<=c.textDecoration.indexOf("overline")&&ib(c.textDecoration,"overline")}}function Nk(c,d,e,f){return(c=Pk(c,e,f))?c:wk(d,e,f)}function wk(c,d,e){for(var f=vk(c),g=0;g<f.length;g++){var h=ue(f[g],"http://www.w3.org/ns/ttml#styling",e);if(h)return h}return(c=Lk(c,"style",d))?ue(c,"http://www.w3.org/ns/ttml#styling",e):null}function Pk(c,d,e){return(c=Lk(c,"style",d))?ue(c,"http://www.w3.org/ns/ttml#styling",e):null}
function Lk(c,d,e){if(!c||1>e.length)return null;var f=null,g=c;for(c=null;g&&!(c=g.getAttribute(d))&&(g=g.parentNode,g instanceof Element););if(d=c)for(c=0;c<e.length;c++)if(e[c].getAttribute("xml:id")==d){f=e[c];break}return f}
function Kk(c,d){var e=null;if(Bk.test(c)){e=Bk.exec(c);var f=Number(e[1]),g=Number(e[2]),h=Number(e[3]),k=Number(e[4]);k+=(Number(e[5])||0)/d.b;h+=k/d.frameRate;e=h+60*g+3600*f}else Ck.test(c)?e=Qk(Ck,c):Dk.test(c)?e=Qk(Dk,c):Ek.test(c)?(e=Ek.exec(c),e=Number(e[1])/d.frameRate):Fk.test(c)?(e=Fk.exec(c),e=Number(e[1])/d.a):Gk.test(c)&&(e=Qk(Gk,c));return e}
function Qk(c,d){var e=c.exec(d);return null==e||""==e[0]?null:(Number(e[4])||0)/1E3+(Number(e[3])||0)+60*(Number(e[2])||0)+3600*(Number(e[1])||0)}function uk(c,d,e,f){this.frameRate=Number(c)||30;this.b=Number(d)||1;this.a=Number(f);0==this.a&&(this.a=c?this.frameRate*this.b:1);e&&(c=/^(\d+) (\d+)$/g.exec(e))&&(this.frameRate*=c[1]/c[2])}J["application/ttml+xml"]=tk;function Rk(){this.a=new tk}Rk.prototype.parseInit=function(c){var d=!1;(new R).C("moov",S).C("trak",S).C("mdia",S).C("minf",S).C("stbl",S).Z("stsd",Te).C("stpp",function(c){d=!0;c.parser.stop()}).parse(c);if(!d)throw new C(2,2,2007);};Rk.prototype.parseMedia=function(c,d){var e=!1,f=[];(new R).C("mdat",Ue(function(c){e=!0;f=f.concat(this.a.parseMedia(c,d))}.bind(this))).parse(c);if(!e)throw new C(2,2,2007);return f};J['application/mp4; codecs="stpp"']=Rk;
J['application/mp4; codecs="stpp.TTML.im1t"']=Rk;function Sk(){}Sk.prototype.parseInit=function(){};
Sk.prototype.parseMedia=function(c,d){var e=Lb(c);e=e.replace(/\r\n|\r(?=[^\n]|$)/gm,"\n");e=e.split(/\n{2,}/m);if(!/^WEBVTT($|[ \t\n])/m.test(e[0]))throw new C(2,2,2E3);var f=d.segmentStart;if(null==f&&(f=0,0<=e[0].indexOf("X-TIMESTAMP-MAP"))){var g=e[0].match(/LOCAL:((?:(\d{1,}):)?(\d{2}):(\d{2})\.(\d{3}))/m),h=e[0].match(/MPEGTS:(\d+)/m);g&&h&&(f=Tk(new Wf(g[1])),f=d.periodStart+(Number(h[1])/9E4-f))}h=[];var k=e[0].split("\n");for(g=1;g<k.length;g++)if(/^Region:/.test(k[g])){var l=new Wf(k[g]),
m=new Cc;Zf(l);Xf(l);for(var n=Zf(l);n;){var t=m,u=n;(n=/^id=(.*)$/.exec(u))?t.id=n[1]:(n=/^width=(\d{1,2}|100)%$/.exec(u))?t.width=Number(n[1]):(n=/^lines=(\d+)$/.exec(u))?(t.height=Number(n[1]),t.heightUnits=2):(n=/^regionanchor=(\d{1,2}|100)%,(\d{1,2}|100)%$/.exec(u))?(t.regionAnchorX=Number(n[1]),t.regionAnchorY=Number(n[2])):(n=/^viewportanchor=(\d{1,2}|100)%,(\d{1,2}|100)%$/.exec(u))?(t.viewportAnchorX=Number(n[1]),t.viewportAnchorY=Number(n[2])):/^scroll=up$/.exec(u)&&(t.scroll="up");Xf(l);
n=Zf(l)}h.push(m)}g=[];for(l=1;l<e.length;l++){k=e[l].split("\n");n=k;u=f;k=h;if(1==n.length&&!n[0]||/^NOTE($|[ \t])/.test(n[0])||"STYLE"==n[0])k=null;else{m=null;0>n[0].indexOf("--\x3e")&&(m=n[0],n.splice(0,1));t=new Wf(n[0]);var v=Tk(t),z=Yf(t,/[ \t]+--\x3e[ \t]+/g),y=Tk(t);if(null==v||null==z||null==y)throw new C(2,2,2001);n=new Bc(v+u,y+u,n.slice(1).join("\n").trim());Xf(t);for(u=Zf(t);u;)Uk(n,u,k),Xf(t),u=Zf(t);null!=m&&(n.id=m);k=n}k&&g.push(k)}return g};
function Uk(c,d,e){var f;if(f=/^align:(start|middle|center|end|left|right)$/.exec(d))d=f[1],"middle"==d?c.textAlign=Fc:c.textAlign=Mc[d.toUpperCase()];else if(f=/^vertical:(lr|rl)$/.exec(d))c.writingDirection="lr"==f[1]?2:3;else if(f=/^size:([\d.]+)%$/.exec(d))c.size=Number(f[1]);else if(f=/^position:([\d.]+)%(?:,(line-left|line-right|center|start|end))?$/.exec(d))c.position=Number(f[1]),f[2]&&(d=f[2],c.positionAlign="line-left"==d||"start"==d?"line-left":"line-right"==d||"end"==d?"line-right":"center");
else if(f=/^region:(.*)$/.exec(d)){if(d=Vk(e,f[1]))c.region=d}else if(e=/^line:([\d.]+)%(?:,(start|end|center))?$/.exec(d))c.lineInterpretation=1,c.line=Number(e[1]),e[2]&&(c.lineAlign=Oc[e[2].toUpperCase()]);else if(e=/^line:(-?\d+)(?:,(start|end|center))?$/.exec(d))c.lineInterpretation=Hc,c.line=Number(e[1]),e[2]&&(c.lineAlign=Oc[e[2].toUpperCase()])}function Vk(c,d){var e=c.filter(function(c){return c.id==d});return e.length?e[0]:null}
function Tk(c){c=Yf(c,/(?:(\d{1,}):)?(\d{2}):(\d{2})\.(\d{3})/g);if(null==c)return null;var d=Number(c[2]),e=Number(c[3]);return 59<d||59<e?null:Number(c[4])/1E3+e+60*d+3600*(Number(c[1])||0)}J["text/vtt"]=Sk;J['text/vtt; codecs="vtt"']=Sk;function Wk(){this.a=null}Wk.prototype.parseInit=function(c){var d=!1;(new R).C("moov",S).C("trak",S).C("mdia",S).Z("mdhd",function(c){0==c.version?(c.reader.F(4),c.reader.F(4),this.a=c.reader.B(),c.reader.F(4)):(c.reader.F(8),c.reader.F(8),this.a=c.reader.B(),c.reader.F(8));c.reader.F(4)}.bind(this)).C("minf",S).C("stbl",S).Z("stsd",Te).C("wvtt",function(){d=!0}).parse(c);if(!this.a)throw new C(2,2,2008);if(!d)throw new C(2,2,2008);};
Wk.prototype.parseMedia=function(c,d){var e=this;if(!this.a)throw new C(2,2,2008);var f=0,g=[],h,k=[],l=!1,m=!1,n=!1,t=null;(new R).C("moof",S).C("traf",S).Z("tfdt",function(c){l=!0;f=0==c.version?c.reader.B():c.reader.Ra()}).Z("tfhd",function(c){var d=c.flags;c=c.reader;c.F(4);d&1&&c.F(8);d&2&&c.F(4);t=d&8?c.B():null}).Z("trun",function(c){m=!0;var d=c.version,e=c.flags;c=c.reader;var f=c.B();e&1&&c.F(4);e&4&&c.F(4);for(var h=[],k=0;k<f;k++){var l={duration:null,sampleSize:null,gc:null};e&256&&(l.duration=
c.B());e&512&&(l.sampleSize=c.B());e&1024&&c.F(4);e&2048&&(l.gc=0==d?c.B():c.Lc());h.push(l)}g=h}).C("mdat",Ue(function(c){n=!0;h=c})).parse(c);if(!n&&!l&&!m)throw new C(2,2,2008);var u=f,v=new DataView(h.buffer,h.byteOffset,h.byteLength),z=new Q(v,0);g.forEach(function(c){var g=c.duration||t,h=c.gc?f+c.gc:u;u=h+(g||0);var l=0;do{var m=z.B();l+=m;var n=z.B(),v=null;"vttc"==Ve(n)?8<m&&(v=z.Da(m-8)):z.F(m-8);g&&v&&k.push(Xk(v,d.periodStart+h/e.a,d.periodStart+u/e.a))}while(c.sampleSize&&l<c.sampleSize)});
return k.filter(Eb)};function Xk(c,d,e){var f,g,h;(new R).C("payl",Ue(function(c){f=Lb(c)})).C("iden",Ue(function(c){g=Lb(c)})).C("sttg",Ue(function(c){h=Lb(c)})).parse(c);return f?Yk(f,g,h,d,e):null}function Yk(c,d,e,f,g){c=new Bc(f,g,c);d&&(c.id=d);if(e)for(d=new Wf(e),e=Zf(d);e;)Uk(c,e,[]),Xf(d),e=Zf(d);return c}J['application/mp4; codecs="wvtt"']=Wk;}).call(exportTo,innerGlobal,innerGlobal);if(typeof exports!="undefined")for(var k in exportTo.shaka)exports[k]=exportTo.shaka[k];else if(typeof define!="undefined"&&define.amd)define(function(){return exportTo.shaka});else innerGlobal.shaka=exportTo.shaka})();

//# sourceMappingURL=shaka-player.compiled.map